<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PX4 Firmware: src/drivers/distance_sensor/pga460/pga460.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PX4 Firmware
   </div>
   <div id="projectbrief">PX4 Autopilot Software http://px4.io</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/d01/pga460_8h_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">pga460.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/d01/pga460_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *   Copyright (c) 2012-2018 PX4 Development Team. All rights reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * are met:</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * 1. Redistributions of source code must retain the above copyright</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer in</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *    the documentation and/or other materials provided with the</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *    distribution.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * 3. Neither the name PX4 nor the names of its contributors may be</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *    used to endorse or promote products derived from this software</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *    without specific prior written permission.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * POSSIBILITY OF SUCH DAMAGE.</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> ****************************************************************************/</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * @file pga460.h</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * @author Jacob Dahl &lt;jacob.dahl@tealdrones.com&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * Driver for the TI PGA460 Ultrasonic Signal Processor and Transducer Driver</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#ifndef _PGA460_H</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#define _PGA460_H</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;termios.h&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../db/de9/device_8h.html">drivers/device/device.h</a>&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d6/d10/drv__hrt_8h.html">drivers/drv_hrt.h</a>&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../db/db6/distance__sensor_8h.html">uORB/topics/distance_sensor.h</a>&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;px4_platform_common/module.h&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;px4_platform_common/module_params.h&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;px4_platform_common/tasks.h&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a6591c42388a943c343e28cae121b90aa">   57</a></span>&#160;<span class="preprocessor">#define PGA460_DEFAULT_PORT &quot;/dev/ttyS6&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aacbb81031a8075eefc712db2ffe1b4a4">   58</a></span>&#160;<span class="preprocessor">#define MAX_DETECTABLE_DISTANCE          3.0f</span></div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a1e85b5ee0078bf04202138777a4253c8">   59</a></span>&#160;<span class="preprocessor">#define MIN_DETECTABLE_DISTANCE          0.05f</span></div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a7d19c94876350dbff2d365369f2c29c6">   60</a></span>&#160;<span class="preprocessor">#define MAX_DETECTABLE_TEMPERATURE     100.0f</span></div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a0127c3a53d170d0d3223d0d00f46c8af">   61</a></span>&#160;<span class="preprocessor">#define MIN_DETECTABLE_TEMPERATURE     -20.0f</span></div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a987ffa26137617e8697e808e87104463">   62</a></span>&#160;<span class="preprocessor">#define MODE_SET_THRESH                  0.6f</span></div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#afd008316f637f90200aa2365497abbad">   63</a></span>&#160;<span class="preprocessor">#define MODE_SET_HYST                    0.0f</span></div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a35263ad4341e42087ec21f272fb41733">   64</a></span>&#160;<span class="preprocessor">#define MAX_SAMPLE_DEVIATION             0.15f</span></div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aba64653a79fa68bd13a42287fb0fed95">   65</a></span>&#160;<span class="preprocessor">#define NUM_SAMPLES_CONSISTENT           5</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// #define POLL_RATE_US 50000ULL</span></div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#afc6481a1f622c455260a5942a6952106">   67</a></span>&#160;<span class="preprocessor">#define POLL_RATE_US 0ULL</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a03da1ffc68d95bc3fcb641dbf7123521">   69</a></span>&#160;<span class="preprocessor">#define MODE_SHORT_RANGE P1BL</span></div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ab64243f09a8107538ccfe496e24673b3">   70</a></span>&#160;<span class="preprocessor">#define MODE_LONG_RANGE  P2BL</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a06caba338f37bf0c5c054f6f9083b1a0">   72</a></span>&#160;<span class="preprocessor">#define SYNCBYTE        0x55</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">//      Define UART commands by name</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// Single Address</span></div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a4b88f4eb11dbabb132f1aeed683b6bf4">   77</a></span>&#160;<span class="preprocessor">#define P1BL            0x00    // Burst and Listen (Preset 1)</span></div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aff2241b2cde6d646d2e11b981a087a0b">   78</a></span>&#160;<span class="preprocessor">#define P2BL            0x01    // Burst and Listen (Preset 2)</span></div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a5d9910d9a3025bfa1ff7c40058879f16">   79</a></span>&#160;<span class="preprocessor">#define P1LO            0x02    // Listen Only (Preset 1)</span></div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aa5f498931e8a0efa303d430e01b860e9">   80</a></span>&#160;<span class="preprocessor">#define P2LO            0x03    // Listen Only (Preset 2)</span></div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a38cbe684cf15bb9376dab54446b6928b">   81</a></span>&#160;<span class="preprocessor">#define TNLM            0x04    // Temperature and Noise-level measurement</span></div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a6b82a7dfa5eb2a5e45f7853816ff1711">   82</a></span>&#160;<span class="preprocessor">#define UMR             0x05    // Ultrasonic Measurement Result</span></div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a94ea905ea1e9e6a72b4200aabe140449">   83</a></span>&#160;<span class="preprocessor">#define TNLR            0x06    // Temperature and noise level result</span></div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a8dd0391cc0b9a0a49c5bb47860794d7b">   84</a></span>&#160;<span class="preprocessor">#define TEDD            0x07    // Transducer echo data dump</span></div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a9f5064fb4edd1381305163ee726f8ca5">   85</a></span>&#160;<span class="preprocessor">#define SD              0x08    // System diagnostics</span></div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aa83ca513aa104505303150430d954fe1">   86</a></span>&#160;<span class="preprocessor">#define SRR             0x09    // Register read</span></div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a6f327277fdd50c81018e1692bf7cb5d0">   87</a></span>&#160;<span class="preprocessor">#define SRW             0x0A    // Register write</span></div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a39b556cf254ece74d63fa7407ef34c9b">   88</a></span>&#160;<span class="preprocessor">#define EEBR            0x0B    // EEPROM bulk read</span></div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ad900d2f2fe9db99a9c41da248e4c6d10">   89</a></span>&#160;<span class="preprocessor">#define EEBW            0x0C    // EEPROM bulk write</span></div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a4d1ac17d44d665b97145e2d403b8994e">   90</a></span>&#160;<span class="preprocessor">#define TVGBR           0x0D    // Time-varying-gain bulk read</span></div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a1fdb883b43c71ed3dc0a94648df34472">   91</a></span>&#160;<span class="preprocessor">#define TVGBW           0x0E    // Time-varying-gain bulk write</span></div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a1d8d8c70cfff4dffe9738dd726bfff4c">   92</a></span>&#160;<span class="preprocessor">#define THRBR           0x0F    // Threshold bulk read</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a6924ec13ba897b9aec46cc21ff2f3b67">   93</a></span>&#160;<span class="preprocessor">#define THRBW           0x10    // Threshold bulk write</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">// Broadcast -- device will execute command irrespecive of UART address field</span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#abb5323c9b36d78373441865ce1667afc">   96</a></span>&#160;<span class="preprocessor">#define BC_P1BL         0x11    // Burst and listen (Preset 1)</span></div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a5b3f19adc53b3a3e420136dc15799c04">   97</a></span>&#160;<span class="preprocessor">#define BC_P2BL         0x12    // Burst and listen (Preset 2)</span></div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a7af06d1f072fbc10bdd4e03cec752e95">   98</a></span>&#160;<span class="preprocessor">#define BC_P1LO         0x13    // Listen only (Preset 1)</span></div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a978e7db762c76fa19d4a3e3342772363">   99</a></span>&#160;<span class="preprocessor">#define BC_P2LO         0x14    // Listen only (Preset 2)</span></div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#abde49a651352fafe415e18e8b55b9bbf">  100</a></span>&#160;<span class="preprocessor">#define BC_TNLM         0x15    // Temperature and noise-level measurement</span></div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a35dc2ede1c1921ebcab28ab204b1ba75">  101</a></span>&#160;<span class="preprocessor">#define BC_SRW          0x16    // Register write</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a1fac8a6ae11cd85978576ded84e54c7e">  102</a></span>&#160;<span class="preprocessor">#define BC_EEBW         0x17    // EEPROM bulk write</span></div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ae85ac380ad0367c2cf6261fd7c2aac5f">  103</a></span>&#160;<span class="preprocessor">#define BC_TVGBW        0x18    // Time varying-gain bulk write</span></div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a7e736609628e42284b46d634da638183">  104</a></span>&#160;<span class="preprocessor">#define BC_THRBW        0x19    // Threshold bulk write</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// Addresses and Settings</span></div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a02312fc42adaca83725373a3f16c2df4">  107</a></span>&#160;<span class="preprocessor">#define EE_CNTRL_ADDR   0x40</span></div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#acaf7bc0d97f132faa29916d8bd971c0f">  108</a></span>&#160;<span class="preprocessor">#define EE_UNLOCK_ST1   0x68</span></div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a03e39c4c958748d669f3924ef2485cc8">  109</a></span>&#160;<span class="preprocessor">#define EE_UNLOCK_ST2   0x69</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">// EEPROM -- non-volatile</span></div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ae03b341d3bc7a2b374bd6d31e94b2da3">  112</a></span>&#160;<span class="preprocessor">#define USER_DATA1      0xAA    //reg addr      0x0</span></div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a276a2e5863d3ceb703493c4c9256adf1">  113</a></span>&#160;<span class="preprocessor">#define USER_DATA2      0x0     //reg addr      0x1</span></div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a9c7d5bced56777ad88234e9c98a8a93a">  114</a></span>&#160;<span class="preprocessor">#define USER_DATA3      0x0     //reg addr      0x2</span></div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a03105f69c42b740187e34ecb452c1a2f">  115</a></span>&#160;<span class="preprocessor">#define USER_DATA4      0x0     //reg addr      0x3</span></div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#adfe7c4c7441be1a8ba3a17e9fc405bc3">  116</a></span>&#160;<span class="preprocessor">#define USER_DATA5      0x0     //reg addr      0x4</span></div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a69e50a37ee5902ecccde418df991b03d">  117</a></span>&#160;<span class="preprocessor">#define USER_DATA6      0x0     //reg addr      0x5</span></div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a46b1ba4b8b41155d93a5c8b41c9b012e">  118</a></span>&#160;<span class="preprocessor">#define USER_DATA7      0x0     //reg addr      0x6</span></div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a2f502de02fa5a7045553c0562b9f4d30">  119</a></span>&#160;<span class="preprocessor">#define USER_DATA8      0x0     //reg addr      0x7</span></div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a2e3fe4bdec3d573f347e43a038f3633b">  120</a></span>&#160;<span class="preprocessor">#define USER_DATA9      0x0     //reg addr      0x8</span></div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a5ac6383650f491ccb135b5ff4bbc82f7">  121</a></span>&#160;<span class="preprocessor">#define USER_DATA10     0x0     //reg addr      0x9</span></div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a04a90a6868f8fc4460bbe9f075a8ad31">  122</a></span>&#160;<span class="preprocessor">#define USER_DATA11     0x0     //reg addr      0x0A</span></div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ac8a585e5a78ae3a6cc89f2b2a320c46e">  123</a></span>&#160;<span class="preprocessor">#define USER_DATA12     0x0     //reg addr      0x0B</span></div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a130aff1478704d3f503c514ca3aaa8ab">  124</a></span>&#160;<span class="preprocessor">#define USER_DATA13     0x0     //reg addr      0x0C</span></div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a9b85d8e7e80bc0e8de5b1c17f687f441">  125</a></span>&#160;<span class="preprocessor">#define USER_DATA14     0x0     //reg addr      0x0D</span></div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a46513cff8b724751f3597cc1348b26db">  126</a></span>&#160;<span class="preprocessor">#define USER_DATA15     0x0     //reg addr      0x0E</span></div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a7544046f4c42e76b5c5a9afe0e970189">  127</a></span>&#160;<span class="preprocessor">#define USER_DATA16     0x0     //reg addr      0x0F</span></div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ae24f2a5f230bd29cc4e9c1123a111258">  128</a></span>&#160;<span class="preprocessor">#define USER_DATA17     0x0     //reg addr      0x10</span></div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a4928652632dfa3de12f8ccc7b3d9cf44">  129</a></span>&#160;<span class="preprocessor">#define USER_DATA18     0x0     //reg addr      0x11</span></div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a677b113975abeb385451cde48c42acf0">  130</a></span>&#160;<span class="preprocessor">#define USER_DATA19     0x0     //reg addr      0x12</span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ab84cc9c7758a83ec2f628aa1477d0d82">  131</a></span>&#160;<span class="preprocessor">#define USER_DATA20     0x0     //reg addr      0x13</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a02db68b39be61ef8de3c7e291a97335a">  132</a></span>&#160;<span class="preprocessor">#define TVGAIN0         0x9D    //reg addr      0x14</span></div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ad742f2b55878bf6ba0b22b63588d4fb3">  133</a></span>&#160;<span class="preprocessor">#define TVGAIN1         0xBD    //reg addr      0x15</span></div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a8f127d88568d52fe7a81e9638d5b7ca0">  134</a></span>&#160;<span class="preprocessor">#define TVGAIN2         0xEF    //reg addr      0x16</span></div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a72c89385f794aa51b6b3b690cab6d916">  135</a></span>&#160;<span class="preprocessor">#define TVGAIN3         0x31    //reg addr      0x17</span></div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a2683d4959b8c1d01573b5d8bc0b80fae">  136</a></span>&#160;<span class="preprocessor">#define TVGAIN4         0x48    //reg addr      0x18</span></div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ad74cd6bc79fe213e18a0d408873bad0d">  137</a></span>&#160;<span class="preprocessor">#define TVGAIN5         0x67    //reg addr      0x19</span></div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#af18f3d17f97ad037f27c894d5bfc042e">  138</a></span>&#160;<span class="preprocessor">#define TVGAIN6         0xAC    //reg addr      0x1A</span></div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ae9fc5398681de58d3db565e4fa72b97a">  139</a></span>&#160;<span class="preprocessor">#define INIT_GAIN       0x40    //reg addr      0x1B</span></div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a84142cd3e3bf14c4ecd4b6707a808c39">  140</a></span>&#160;<span class="preprocessor">#define FREQUENCY   (uint8_t)(5*(_resonant_frequency - 30.0f))       //reg addr      0x1C</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a1433f4ad7e455aea529bab6e26c3374e">  141</a></span>&#160;<span class="preprocessor">#define DEADTIME        0xF0    //reg addr      0x1D</span></div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a357b6edf0593450e11705215e7d4a6ec">  142</a></span>&#160;<span class="preprocessor">#define PULSE_P1        0x0C    //reg addr      0x1E</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ab52807bfc0d9ba7e7080167d1e047f3b">  143</a></span>&#160;<span class="preprocessor">#define PULSE_P2        0x1F    //reg addr      0x1F</span></div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#af3efd0c01a4d8f105eb6a093502bf5c8">  144</a></span>&#160;<span class="preprocessor">#define CURR_LIM_P1     0x7F    //reg addr      0x20</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ade4ebdb9afd74f2f953712aa43ca5d5e">  145</a></span>&#160;<span class="preprocessor">#define CURR_LIM_P2     0x7F    //reg addr      0x21</span></div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ad5a92d8fc10809f75c07efff9ee2bbef">  146</a></span>&#160;<span class="preprocessor">#define REC_LENGTH      0x44    //reg addr      0x22</span></div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a7fa12befbfb311453fecb1a5a87544bd">  147</a></span>&#160;<span class="preprocessor">#define FREQ_DIAG       0x1B    //reg addr      0x23</span></div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a18872e0dbc1003813682ab353e26894c">  148</a></span>&#160;<span class="preprocessor">#define SAT_FDIAG_TH    0x2C    //reg addr      0x24</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a228a9382086981088ae9b0e0a072c74c">  149</a></span>&#160;<span class="preprocessor">#define FVOLT_DEC       0x7C    //reg addr      0x25</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aca4c4b256b9574e2068274334213ed0e">  150</a></span>&#160;<span class="preprocessor">#define DECPL_TEMP      0xDF    //reg addr      0x26</span></div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a9d230dded3e8b95cf8884a5aad54c618">  151</a></span>&#160;<span class="preprocessor">#define DSP_SCALE       0x0     //reg addr      0x27</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aa04f0a1180a98ec215dbb6330d0008f4">  152</a></span>&#160;<span class="preprocessor">#define TEMP_TRIM       0x0     //reg addr      0x28</span></div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a7f521daf4354d0f3bda8a911f2ddb571">  153</a></span>&#160;<span class="preprocessor">#define P1_GAIN_CTRL    0x0     //reg addr      0x29</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a9a4e114605d4861a3239739b66e23447">  154</a></span>&#160;<span class="preprocessor">#define P2_GAIN_CTRL    0x8     //reg addr      0x2A</span></div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a6e6cc3381d4d5be92c4cc603d3315d22">  155</a></span>&#160;<span class="preprocessor">#define EE_CRC          0x29    //reg addr      0x2B</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">// Register-based -- volatile</span></div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#acbf3be32d610918be0f4f0cadb608f20">  158</a></span>&#160;<span class="preprocessor">#define EE_CNTRL        0x0     //reg addr      0x40</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a8f80611478e09078212c5d16ca3c7e01">  160</a></span>&#160;<span class="preprocessor">#define BPF_A2_MSB      0x85    //reg addr      0x41</span></div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a94f838b497e86b718973c7e60f3fada6">  161</a></span>&#160;<span class="preprocessor">#define BPF_A2_LSB      0xEA    //reg addr      0x42</span></div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aab5ad4462e2a9c795af5bf0e0b07ee88">  162</a></span>&#160;<span class="preprocessor">#define BPF_A3_MSB      0xF9    //reg addr      0x43</span></div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aec8b242864be01137a0581c90ad062ea">  163</a></span>&#160;<span class="preprocessor">#define BPF_A3_LSB      0xA5    //reg addr      0x44</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a0993e18c078bc2cee9a91788604c096d">  164</a></span>&#160;<span class="preprocessor">#define BPF_B1_MSB      0x3     //reg addr      0x45</span></div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a62cfc0e87dea803ff33ed12b8ca8ae64">  165</a></span>&#160;<span class="preprocessor">#define BPF_B1_LSB      0x2D    //reg addr      0x46</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#af859f9947824d9e39e5413976e30e073">  166</a></span>&#160;<span class="preprocessor">#define LPF_A2_MSB      0x7E    //reg addr      0x47</span></div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aa7d228494b35865d827309a594dca965">  167</a></span>&#160;<span class="preprocessor">#define LPF_A2_LSB      0x67    //reg addr      0x48</span></div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aa7216db204a11c99851880b6db689a77">  168</a></span>&#160;<span class="preprocessor">#define LPF_B1_MSB      0x0     //reg addr      0x49</span></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a23b119f1b1f066d2a151b783e63875aa">  169</a></span>&#160;<span class="preprocessor">#define LPF_B1_LSB      0xCD    //reg addr      0x4A</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a3c9a7405420dd8cd610c73cb0c07f88e">  171</a></span>&#160;<span class="preprocessor">#define TEST_MUX        0x0     //reg addr      0x4B</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aa5db52401d51db65b3728ab5cafbaae1">  172</a></span>&#160;<span class="preprocessor">#define DEV_STAT0       0x80    //reg addr      0x4C</span></div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a4d75040918fe29f710723dd0d190efa4">  173</a></span>&#160;<span class="preprocessor">#define DEV_STAT1       0x0     //reg addr      0x4D</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">// Register-based -- volatile</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ac175a886cd765be55d06bb771ee921de">  176</a></span>&#160;<span class="preprocessor">#define P1_THR_0        0x54    //reg addr      0x5F</span></div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a1a36dea5c845e901355411d41598b9af">  177</a></span>&#160;<span class="preprocessor">#define P1_THR_1        0x5C    //reg addr      0x60</span></div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a38fb01ef881ef805745b6f269c673566">  178</a></span>&#160;<span class="preprocessor">#define P1_THR_2        0xBD    //reg addr      0x61</span></div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a9cb0ef2e4b0140bbb57c29ca9987f03e">  179</a></span>&#160;<span class="preprocessor">#define P1_THR_3        0xE0    //reg addr      0x62</span></div><div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a70caf3868f7941c97ec4c3d9c73b3d9d">  180</a></span>&#160;<span class="preprocessor">#define P1_THR_4        0x6     //reg addr      0x63</span></div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aad68450585abf4899ea1048e79593f08">  181</a></span>&#160;<span class="preprocessor">#define P1_THR_5        0xCF    //reg addr      0x64</span></div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a99c0602035a3e492629aae9471035fb5">  182</a></span>&#160;<span class="preprocessor">#define P1_THR_6        0xEE    //reg addr      0x65</span></div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ab0f0d9a31e3b9340f6e32d9a5d2908f6">  183</a></span>&#160;<span class="preprocessor">#define P1_THR_7        0x8E    //reg addr      0x66</span></div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ac8b3caf6fcd83ab5cd36950a37a4f5bc">  184</a></span>&#160;<span class="preprocessor">#define P1_THR_8        0x84    //reg addr      0x67</span></div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#abb4af4e994868c3993ec7cfc9ed5a0d9">  185</a></span>&#160;<span class="preprocessor">#define P1_THR_9        0xB6    //reg addr      0x68</span></div><div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a39cb64a069ea1900a5936a4bb15f3473">  186</a></span>&#160;<span class="preprocessor">#define P1_THR_10       0x5A    //reg addr      0x69</span></div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a82d58e5fffcb3dea7719e43a0e56b8b0">  187</a></span>&#160;<span class="preprocessor">#define P1_THR_11       0xFF    //reg addr      0x6A</span></div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#af9bfc699cbe1c5f6e4d21716af68f727">  188</a></span>&#160;<span class="preprocessor">#define P1_THR_12       0xFF    //reg addr      0x6B</span></div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a7199c950a6208d414dcfed3c6641d324">  189</a></span>&#160;<span class="preprocessor">#define P1_THR_13       0xFF    //reg addr      0x6C</span></div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a717f7bf353e250b6acc029b449a86b48">  190</a></span>&#160;<span class="preprocessor">#define P1_THR_14       0xFF    //reg addr      0x6D</span></div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aa174be07668586b79f33889e9f90fb93">  191</a></span>&#160;<span class="preprocessor">#define P1_THR_15       0x0     //reg addr      0x6E</span></div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a3b2116e43b205ec50f334d0989d87908">  192</a></span>&#160;<span class="preprocessor">#define P2_THR_0        0xBA    //reg addr      0x6F</span></div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ad8b9280201d5e05365076abd905bbfa2">  193</a></span>&#160;<span class="preprocessor">#define P2_THR_1        0xCF    //reg addr      0x70</span></div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a12df93bb27c66c4422006dbb4569f4d5">  194</a></span>&#160;<span class="preprocessor">#define P2_THR_2        0xFF    //reg addr      0x71</span></div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#adbb6c7ae4859daa191526d693d87e6cf">  195</a></span>&#160;<span class="preprocessor">#define P2_THR_3        0xF5    //reg addr      0x72</span></div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ab207c65f7f87650025a34b781b9ca3f8">  196</a></span>&#160;<span class="preprocessor">#define P2_THR_4        0x1A    //reg addr      0x73</span></div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aca8bdecaf74d8b47fb356d51c3e81fe1">  197</a></span>&#160;<span class="preprocessor">#define P2_THR_5        0x5F    //reg addr      0x74</span></div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a56f881b4cd94034ba8a9576a8a6ad713">  198</a></span>&#160;<span class="preprocessor">#define P2_THR_6        0xFA    //reg addr      0x75</span></div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#ad600d05a302d96368fba07f7b9923090">  199</a></span>&#160;<span class="preprocessor">#define P2_THR_7        0xD6    //reg addr      0x76</span></div><div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aa1cca8c02ab0958a26f763588d798b48">  200</a></span>&#160;<span class="preprocessor">#define P2_THR_8        0xB6    //reg addr      0x77</span></div><div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a0694c295014c800d1408425f2963195f">  201</a></span>&#160;<span class="preprocessor">#define P2_THR_9        0x35    //reg addr      0x78</span></div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a841103357d64d713194880070d6c2606">  202</a></span>&#160;<span class="preprocessor">#define P2_THR_10       0xDF    //reg addr      0x79</span></div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a3277e813fb0724388e544b4c97f0dc65">  203</a></span>&#160;<span class="preprocessor">#define P2_THR_11       0xFF    //reg addr      0x7A</span></div><div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a6299789099aded7d7263a78a1fe59db6">  204</a></span>&#160;<span class="preprocessor">#define P2_THR_12       0xFF    //reg addr      0x7B</span></div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a3c1ce009fa8718833f243554b17956e9">  205</a></span>&#160;<span class="preprocessor">#define P2_THR_13       0xFF    //reg addr      0x7C</span></div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#aebadf31c8db09e463010d1399354edfb">  206</a></span>&#160;<span class="preprocessor">#define P2_THR_14       0xFF    //reg addr      0x7D</span></div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a049807411a09d216e6521d876479f9d6">  207</a></span>&#160;<span class="preprocessor">#define P2_THR_15       0x0     //reg addr      0x7E</span></div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="../../d5/d01/pga460_8h.html#a7be31cd4fdb3cab1ec4007a5fe06c5fc">  208</a></span>&#160;<span class="preprocessor">#define THR_CRC         0x1D    //reg addr      0x7F</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="../../d2/de1/class_p_g_a460.html">  210</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d2/de1/class_p_g_a460.html">PGA460</a> : <span class="keyword">public</span> ModuleBase&lt;PGA460&gt;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="../../d2/de1/class_p_g_a460.html#aa994ee16f7ee500d47202c1332fe0930">PGA460</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *port = <a class="code" href="../../d5/d01/pga460_8h.html#a6591c42388a943c343e28cae121b90aa">PGA460_DEFAULT_PORT</a>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keyword">virtual</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a77730479b218f908f0e482d274571660">~PGA460</a>();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">     * @see ModuleBase::custom_command().</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">     * @brief main Main entry point to the module that should be</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">     *        called directly from the module&#39;s main method.</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">     * @param argc The input argument count.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">     * @param argv Pointer to the input argument array.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">     * @return Returns 0 iff successful, -1 otherwise.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#abf07d70425d7a8f41a09e6a17d79740b">custom_command</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">     * @see ModuleBase::instantiate().</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">     * @brief Instantiates the pga460 object.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">     * @param argc The input argument count.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">     * @param argv Pointer to the input argument array.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">static</span> <a class="code" href="../../d2/de1/class_p_g_a460.html">PGA460</a> *<a class="code" href="../../d2/de1/class_p_g_a460.html#a4924d68b7ece950196b139719227e8bc">instantiate</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">     * @see ModuleBase::print_usage().</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">     * @brief Prints the module usage to the nuttshell console.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">     * @param reason The requested reason for printing to console.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a7ab6f1bdaccdf487b09a22dbb22cc103">print_usage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *reason = <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">     * @see ModuleBase::task_spawn().</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#aa7fb50bc61360e7199d3fb3607bb8bb1">task_spawn</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">     * @brief Closes the serial port.</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">     * @return Returns 0 if success or ERRNO.</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a71a7887e10c2cd11a61704ed03002bb0">close_serial</a>();</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">     * @brief Opens the serial port.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">     * @return Returns true if the open was successful or ERRNO.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a8a4b8ed88640f8789e3da2bb5d1d47f1">open_serial</a>();</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">     * @brief Reports the diagnostic data from device status registers 1 and 2 if there is anything to report.</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a0d04e4ba1f4b32608e894af655f181ca">print_device_status</a>();<span class="comment"></span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">     * @brief Reports the diagnostic data the diagnostic byte (first byte from slave).</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">     * @param diagnostic_byte The diagnostic byte that contains the bitflags.</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a2769387ceba52f7f6b2d034249bec020">print_diagnostics</a>(<span class="keyword">const</span> uint8_t diagnostic_byte);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">     * Diagnostics - print some basic information about the driver.</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#acaf95435de3d8ff545acd6a449e869bf">print_status</a>() <span class="keyword">override</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">     * @brief Reads the threshold registers.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">     * @return Returns true if the threshold registers are set to default</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a58c2504469a78a390f1813b623293d3e">read_threshold_registers</a>();</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">     * @see ModuleBase::run().</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a899ed440e901f63d72bd6f17b337e221">run</a>() <span class="keyword">override</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">     * @brief Reads the EEPROM and checks to see if it matches the default parameters.</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">     * @note This method is only called once at boot.</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">     * @return Returns PX4_OK if the EEPROM has default values, PX4_ERROR otherwise.</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#af7737132b56f05fe3b8c3594e2e2f657">read_eeprom</a>();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">     * @brief Writes the user defined paramaters to device EEPROM.</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">     * @return Returns true if the EEPROM was successfully written to.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#ad7eba50f170fa950b05a50462f3c0d72">write_eeprom</a>();</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">     * @brief Reads a register.</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">     * @param reg The register to read from.</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">     * @return Returns the value of the register at the specified address.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    uint8_t <a class="code" href="../../d2/de1/class_p_g_a460.html#aa3cba392c1eacedd0d2b5db944fed810">read_register</a>(<span class="keyword">const</span> uint8_t reg);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">     * @brief Writes a value to a register.</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">     * @param reg The register address to write to.</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">     * @param val The value to write.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">     * @return Returns true for success or false for fail.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a3535cf2247d18a68103ae7a94c561a98">write_register</a>(<span class="keyword">const</span> uint8_t reg, <span class="keyword">const</span> uint8_t val);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">    * @brief Calculates the checksum of the transmitted commmand + data.</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">    * @param data Pointer to the data a checksum will be calculated for.</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">    * @param size The size of the data (bytes) the checksum will be calculated for.</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">    * @return Returns the single byte checksum.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    uint8_t <a class="code" href="../../d2/de1/class_p_g_a460.html#a1b69dc256ac60cb9dfe6daf01702178f">calc_checksum</a>(uint8_t *<a class="code" href="../../d6/d47/dataman_8cpp.html#abe222f6d3581e7920dcad5306cc906a8">data</a>, <span class="keyword">const</span> uint8_t size);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">     * @brief Calculates the distance from the measurement time of flight (time_of_flight) and current temperature.</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">     * @param time_of_flight The reported time of flight in ms from the device.</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">     * @return Returns the distance measurement in meters.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a01fbc4cdaa7d259c2fc638d0b5a97d68">calculate_object_distance</a>(uint16_t time_of_flight);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">     * @brief Collects the data in the serial port rx buffer, does math, and publishes the value to uORB</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">     * @return Returns the measurment results in format: (u16)time_of_flight, (u8)width, (u8)amplitude</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    uint32_t <a class="code" href="../../d2/de1/class_p_g_a460.html#a2545d4d61e3ccc91709b46dcd5116bae">collect_results</a>();</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">     * @brief Send the program command to the EEPROM to start the flash process.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a380e300f9163e3c85bc6f52c1d738d37">flash_eeprom</a>();</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">     * @brief Writes program defined threshold defaults to the register map and checks/writes the EEPROM.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">     * @return Returns PX4_OK upon success or PX4_ERROR on fail.</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a6107cd56baa06f1b8225e3d525e56dd6">initialize_device_settings</a>();</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">     * @brief Writes the user defined paramaters to device register map.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">     * @return Returns true if the thresholds were successfully written.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a97e921ebda39c3289f4018183b9306d6">initialize_thresholds</a>();</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">     * @brief Measurement is read from UART RX buffer and published to the uORB distance sensor topic.</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a9d8ba2bd8d9c46a353d3e44a3b5d218a">request_results</a>();</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">     * @brief Checks the measurement from last report and sets the range distance mode (long range , short range).</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">     * @return Returns the either P1Bl or P1B2. Preset 1 (P1BL) is short range mode and preset two (P2BL) is long range mode.</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    uint8_t <a class="code" href="../../d2/de1/class_p_g_a460.html#a7803b58ad2b478cbf03c3a7cb01649d2">set_range_mode</a>();</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">     * @brief Commands the device to perform an ultrasonic measurement.</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#aaf4739d425f49eb9924c3e681521e076">take_measurement</a>(<span class="keyword">const</span> uint8_t <a class="code" href="../../dd/d64/vtol__type_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">     * @brief Gets a temperature measurement in degrees C.</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">     * @return Returns the temperature measurement in degrees C.</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#ac8cc9815e162ba48a9f0d35582d37534">get_temperature</a>();</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">     * @brief Send the unlock command to the EEPROM to enable reading and writing -- not needed w/ bulk write</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a8e4e7002fbeb7cf50a321c0e52c8fcb1">unlock_eeprom</a>();</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">    /**</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">     * @brief Commands the device to publish the measurement results to uORB.</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">     * @param dist The calculated distance to the object.</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#af681ca38b414903817943fc2746cf9b4">uORB_publish_results</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> dist);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">    /** @orb_advert_t orb_advert_t uORB advertisement topic. */</span></div><div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="../../d2/de1/class_p_g_a460.html#ad7ac2acf0212737ec2396bf228d3e582">  388</a></span>&#160;    <a class="code" href="../../db/dd6/u_o_r_b_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a> <a class="code" href="../../d2/de1/class_p_g_a460.html#ad7ac2acf0212737ec2396bf228d3e582">_distance_sensor_topic</a>{<span class="keyword">nullptr</span>};</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">    /** @param _fd Returns the file descriptor from px4_open(). */</span></div><div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="../../d2/de1/class_p_g_a460.html#ab6ef94f2bd6ff1a2621da6e2d59116c8">  391</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#ab6ef94f2bd6ff1a2621da6e2d59116c8">_fd</a>{-1};</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">    /** @param _port Stores the port name. */</span></div><div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="../../d2/de1/class_p_g_a460.html#adbd5858fecbd6a614adc72b444912b41">  394</a></span>&#160;    <span class="keywordtype">char</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#adbd5858fecbd6a614adc72b444912b41">_port</a>[20] {};</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">    /** @param _previous_report_distance The previous reported sensor distance. */</span></div><div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="../../d2/de1/class_p_g_a460.html#a4af6ff4fe4d9f28d39ec8c592889a172">  397</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a4af6ff4fe4d9f28d39ec8c592889a172">_previous_report_distance</a>{0};</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">    /** @param _previous_valid_report_distance The previous valid reported sensor distance. */</span></div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="../../d2/de1/class_p_g_a460.html#a2f931c5f670484d74892ff8534ba5760">  400</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a2f931c5f670484d74892ff8534ba5760">_previous_valid_report_distance</a>{0};</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">    /** @param _resonant_frequency The sensor resonant (transmit) frequency. */</span></div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="../../d2/de1/class_p_g_a460.html#a9b847489241b0131397cd7b845609223">  403</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d2/de1/class_p_g_a460.html#a9b847489241b0131397cd7b845609223">_resonant_frequency</a>{41.0f};</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">    /** @param _mode_long_range Flag for long range mode. If false, sensor is in short range mode. */</span></div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="../../d2/de1/class_p_g_a460.html#a3ce1ce526fa252953ee2e237628f8ee5">  406</a></span>&#160;    uint8_t <a class="code" href="../../d2/de1/class_p_g_a460.html#a3ce1ce526fa252953ee2e237628f8ee5">_ranging_mode</a>{<a class="code" href="../../d5/d01/pga460_8h.html#a03da1ffc68d95bc3fcb641dbf7123521">MODE_SHORT_RANGE</a>};</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">    /** @param _start_loop The starting value for the loop time of the main loop. */</span></div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="../../d2/de1/class_p_g_a460.html#a5aa96b5ed5183b3d063be133d6f80ab3">  409</a></span>&#160;    uint64_t <a class="code" href="../../d2/de1/class_p_g_a460.html#a5aa96b5ed5183b3d063be133d6f80ab3">_start_loop</a>{0};</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;};</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="class_p_g_a460_html_a4af6ff4fe4d9f28d39ec8c592889a172"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a4af6ff4fe4d9f28d39ec8c592889a172">PGA460::_previous_report_distance</a></div><div class="ttdeci">float _previous_report_distance</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d01/pga460_8h_source.html#l00397">pga460.h:397</a></div></div>
<div class="ttc" id="class_p_g_a460_html_adbd5858fecbd6a614adc72b444912b41"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#adbd5858fecbd6a614adc72b444912b41">PGA460::_port</a></div><div class="ttdeci">char _port[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d01/pga460_8h_source.html#l00394">pga460.h:394</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a01fbc4cdaa7d259c2fc638d0b5a97d68"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a01fbc4cdaa7d259c2fc638d0b5a97d68">PGA460::calculate_object_distance</a></div><div class="ttdeci">float calculate_object_distance(uint16_t time_of_flight)</div><div class="ttdoc">Calculates the distance from the measurement time of flight (time_of_flight) and current temperature...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00203">pga460.cpp:203</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a4924d68b7ece950196b139719227e8bc"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a4924d68b7ece950196b139719227e8bc">PGA460::instantiate</a></div><div class="ttdeci">static PGA460 * instantiate(int argc, char *argv[])</div><div class="ttdoc">Instantiates the pga460 object. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00101">pga460.cpp:101</a></div></div>
<div class="ttc" id="class_p_g_a460_html_aa7fb50bc61360e7199d3fb3607bb8bb1"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#aa7fb50bc61360e7199d3fb3607bb8bb1">PGA460::task_spawn</a></div><div class="ttdeci">static int task_spawn(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00748">pga460.cpp:748</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a58c2504469a78a390f1813b623293d3e"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a58c2504469a78a390f1813b623293d3e">PGA460::read_threshold_registers</a></div><div class="ttdeci">int read_threshold_registers()</div><div class="ttdoc">Reads the threshold registers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00609">pga460.cpp:609</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a71a7887e10c2cd11a61704ed03002bb0"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a71a7887e10c2cd11a61704ed03002bb0">PGA460::close_serial</a></div><div class="ttdeci">int close_serial()</div><div class="ttdoc">Closes the serial port. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00085">pga460.cpp:85</a></div></div>
<div class="ttc" id="class_p_g_a460_html_af681ca38b414903817943fc2746cf9b4"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#af681ca38b414903817943fc2746cf9b4">PGA460::uORB_publish_results</a></div><div class="ttdeci">void uORB_publish_results(const float dist)</div><div class="ttdoc">Commands the device to publish the measurement results to uORB. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00767">pga460.cpp:767</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a3535cf2247d18a68103ae7a94c561a98"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a3535cf2247d18a68103ae7a94c561a98">PGA460::write_register</a></div><div class="ttdeci">int write_register(const uint8_t reg, const uint8_t val)</div><div class="ttdoc">Writes a value to a register. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00879">pga460.cpp:879</a></div></div>
<div class="ttc" id="class_p_g_a460_html_ad7ac2acf0212737ec2396bf228d3e582"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#ad7ac2acf0212737ec2396bf228d3e582">PGA460::_distance_sensor_topic</a></div><div class="ttdeci">orb_advert_t _distance_sensor_topic</div><div class="ttdoc">orb_advert_t uORB advertisement topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d01/pga460_8h_source.html#l00388">pga460.h:388</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a2545d4d61e3ccc91709b46dcd5116bae"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a2545d4d61e3ccc91709b46dcd5116bae">PGA460::collect_results</a></div><div class="ttdeci">uint32_t collect_results()</div><div class="ttdoc">Collects the data in the serial port rx buffer, does math, and publishes the value to uORB...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00164">pga460.cpp:164</a></div></div>
<div class="ttc" id="class_p_g_a460_html_aa994ee16f7ee500d47202c1332fe0930"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#aa994ee16f7ee500d47202c1332fe0930">PGA460::PGA460</a></div><div class="ttdeci">PGA460(const char *port=PGA460_DEFAULT_PORT)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00044">pga460.cpp:44</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a380e300f9163e3c85bc6f52c1d738d37"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a380e300f9163e3c85bc6f52c1d738d37">PGA460::flash_eeprom</a></div><div class="ttdeci">int flash_eeprom()</div><div class="ttdoc">Send the program command to the EEPROM to start the flash process. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00223">pga460.cpp:223</a></div></div>
<div class="ttc" id="pga460_8h_html_a03da1ffc68d95bc3fcb641dbf7123521"><div class="ttname"><a href="../../d5/d01/pga460_8h.html#a03da1ffc68d95bc3fcb641dbf7123521">MODE_SHORT_RANGE</a></div><div class="ttdeci">#define MODE_SHORT_RANGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d01/pga460_8h_source.html#l00069">pga460.h:69</a></div></div>
<div class="ttc" id="class_p_g_a460_html_af7737132b56f05fe3b8c3594e2e2f657"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#af7737132b56f05fe3b8c3594e2e2f657">PGA460::read_eeprom</a></div><div class="ttdeci">int read_eeprom()</div><div class="ttdoc">Reads the EEPROM and checks to see if it matches the default parameters. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00502">pga460.cpp:502</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a0d04e4ba1f4b32608e894af655f181ca"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a0d04e4ba1f4b32608e894af655f181ca">PGA460::print_device_status</a></div><div class="ttdeci">void print_device_status()</div><div class="ttdoc">Reports the diagnostic data from device status registers 1 and 2 if there is anything to report...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00360">pga460.cpp:360</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a3ce1ce526fa252953ee2e237628f8ee5"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a3ce1ce526fa252953ee2e237628f8ee5">PGA460::_ranging_mode</a></div><div class="ttdeci">uint8_t _ranging_mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d01/pga460_8h_source.html#l00406">pga460.h:406</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a6107cd56baa06f1b8225e3d525e56dd6"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a6107cd56baa06f1b8225e3d525e56dd6">PGA460::initialize_device_settings</a></div><div class="ttdeci">int initialize_device_settings()</div><div class="ttdoc">Writes program defined threshold defaults to the register map and checks/writes the EEPROM...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00107">pga460.cpp:107</a></div></div>
<div class="ttc" id="drv__hrt_8h_html"><div class="ttname"><a href="../../d6/d10/drv__hrt_8h.html">drv_hrt.h</a></div><div class="ttdoc">High-resolution timer with callouts and timekeeping. </div></div>
<div class="ttc" id="class_p_g_a460_html_a5aa96b5ed5183b3d063be133d6f80ab3"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a5aa96b5ed5183b3d063be133d6f80ab3">PGA460::_start_loop</a></div><div class="ttdeci">uint64_t _start_loop</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d01/pga460_8h_source.html#l00409">pga460.h:409</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a9d8ba2bd8d9c46a353d3e44a3b5d218a"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a9d8ba2bd8d9c46a353d3e44a3b5d218a">PGA460::request_results</a></div><div class="ttdeci">int request_results()</div><div class="ttdoc">Measurement is read from UART RX buffer and published to the uORB distance sensor topic...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00665">pga460.cpp:665</a></div></div>
<div class="ttc" id="class_p_g_a460_html_abf07d70425d7a8f41a09e6a17d79740b"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#abf07d70425d7a8f41a09e6a17d79740b">PGA460::custom_command</a></div><div class="ttdeci">static int custom_command(int argc, char *argv[])</div><div class="ttdoc">main Main entry point to the module that should be called directly from the module&amp;#39;s main method...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00096">pga460.cpp:96</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a97e921ebda39c3289f4018183b9306d6"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a97e921ebda39c3289f4018183b9306d6">PGA460::initialize_thresholds</a></div><div class="ttdeci">int initialize_thresholds()</div><div class="ttdoc">Writes the user defined paramaters to device register map. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00131">pga460.cpp:131</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a8a4b8ed88640f8789e3da2bb5d1d47f1"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a8a4b8ed88640f8789e3da2bb5d1d47f1">PGA460::open_serial</a></div><div class="ttdeci">int open_serial()</div><div class="ttdoc">Opens the serial port. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00293">pga460.cpp:293</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a7803b58ad2b478cbf03c3a7cb01649d2"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a7803b58ad2b478cbf03c3a7cb01649d2">PGA460::set_range_mode</a></div><div class="ttdeci">uint8_t set_range_mode()</div><div class="ttdoc">Checks the measurement from last report and sets the range distance mode (long range ...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00718">pga460.cpp:718</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a8e4e7002fbeb7cf50a321c0e52c8fcb1"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a8e4e7002fbeb7cf50a321c0e52c8fcb1">PGA460::unlock_eeprom</a></div><div class="ttdeci">int unlock_eeprom()</div><div class="ttdoc">Send the unlock command to the EEPROM to enable reading and writing  not needed w/ bulk write...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00819">pga460.cpp:819</a></div></div>
<div class="ttc" id="class_p_g_a460_html"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html">PGA460</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d01/pga460_8h_source.html#l00210">pga460.h:210</a></div></div>
<div class="ttc" id="dataman_8cpp_html_abe222f6d3581e7920dcad5306cc906a8"><div class="ttname"><a href="../../d6/d47/dataman_8cpp.html#abe222f6d3581e7920dcad5306cc906a8">data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/dataman_8cpp_source.html#l00149">dataman.cpp:149</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a7ab6f1bdaccdf487b09a22dbb22cc103"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a7ab6f1bdaccdf487b09a22dbb22cc103">PGA460::print_usage</a></div><div class="ttdeci">static int print_usage(const char *reason=nullptr)</div><div class="ttdoc">Prints the module usage to the nuttshell console. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00473">pga460.cpp:473</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a1b69dc256ac60cb9dfe6daf01702178f"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a1b69dc256ac60cb9dfe6daf01702178f">PGA460::calc_checksum</a></div><div class="ttdeci">uint8_t calc_checksum(uint8_t *data, const uint8_t size)</div><div class="ttdoc">Calculates the checksum of the transmitted commmand + data. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00057">pga460.cpp:57</a></div></div>
<div class="ttc" id="class_p_g_a460_html_acaf95435de3d8ff545acd6a449e869bf"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#acaf95435de3d8ff545acd6a449e869bf">PGA460::print_status</a></div><div class="ttdeci">int print_status() override</div><div class="ttdoc">Diagnostics - print some basic information about the driver. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00467">pga460.cpp:467</a></div></div>
<div class="ttc" id="class_p_g_a460_html_aaf4739d425f49eb9924c3e681521e076"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#aaf4739d425f49eb9924c3e681521e076">PGA460::take_measurement</a></div><div class="ttdeci">int take_measurement(const uint8_t mode)</div><div class="ttdoc">Commands the device to perform an ultrasonic measurement. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00732">pga460.cpp:732</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a77730479b218f908f0e482d274571660"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a77730479b218f908f0e482d274571660">PGA460::~PGA460</a></div><div class="ttdeci">virtual ~PGA460()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00052">pga460.cpp:52</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a9b847489241b0131397cd7b845609223"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a9b847489241b0131397cd7b845609223">PGA460::_resonant_frequency</a></div><div class="ttdeci">float _resonant_frequency</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d01/pga460_8h_source.html#l00403">pga460.h:403</a></div></div>
<div class="ttc" id="u_o_r_b_8h_html_a8d0cfa5f9ea6427a37057d6cea6dd990"><div class="ttname"><a href="../../db/dd6/u_o_r_b_8h.html#a8d0cfa5f9ea6427a37057d6cea6dd990">orb_advert_t</a></div><div class="ttdeci">__BEGIN_DECLS typedef void * orb_advert_t</div><div class="ttdoc">ORB topic advertiser handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd6/u_o_r_b_8h_source.html#l00134">uORB.h:134</a></div></div>
<div class="ttc" id="class_p_g_a460_html_ab6ef94f2bd6ff1a2621da6e2d59116c8"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#ab6ef94f2bd6ff1a2621da6e2d59116c8">PGA460::_fd</a></div><div class="ttdeci">int _fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d01/pga460_8h_source.html#l00391">pga460.h:391</a></div></div>
<div class="ttc" id="distance__sensor_8h_html"><div class="ttname"><a href="../../db/db6/distance__sensor_8h.html">distance_sensor.h</a></div></div>
<div class="ttc" id="class_p_g_a460_html_aa3cba392c1eacedd0d2b5db944fed810"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#aa3cba392c1eacedd0d2b5db944fed810">PGA460::read_register</a></div><div class="ttdeci">uint8_t read_register(const uint8_t reg)</div><div class="ttdoc">Reads a register. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00563">pga460.cpp:563</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a2769387ceba52f7f6b2d034249bec020"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a2769387ceba52f7f6b2d034249bec020">PGA460::print_diagnostics</a></div><div class="ttdeci">void print_diagnostics(const uint8_t diagnostic_byte)</div><div class="ttdoc">Reports the diagnostic data the diagnostic byte (first byte from slave). </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00412">pga460.cpp:412</a></div></div>
<div class="ttc" id="pga460_8h_html_a6591c42388a943c343e28cae121b90aa"><div class="ttname"><a href="../../d5/d01/pga460_8h.html#a6591c42388a943c343e28cae121b90aa">PGA460_DEFAULT_PORT</a></div><div class="ttdeci">#define PGA460_DEFAULT_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d01/pga460_8h_source.html#l00057">pga460.h:57</a></div></div>
<div class="ttc" id="device_8h_html"><div class="ttname"><a href="../../db/de9/device_8h.html">device.h</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a2f931c5f670484d74892ff8534ba5760"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a2f931c5f670484d74892ff8534ba5760">PGA460::_previous_valid_report_distance</a></div><div class="ttdeci">float _previous_valid_report_distance</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d01/pga460_8h_source.html#l00400">pga460.h:400</a></div></div>
<div class="ttc" id="class_p_g_a460_html_ad7eba50f170fa950b05a50462f3c0d72"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#ad7eba50f170fa950b05a50462f3c0d72">PGA460::write_eeprom</a></div><div class="ttdeci">int write_eeprom()</div><div class="ttdoc">Writes the user defined paramaters to device EEPROM. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00835">pga460.cpp:835</a></div></div>
<div class="ttc" id="vtol__type_8h_html_a1a6b6fb557d8d37d59700faf4e4c9167"><div class="ttname"><a href="../../dd/d64/vtol__type_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a></div><div class="ttdeci">mode</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d64/vtol__type_8h_source.html#l00076">vtol_type.h:76</a></div></div>
<div class="ttc" id="class_p_g_a460_html_ac8cc9815e162ba48a9f0d35582d37534"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#ac8cc9815e162ba48a9f0d35582d37534">PGA460::get_temperature</a></div><div class="ttdeci">float get_temperature()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00238">pga460.cpp:238</a></div></div>
<div class="ttc" id="class_p_g_a460_html_a899ed440e901f63d72bd6f17b337e221"><div class="ttname"><a href="../../d2/de1/class_p_g_a460.html#a899ed440e901f63d72bd6f17b337e221">PGA460::run</a></div><div class="ttdeci">void run() override</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d66/pga460_8cpp_source.html#l00678">pga460.cpp:678</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_c718a368270b13c54d94892d20736f45.html">drivers</a></li><li class="navelem"><a class="el" href="../../dir_8c7e8259a9bdb02056958c977e33eebe.html">distance_sensor</a></li><li class="navelem"><a class="el" href="../../dir_24bc03e1212adad2075a2f6920d8dd37.html">pga460</a></li><li class="navelem"><a class="el" href="../../d5/d01/pga460_8h.html">pga460.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
