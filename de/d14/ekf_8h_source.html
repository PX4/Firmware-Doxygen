<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PX4 Firmware: src/lib/ecl/EKF/ekf.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PX4 Firmware
   </div>
   <div id="projectbrief">PX4 Autopilot Software http://px4.io</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/d14/ekf_8h_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ekf.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../de/d14/ekf_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/****************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *   Copyright (c) 2015 Estimation and Control Library (ECL). All rights reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * are met:</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * 1. Redistributions of source code must retain the above copyright</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer in</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *    the documentation and/or other materials provided with the</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *    distribution.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * 3. Neither the name ECL nor the names of its contributors may be</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *    used to endorse or promote products derived from this software</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *    without specific prior written permission.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * POSSIBILITY OF SUCH DAMAGE.</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> ****************************************************************************/</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * @file ekf.h</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * Class for core functions for ekf attitude and position estimator.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * @author Roman Bast &lt;bapstroman@gmail.com&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * @author Paul Riseborough &lt;p_riseborough@live.com.au&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d77/estimator__interface_8h.html">estimator_interface.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html">   47</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../dc/d66/class_ekf.html">Ekf</a> : <span class="keyword">public</span> <a class="code" href="../../d5/d73/class_estimator_interface.html">EstimatorInterface</a></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="../../dc/d66/class_ekf.html#a20e6be3ed2403b4d675ea33c463b3977">Ekf</a>() = <span class="keywordflow">default</span>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keyword">virtual</span> <a class="code" href="../../dc/d66/class_ekf.html#a882a137a6c9dfe19cfc9df590193c48a">~Ekf</a>() = <span class="keywordflow">default</span>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// initialise variables to sane values (also interface class)</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a69eee7003191b8208c51c5f1453f0ad4">init</a>(uint64_t timestamp) <span class="keyword">override</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">// set the internal states and status to their default value</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a025233b16bb49ce2605fe2b915def8c3">reset</a>(uint64_t timestamp) <span class="keyword">override</span>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a98467e9ac82824344baf0575ed40db5f">resetStatesAndCovariances</a>() <span class="keyword">override</span>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#af3f59b6a4316bd040a3563a17da75a5e">resetStates</a>() <span class="keyword">override</span>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">// should be called every time new data is pushed into the filter</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a174a8ebf58b267ae263cd8a64dc776d6">update</a>() <span class="keyword">override</span>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// gets the innovations of velocity and position measurements</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// 0-2 vel, 3-5 pos</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a7115759ac2c83f44bd39551c01b9879a">get_vel_pos_innov</a>(<span class="keywordtype">float</span> vel_pos_innov[6]) <span class="keyword">override</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// gets the innovations for of the NE auxiliary velocity measurement</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a1cd7296c8b13839ef0deef6ce915cf2e">get_aux_vel_innov</a>(<span class="keywordtype">float</span> aux_vel_innov[2]) <span class="keyword">override</span>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// gets the innovations of the earth magnetic field measurements</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#af2f60243cd2e814edda98265f427f1eb">get_mag_innov</a>(<span class="keywordtype">float</span> mag_innov[3]) <span class="keyword">override</span>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// gets the innovations of the heading measurement</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a82deeeb3662e1eed7fc1d4512cddeb86">get_heading_innov</a>(<span class="keywordtype">float</span> *heading_innov) <span class="keyword">override</span>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// gets the innovation variances of velocity and position measurements</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// 0-2 vel, 3-5 pos</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ade71d2f293de1fc02253c413aae93466">get_vel_pos_innov_var</a>(<span class="keywordtype">float</span> vel_pos_innov_var[6]) <span class="keyword">override</span>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// gets the innovation variances of the earth magnetic field measurements</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ab13c9c5ebc66ce3aa0e53bba73350401">get_mag_innov_var</a>(<span class="keywordtype">float</span> mag_innov_var[3]) <span class="keyword">override</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// gets the innovations of airspeed measurement</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a9022fc92eee770ae6daf527c2bd02894">get_airspeed_innov</a>(<span class="keywordtype">float</span> *airspeed_innov) <span class="keyword">override</span>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// gets the innovation variance of the airspeed measurement</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a28b5096ae41a69d4636e45e3c77b5c42">get_airspeed_innov_var</a>(<span class="keywordtype">float</span> *airspeed_innov_var) <span class="keyword">override</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// gets the innovations of synthetic sideslip measurement</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a31a8f6b2d39fbbc2e5f5bd02ed5088dc">get_beta_innov</a>(<span class="keywordtype">float</span> *beta_innov) <span class="keyword">override</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// gets the innovation variance of the synthetic sideslip measurement</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a64a5f5592204ab8f11fee0bd1ca67cdb">get_beta_innov_var</a>(<span class="keywordtype">float</span> *beta_innov_var) <span class="keyword">override</span>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// gets the innovation variance of the heading measurement</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ab4e4ef92b7280561cacde3a33c6eed41">get_heading_innov_var</a>(<span class="keywordtype">float</span> *heading_innov_var) <span class="keyword">override</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// gets the innovation variance of the flow measurement</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#afae4a156deb83b64743ecfd1783585b1">get_flow_innov_var</a>(<span class="keywordtype">float</span> flow_innov_var[2]) <span class="keyword">override</span>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// gets the innovation of the flow measurement</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a644c86cbd1554bd1f84ece2ea0eb528a">get_flow_innov</a>(<span class="keywordtype">float</span> flow_innov[2]) <span class="keyword">override</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// gets the innovation variance of the drag specific force measurement</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a58136f4f35684f59a941d560e12cd4cd">get_drag_innov_var</a>(<span class="keywordtype">float</span> drag_innov_var[2]) <span class="keyword">override</span>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// gets the innovation of the drag specific force measurement</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aeaea43a3548eb98c18eb340895d030fc">get_drag_innov</a>(<span class="keywordtype">float</span> drag_innov[2]) <span class="keyword">override</span>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a05594e1cc45f8d977f99358ca5336370">getHaglInnovVar</a>(<span class="keywordtype">float</span> *hagl_innov_var) <span class="keyword">override</span>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a6f6f48aed663e001288c80189f5cb5b4">getHaglInnov</a>(<span class="keywordtype">float</span> *hagl_innov) <span class="keyword">override</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// get the state vector at the delayed time horizon</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a154155cff71c61b399aef0e63aacff31">get_state_delayed</a>(<span class="keywordtype">float</span> *<a class="code" href="../../d3/dc0/_arm_authorization_8cpp.html#af06c723c3b5220b3ef9839275a0cf051">state</a>) <span class="keyword">override</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// get the wind velocity in m/s</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ad45e69a060a10b6e376155f69001c73c">get_wind_velocity</a>(<span class="keywordtype">float</span> *wind) <span class="keyword">override</span>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// get the wind velocity var</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a60d78649f1a0734414b999367a09505d">get_wind_velocity_var</a>(<span class="keywordtype">float</span> *wind_var) <span class="keyword">override</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// get the true airspeed in m/s</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a6b0a16c7c95041154060d34e560f90df">get_true_airspeed</a>(<span class="keywordtype">float</span> *tas) <span class="keyword">override</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">// get the full covariance matrix</span></div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a73da8472a390f8a3a497e16479bc10d0">  129</a></span>&#160;    <a class="code" href="../../d4/d6e/classmatrix_1_1_square_matrix.html">matrix::SquareMatrix&lt;float, 24&gt;</a> <a class="code" href="../../dc/d66/class_ekf.html#a73da8472a390f8a3a497e16479bc10d0">covariances</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d4/d6e/classmatrix_1_1_square_matrix.html">matrix::SquareMatrix&lt;float, _k_num_states&gt;</a>(<a class="code" href="../../dc/d66/class_ekf.html#a21e25b3a6efdb7ecaf04e4e3ebe53869">P</a>); }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// get the diagonal elements of the covariance matrix</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a0f1b9f78819c1ab5ed4cdd5dd2e040b5">  132</a></span>&#160;    <a class="code" href="../../d1/d71/classmatrix_1_1_vector.html">matrix::Vector&lt;float, 24&gt;</a> <a class="code" href="../../dc/d66/class_ekf.html#a0f1b9f78819c1ab5ed4cdd5dd2e040b5">covariances_diagonal</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../dc/d66/class_ekf.html#a73da8472a390f8a3a497e16479bc10d0">covariances</a>().diag(); }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// get the orientation (quaterion) covariances</span></div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a192e2511156f82005e55e3f62f38eb2f">  135</a></span>&#160;    <a class="code" href="../../d4/d6e/classmatrix_1_1_square_matrix.html">matrix::SquareMatrix&lt;float, 4&gt;</a> <a class="code" href="../../dc/d66/class_ekf.html#a192e2511156f82005e55e3f62f38eb2f">orientation_covariances</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../dc/d66/class_ekf.html#a73da8472a390f8a3a497e16479bc10d0">covariances</a>().slice&lt;4, 4&gt;(0, 0); }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// get the linear velocity covariances</span></div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a8f9585dd541a53e59a8a89ce1ce9a250">  138</a></span>&#160;    <a class="code" href="../../d4/d6e/classmatrix_1_1_square_matrix.html">matrix::SquareMatrix&lt;float, 3&gt;</a> <a class="code" href="../../dc/d66/class_ekf.html#a8f9585dd541a53e59a8a89ce1ce9a250">velocity_covariances</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../dc/d66/class_ekf.html#a73da8472a390f8a3a497e16479bc10d0">covariances</a>().slice&lt;3, 3&gt;(4, 4); }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// get the position covariances</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a0d00f1af5ef0a7c03050ffe0d4d6f7be">  141</a></span>&#160;    <a class="code" href="../../d4/d6e/classmatrix_1_1_square_matrix.html">matrix::SquareMatrix&lt;float, 3&gt;</a> <a class="code" href="../../dc/d66/class_ekf.html#a0d00f1af5ef0a7c03050ffe0d4d6f7be">position_covariances</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../dc/d66/class_ekf.html#a73da8472a390f8a3a497e16479bc10d0">covariances</a>().slice&lt;3, 3&gt;(7, 7); }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// ask estimator for sensor data collection decision and do any preprocessing if required, returns true if not defined</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a59f137c1049591a6b2c74c2446c71475">collect_gps</a>(<span class="keyword">const</span> <a class="code" href="../../da/d7e/structestimator_1_1gps__message.html">gps_message</a> &amp;<a class="code" href="../../d9/dd2/crsf_8cpp.html#aba4ef90cc13b3b968c2b833c072476a8a11648e4e66e7ed6a86cb7f1d0cf604fe">gps</a>) <span class="keyword">override</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#add9f94883d2738c2fdeee5d2a12521fc">collect_imu</a>(<span class="keyword">const</span> <a class="code" href="../../d4/d03/structestimator_1_1imu_sample.html">imuSample</a> &amp;imu) <span class="keyword">override</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">// get the ekf WGS-84 origin position and height and the system time it was last set</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// return true if the origin is valid</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#af8c72fef6bd53ba62d8b49578be035e6">get_ekf_origin</a>(uint64_t *origin_time, <a class="code" href="../../de/d7e/structmap__projection__reference__s.html">map_projection_reference_s</a> *origin_pos, <span class="keywordtype">float</span> *origin_alt) <span class="keyword">override</span>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// get the 1-sigma horizontal and vertical position uncertainty of the ekf WGS-84 position</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#abee756b6f0a6d25a6b9870b1f8949fda">get_ekf_gpos_accuracy</a>(<span class="keywordtype">float</span> *ekf_eph, <span class="keywordtype">float</span> *ekf_epv) <span class="keyword">override</span>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// get the 1-sigma horizontal and vertical position uncertainty of the ekf local position</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ac2f3572994b79118429989ba1ffe305c">get_ekf_lpos_accuracy</a>(<span class="keywordtype">float</span> *ekf_eph, <span class="keywordtype">float</span> *ekf_epv) <span class="keyword">override</span>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// get the 1-sigma horizontal and vertical velocity uncertainty</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a50773b1a5047bbe92274eda9cb3b79ba">get_ekf_vel_accuracy</a>(<span class="keywordtype">float</span> *ekf_evh, <span class="keywordtype">float</span> *ekf_evv) <span class="keyword">override</span>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// get the vehicle control limits required by the estimator to keep within sensor limitations</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aeee1ded47822f0a25038a49cf8de1ebf">get_ekf_ctrl_limits</a>(<span class="keywordtype">float</span> *vxy_max, <span class="keywordtype">float</span> *vz_max, <span class="keywordtype">float</span> *hagl_min, <span class="keywordtype">float</span> *hagl_max) <span class="keyword">override</span>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">    Reset all IMU bias states and covariances to initial alignment values.</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">    Use when the IMU sensor has changed.</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">    Returns true if reset performed, false if rejected due to less than 10 seconds lapsed since last reset.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#af0f6c95caa2f0bf5cf7e56b658f88230">reset_imu_bias</a>() <span class="keyword">override</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a6db4632334ca657f8cb042641d96a9c5">get_vel_var</a>(<a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> &amp;vel_var) <span class="keyword">override</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a6eefdb491c045a48690a637dceafe041">get_pos_var</a>(<a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> &amp;pos_var) <span class="keyword">override</span>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// return an array containing the output predictor angular, velocity and position tracking</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// error magnitudes (rad), (m/sec), (m)</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aa6284f74a392c2b1e1a8293b71911118">get_output_tracking_error</a>(<span class="keywordtype">float</span> error[3]) <span class="keyword">override</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">    Returns  following IMU vibration metrics in the following array locations</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">    0 : Gyro delta angle coning metric = filtered length of (delta_angle x prev_delta_angle)</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">    1 : Gyro high frequency vibe = filtered length of (delta_angle - prev_delta_angle)</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">    2 : Accel high frequency vibe = filtered length of (delta_velocity - prev_delta_velocity)</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aafc973511c85e2645fbb71c48d67bd0b">get_imu_vibe_metrics</a>(<span class="keywordtype">float</span> vibe[3]) <span class="keyword">override</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">    First argument returns GPS drift  metrics in the following array locations</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">    0 : Horizontal position drift rate (m/s)</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">    1 : Vertical position drift rate (m/s)</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">    2 : Filtered horizontal velocity (m/s)</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">    Second argument returns true when IMU movement is blocking the drift calculation</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">    Function returns true if the metrics have been updated and not returned previously by this function</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a24b2ca7a7cc4aac13a651324e1a82a39">get_gps_drift_metrics</a>(<span class="keywordtype">float</span> drift[3], <span class="keywordtype">bool</span> *blocked) <span class="keyword">override</span>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">// return true if the global position estimate is valid</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a413ed6bcf2f318fffc624672360d6907">global_position_is_valid</a>() <span class="keyword">override</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">// check if the EKF is dead reckoning horizontal velocity using inertial data only</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a074bf8fe22c02e2a06ff16950d894964">update_deadreckoning_status</a>();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#aa4df90e91dd289376fb0935c9facd7e2">isTerrainEstimateValid</a>() <span class="keyword">const override</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#abeb8be4c6b1348e89d14a43b3db3c075">updateTerrainValidity</a>();</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// get the estimated terrain vertical position relative to the NED origin</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a6b0b68ac1364f0bfe5bb2b3055666259">getTerrainVertPos</a>(<span class="keywordtype">float</span> *ret) <span class="keyword">override</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// get the terrain variance</span></div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#aeb821726b265b4f45fb34e6256e0284b">  211</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#aeb821726b265b4f45fb34e6256e0284b">get_terrain_var</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../dc/d66/class_ekf.html#a562a5313172ecf727fcced923a07528f">_terrain_var</a>; }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// get the accelerometer bias in m/s/s</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a6d4de32b2cac9be19d251ac1918d924a">get_accel_bias</a>(<span class="keywordtype">float</span> bias[3]) <span class="keyword">override</span>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// get the gyroscope bias in rad/s</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a130cd4a116ce168764865b2436cd1465">get_gyro_bias</a>(<span class="keywordtype">float</span> bias[3]) <span class="keyword">override</span>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// get GPS check status</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a5ff41038aa3facab845a8980f96ddeba">get_gps_check_status</a>(uint16_t *val) <span class="keyword">override</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">// return the amount the local vertical position changed in the last reset and the number of reset events</span></div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#aea152a4b7b6217827883f8511a26eec3">  223</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aea152a4b7b6217827883f8511a26eec3">get_posD_reset</a>(<span class="keywordtype">float</span> *delta, uint8_t *<a class="code" href="../../d4/d6d/safety_8c.html#a57451d202e70f5eafc93a3cc5e6c0c6e">counter</a>)<span class="keyword"> override </span>{*delta = <a class="code" href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">_state_reset_status</a>.posD_change; *counter = <a class="code" href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">_state_reset_status</a>.posD_counter;}</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// return the amount the local vertical velocity changed in the last reset and the number of reset events</span></div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a49e7059aa68090514aa305891f4c5abc">  226</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a49e7059aa68090514aa305891f4c5abc">get_velD_reset</a>(<span class="keywordtype">float</span> *delta, uint8_t *<a class="code" href="../../d4/d6d/safety_8c.html#a57451d202e70f5eafc93a3cc5e6c0c6e">counter</a>)<span class="keyword"> override </span>{*delta = <a class="code" href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">_state_reset_status</a>.velD_change; *counter = <a class="code" href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">_state_reset_status</a>.velD_counter;}</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// return the amount the local horizontal position changed in the last reset and the number of reset events</span></div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a9edd0b757c650961a312c10324639edc">  229</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a9edd0b757c650961a312c10324639edc">get_posNE_reset</a>(<span class="keywordtype">float</span> delta[2], uint8_t *<a class="code" href="../../d4/d6d/safety_8c.html#a57451d202e70f5eafc93a3cc5e6c0c6e">counter</a>)<span class="keyword"> override</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">_state_reset_status</a>.posNE_change.copyTo(delta);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        *counter = <a class="code" href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">_state_reset_status</a>.posNE_counter;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// return the amount the local horizontal velocity changed in the last reset and the number of reset events</span></div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a3a8768f349ec11c62d5fb33d5d2dc9f4">  236</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a3a8768f349ec11c62d5fb33d5d2dc9f4">get_velNE_reset</a>(<span class="keywordtype">float</span> delta[2], uint8_t *<a class="code" href="../../d4/d6d/safety_8c.html#a57451d202e70f5eafc93a3cc5e6c0c6e">counter</a>)<span class="keyword"> override</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="code" href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">_state_reset_status</a>.velNE_change.copyTo(delta);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        *counter = <a class="code" href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">_state_reset_status</a>.velNE_counter;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// return the amount the quaternion has changed in the last reset and the number of reset events</span></div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#aa39b72030ae0b9b957f337379f6cee6d">  243</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aa39b72030ae0b9b957f337379f6cee6d">get_quat_reset</a>(<span class="keywordtype">float</span> delta_quat[4], uint8_t *<a class="code" href="../../d4/d6d/safety_8c.html#a57451d202e70f5eafc93a3cc5e6c0c6e">counter</a>)<span class="keyword"> override</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">_state_reset_status</a>.quat_change.copyTo(delta_quat);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        *counter = <a class="code" href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">_state_reset_status</a>.quat_counter;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// get EKF innovation consistency check status information comprising of:</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// status - a bitmask integer containing the pass/fail status for each EKF measurement innovation consistency check</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// Innovation Test Ratios - these are the ratio of the innovation to the acceptance threshold.</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// A value &gt; 1 indicates that the sensor measurement has exceeded the maximum acceptable level and has been rejected by the EKF</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// Where a measurement type is a vector quantity, eg magnetometer, GPS position, etc, the maximum value is returned.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a66fce94131503857e8a718c2cc4b3373">get_innovation_test_status</a>(uint16_t *<a class="code" href="../../da/d73/_commander_8cpp.html#a707b22601c0c46541a855d5320fb60e4">status</a>, <span class="keywordtype">float</span> *mag, <span class="keywordtype">float</span> *vel, <span class="keywordtype">float</span> *pos, <span class="keywordtype">float</span> *hgt, <span class="keywordtype">float</span> *tas, <span class="keywordtype">float</span> *hagl, <span class="keywordtype">float</span> *beta) <span class="keyword">override</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// return a bitmask integer that describes which state estimates can be used for flight control</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a09681091370a154802f1eed4a169aad1">get_ekf_soln_status</a>(uint16_t *status) <span class="keyword">override</span>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// return the quaternion defining the rotation from the External Vision to the EKF reference frame</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a1b4041650288e65d2f6d92eb4bfb2e7c">get_ev2ekf_quaternion</a>(<span class="keywordtype">float</span> *quat) <span class="keyword">override</span>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// use the latest IMU data at the current time horizon.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="../../d0/de4/namespacematrix.html#a46a2a9f5c092d90cf33d4e0cac3f3593">Quatf</a> <a class="code" href="../../dc/d66/class_ekf.html#aa0da930e5979a051b2336c4e464af5ec">calculate_quaternion</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// set minimum continuous period without GPS fail required to mark a healthy GPS status</span></div><div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#afb2792627f6e81265ba5d5446130e40a">  266</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#afb2792627f6e81265ba5d5446130e40a">set_min_required_gps_health_time</a>(uint32_t time_us) { <a class="code" href="../../dc/d66/class_ekf.html#a6fc55317d849254e304c4aad73345506">_min_gps_health_time_us</a> = time_us; }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a0a50b20622b267e7989a95901f54870b">  270</a></span>&#160;    <span class="keyword">static</span> constexpr uint8_t <a class="code" href="../../dc/d66/class_ekf.html#a0a50b20622b267e7989a95901f54870b">_k_num_states</a>{24};     <span class="comment">///&lt; number of EKF states</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keyword">struct </span>{</div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ac9f30b0c61c2624c0124866d30981bdc">  273</a></span>&#160;        uint8_t <a class="code" href="../../dc/d66/class_ekf.html#ac9f30b0c61c2624c0124866d30981bdc">velNE_counter</a>;  <span class="comment">///&lt; number of horizontal position reset events (allow to wrap if count exceeds 255)</span></div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ab543155fc15c91b3cc02e4acaf1341f8">  274</a></span>&#160;<span class="comment"></span>        uint8_t <a class="code" href="../../dc/d66/class_ekf.html#ab543155fc15c91b3cc02e4acaf1341f8">velD_counter</a>;   <span class="comment">///&lt; number of vertical velocity reset events (allow to wrap if count exceeds 255)</span></div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#aec0b89a9fced97190f4c760a0b3981ae">  275</a></span>&#160;<span class="comment"></span>        uint8_t <a class="code" href="../../dc/d66/class_ekf.html#aec0b89a9fced97190f4c760a0b3981ae">posNE_counter</a>;  <span class="comment">///&lt; number of horizontal position reset events (allow to wrap if count exceeds 255)</span></div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#adecec470744c46a30400b7f0c22731ab">  276</a></span>&#160;<span class="comment"></span>        uint8_t <a class="code" href="../../dc/d66/class_ekf.html#adecec470744c46a30400b7f0c22731ab">posD_counter</a>;   <span class="comment">///&lt; number of vertical position reset events (allow to wrap if count exceeds 255)</span></div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#af83f2120b1bbbf39464a871f9a147df7">  277</a></span>&#160;<span class="comment"></span>        uint8_t <a class="code" href="../../dc/d66/class_ekf.html#af83f2120b1bbbf39464a871f9a147df7">quat_counter</a>;   <span class="comment">///&lt; number of quaternion reset events (allow to wrap if count exceeds 255)</span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a9f0aa45ebf4e8a001e901fd895a49613">  278</a></span>&#160;<span class="comment"></span>        <a class="code" href="../../d0/de4/namespacematrix.html#a1b583711c91bf5c9f5b515e167edce90">Vector2f</a> <a class="code" href="../../dc/d66/class_ekf.html#a9f0aa45ebf4e8a001e901fd895a49613">velNE_change</a>;  <span class="comment">///&lt; North East velocity change due to last reset (m)</span></div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a0aa7c5efd6c432fd43d59ed0db74ffaa">  279</a></span>&#160;<span class="comment"></span>        <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a0aa7c5efd6c432fd43d59ed0db74ffaa">velD_change</a>;  <span class="comment">///&lt; Down velocity change due to last reset (m/sec)</span></div><div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ac30a1e5acf2d34f872dff5f35073305e">  280</a></span>&#160;<span class="comment"></span>        <a class="code" href="../../d0/de4/namespacematrix.html#a1b583711c91bf5c9f5b515e167edce90">Vector2f</a> <a class="code" href="../../dc/d66/class_ekf.html#ac30a1e5acf2d34f872dff5f35073305e">posNE_change</a>;  <span class="comment">///&lt; North, East position change due to last reset (m)</span></div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a2d3212673e6d04d6c8e7bb50254428ef">  281</a></span>&#160;<span class="comment"></span>        <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a2d3212673e6d04d6c8e7bb50254428ef">posD_change</a>;  <span class="comment">///&lt; Down position change due to last reset (m)</span></div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a72581f4361d22bc18f469cd66fe13fff">  282</a></span>&#160;<span class="comment"></span>        <a class="code" href="../../d0/de4/namespacematrix.html#a46a2a9f5c092d90cf33d4e0cac3f3593">Quatf</a> <a class="code" href="../../dc/d66/class_ekf.html#a72581f4361d22bc18f469cd66fe13fff">quat_change</a>;  <span class="comment">///&lt; quaternion delta due to last reset - multiply pre-reset quaternion by this to get post-reset quaternion</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"></span>    } <a class="code" href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">_state_reset_status</a>{};    <span class="comment">///&lt; reset event monitoring structure containing velocity, position, height and yaw reset information</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a370143a5adf9bb617c03a85855622259">  285</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a370143a5adf9bb617c03a85855622259">_dt_ekf_avg</a>{<a class="code" href="../../d5/d73/class_estimator_interface.html#a784f8cb858c7842492298da42b89c673">FILTER_UPDATE_PERIOD_S</a>}; <span class="comment">///&lt; average update rate of the ekf</span></div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#af22a997424d81abaaaf7be408bb5327b">  286</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#af22a997424d81abaaaf7be408bb5327b">_dt_update</a>{0.01f}; <span class="comment">///&lt; delta time since last ekf update. This time can be used for filters which run at the same rate as the Ekf::update() function. (sec)</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#acd779b7801421d846f714072ee78bbd6">  288</a></span>&#160;    <a class="code" href="../../de/d11/structestimator_1_1state_sample.html">stateSample</a> <a class="code" href="../../dc/d66/class_ekf.html#acd779b7801421d846f714072ee78bbd6">_state</a>{};       <span class="comment">///&lt; state struct of the ekf running at the delayed time horizon</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a32cf3d40f85ac21ef2b31808f2b64166">  290</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a32cf3d40f85ac21ef2b31808f2b64166">_filter_initialised</a>{<span class="keyword">false</span>};    <span class="comment">///&lt; true when the EKF sttes and covariances been initialised</span></div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ae0c709941cf63682abdce8599ed40114">  291</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#ae0c709941cf63682abdce8599ed40114">_earth_rate_initialised</a>{<span class="keyword">false</span>};    <span class="comment">///&lt; true when we know the earth rotatin rate (requires GPS)</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ad271d2ac4617391daae7f2727fbbd60e">  293</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#ad271d2ac4617391daae7f2727fbbd60e">_fuse_height</a>{<span class="keyword">false</span>};   <span class="comment">///&lt; true when baro height data should be fused</span></div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a96990c59ceddd44ba217fcc4c577c43e">  294</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a96990c59ceddd44ba217fcc4c577c43e">_fuse_pos</a>{<span class="keyword">false</span>};      <span class="comment">///&lt; true when gps position data should be fused</span></div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#aab6b0981c7810a13997a5b80876c21a8">  295</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#aab6b0981c7810a13997a5b80876c21a8">_fuse_hor_vel</a>{<span class="keyword">false</span>};  <span class="comment">///&lt; true when gps horizontal velocity measurement should be fused</span></div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#aadb9b481c324a568c7ad7247ece0635f">  296</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#aadb9b481c324a568c7ad7247ece0635f">_fuse_vert_vel</a>{<span class="keyword">false</span>}; <span class="comment">///&lt; true when gps vertical velocity measurement should be fused</span></div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ad11324e8afcb4d6a0452d925949c3e34">  297</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#ad11324e8afcb4d6a0452d925949c3e34">_fuse_hor_vel_aux</a>{<span class="keyword">false</span>};  <span class="comment">///&lt; true when auxiliary horizontal velocity measurement should be fused</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ac772808c6db439a56d31c4f9d422a9d3">  299</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ac772808c6db439a56d31c4f9d422a9d3">_posObsNoiseNE</a>{0.0f};     <span class="comment">///&lt; 1-STD observation noise used for the fusion of NE position data (m)</span></div><div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a9777c6b014ac1dda749ba7582589e766">  300</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a9777c6b014ac1dda749ba7582589e766">_posInnovGateNE</a>{1.0f};        <span class="comment">///&lt; Number of standard deviations used for the NE position fusion innovation consistency check</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a3181feb24523c531dc723511f3c1bc4b">  302</a></span>&#160;    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#a3181feb24523c531dc723511f3c1bc4b">_velObsVarNED</a>;     <span class="comment">///&lt; 1-STD observation noise variance used for the fusion of NED velocity data (m/sec)**2</span></div><div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ab8d70d06300fd6bb22fc2d4ee4aa03d5">  303</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ab8d70d06300fd6bb22fc2d4ee4aa03d5">_hvelInnovGate</a>{1.0f}; <span class="comment">///&lt; Number of standard deviations used for the horizontal velocity fusion innovation consistency check</span></div><div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#abc60e8d0d0c95e532ae58c83f17e7340">  304</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#abc60e8d0d0c95e532ae58c83f17e7340">_vvelInnovGate</a>{1.0f}; <span class="comment">///&lt; Number of standard deviations used for the vertical velocity fusion innovation consistency check</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">// variables used when position data is being fused using a relative position odometry model</span></div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a74a3e3a8ac14ae14d05d20b925e4c6e7">  307</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a74a3e3a8ac14ae14d05d20b925e4c6e7">_fuse_hpos_as_odom</a>{<span class="keyword">false</span>};     <span class="comment">///&lt; true when the NE position data is being fused using an odometry assumption</span></div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ae7c135e78e21755b4db631d350949033">  308</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#ae7c135e78e21755b4db631d350949033">_pos_meas_prev</a>;        <span class="comment">///&lt; previous value of NED position measurement fused using odometry assumption (m)</span></div><div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a07e33d3291ac3ed2b7a35b2b62e0c133">  309</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a1b583711c91bf5c9f5b515e167edce90">Vector2f</a> <a class="code" href="../../dc/d66/class_ekf.html#a07e33d3291ac3ed2b7a35b2b62e0c133">_hpos_pred_prev</a>;       <span class="comment">///&lt; previous value of NE position state used by odometry fusion (m)</span></div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ab8cae80815f6d360ff45eadc87400f22">  310</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#ab8cae80815f6d360ff45eadc87400f22">_hpos_prev_available</a>{<span class="keyword">false</span>};   <span class="comment">///&lt; true when previous values of the estimate and measurement are available for use</span></div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ae82204293e9423bbb5e6e58c8d40dc5f">  311</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#ae82204293e9423bbb5e6e58c8d40dc5f">_ev_rot_vec_filt</a>;      <span class="comment">///&lt; filtered rotation vector defining the rotation EV to EKF reference, initiliazied to zero rotation  (rad)</span></div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a92dfb71303e5f9b59869fc73603c67d8">  312</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a173f74e26b3f3c817ed4bfa86fc1e8e0">Dcmf</a> <a class="code" href="../../dc/d66/class_ekf.html#a92dfb71303e5f9b59869fc73603c67d8">_ev_rot_mat</a>;           <span class="comment">///&lt; transformation matrix that rotates observations from the EV to the EKF navigation frame, initialized with Identity</span></div><div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a18c3d06267632079171bf22649dd343e">  313</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a18c3d06267632079171bf22649dd343e">_ev_rot_last_time_us</a>{0};   <span class="comment">///&lt; previous time that the calculation of the EV to EKF rotation matrix was updated (uSec)</span></div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a17ab887585a9635fe818a9a016b5349b">  314</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a17ab887585a9635fe818a9a016b5349b">_ev_rot_mat_initialised</a>{0};    <span class="comment">///&lt; _ev_rot_mat should only be initialised once in the beginning through the reset function</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// booleans true when fresh sensor data is available at the fusion time horizon</span></div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a1b9045ddff0f8b0d8a695e1648198f52">  317</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a1b9045ddff0f8b0d8a695e1648198f52">_gps_data_ready</a>{<span class="keyword">false</span>};    <span class="comment">///&lt; true when new GPS data has fallen behind the fusion time horizon and is available to be fused</span></div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#aa243905f7a54a626f293cc031cc44687">  318</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#aa243905f7a54a626f293cc031cc44687">_mag_data_ready</a>{<span class="keyword">false</span>};    <span class="comment">///&lt; true when new magnetometer data has fallen behind the fusion time horizon and is available to be fused</span></div><div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a6499365a27be64a6c4799b7d2390c3a5">  319</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a6499365a27be64a6c4799b7d2390c3a5">_baro_data_ready</a>{<span class="keyword">false</span>};   <span class="comment">///&lt; true when new baro height data has fallen behind the fusion time horizon and is available to be fused</span></div><div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a16c805d4e24fd8fe7f7391cdc3f34447">  320</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a16c805d4e24fd8fe7f7391cdc3f34447">_range_data_ready</a>{<span class="keyword">false</span>};  <span class="comment">///&lt; true when new range finder data has fallen behind the fusion time horizon and is available to be fused</span></div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a397509ec6183c78faa883b6fe1d6c62b">  321</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a397509ec6183c78faa883b6fe1d6c62b">_flow_data_ready</a>{<span class="keyword">false</span>};   <span class="comment">///&lt; true when the leading edge of the optical flow integration period has fallen behind the fusion time horizon</span></div><div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#aa50b3a1a76ae9dc6def6f818becc356c">  322</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#aa50b3a1a76ae9dc6def6f818becc356c">_ev_data_ready</a>{<span class="keyword">false</span>}; <span class="comment">///&lt; true when new external vision system data has fallen behind the fusion time horizon and is available to be fused</span></div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a1bf56ed84bdc1938d25e8abfb206c035">  323</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a1bf56ed84bdc1938d25e8abfb206c035">_tas_data_ready</a>{<span class="keyword">false</span>};    <span class="comment">///&lt; true when new true airspeed data has fallen behind the fusion time horizon and is available to be fused</span></div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a0b437744d93a2c98c04b940e1a971567">  324</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a0b437744d93a2c98c04b940e1a971567">_flow_for_terrain_data_ready</a>{<span class="keyword">false</span>}; <span class="comment">/// same flag as &quot;_flow_data_ready&quot; but used for separate terrain estimator</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a559e33df39de1d4cc4da05c84aec4090">  326</a></span>&#160;    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a559e33df39de1d4cc4da05c84aec4090">_time_last_fake_gps</a>{0};    <span class="comment">///&lt; last time we faked GPS position measurements to constrain tilt errors during operation without external aiding (uSec)</span></div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a452fe41b96bfe5e6ae7f7daaa913af52">  327</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a452fe41b96bfe5e6ae7f7daaa913af52">_time_ins_deadreckon_start</a>{0}; <span class="comment">///&lt; amount of time we have been doing inertial only deadreckoning (uSec)</span></div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a11105d600c13d5792cafa859b71106ae">  328</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a11105d600c13d5792cafa859b71106ae">_using_synthetic_position</a>{<span class="keyword">false</span>};  <span class="comment">///&lt; true if we are using a synthetic position to constrain drift</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#af2d3f767e5ac4c144b74983b10efab1a">  330</a></span>&#160;    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#af2d3f767e5ac4c144b74983b10efab1a">_time_last_pos_fuse</a>{0};    <span class="comment">///&lt; time the last fusion of horizontal position measurements was performed (uSec)</span></div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a9b83133d2d7daa33d044c3f2c2af6272">  331</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a9b83133d2d7daa33d044c3f2c2af6272">_time_last_delpos_fuse</a>{0}; <span class="comment">///&lt; time the last fusion of incremental horizontal position measurements was performed (uSec)</span></div><div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a3773a8a0965d3e838bdf3959a0b7ba62">  332</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a3773a8a0965d3e838bdf3959a0b7ba62">_time_last_vel_fuse</a>{0};    <span class="comment">///&lt; time the last fusion of velocity measurements was performed (uSec)</span></div><div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#abce5be2bb91286381af9c86e7a801ea1">  333</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#abce5be2bb91286381af9c86e7a801ea1">_time_last_hgt_fuse</a>{0};    <span class="comment">///&lt; time the last fusion of height measurements was performed (uSec)</span></div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a65fd9532bbb45027c99a0d36a460feee">  334</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a65fd9532bbb45027c99a0d36a460feee">_time_last_of_fuse</a>{0};     <span class="comment">///&lt; time the last fusion of optical flow measurements were performed (uSec)</span></div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a35c74f0818c25033a9d1050fece5bbe0">  335</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a35c74f0818c25033a9d1050fece5bbe0">_time_last_arsp_fuse</a>{0};   <span class="comment">///&lt; time the last fusion of airspeed measurements were performed (uSec)</span></div><div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a9671b9635e851d44eb1faf56198c4edd">  336</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a9671b9635e851d44eb1faf56198c4edd">_time_last_beta_fuse</a>{0};   <span class="comment">///&lt; time the last fusion of synthetic sideslip measurements were performed (uSec)</span></div><div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#afef49e9a605195c4233469f9f5954eb7">  337</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#afef49e9a605195c4233469f9f5954eb7">_time_last_rng_ready</a>{0};   <span class="comment">///&lt; time the last range finder measurement was ready (uSec)</span></div><div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ab737c1a3cc1190bcffa0f9223799829f">  338</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a1b583711c91bf5c9f5b515e167edce90">Vector2f</a> <a class="code" href="../../dc/d66/class_ekf.html#ab737c1a3cc1190bcffa0f9223799829f">_last_known_posNE</a>;     <span class="comment">///&lt; last known local NE position vector (m)</span></div><div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a47019547f568a177737a552ac1f209ac">  339</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a47019547f568a177737a552ac1f209ac">_imu_collection_time_adj</a>{0.0f};   <span class="comment">///&lt; the amount of time the IMU collection needs to be advanced to meet the target set by FILTER_UPDATE_PERIOD_MS (sec)</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a39aeee8c1888f7178351cda487f1adcf">  341</a></span>&#160;    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a39aeee8c1888f7178351cda487f1adcf">_time_acc_bias_check</a>{0};   <span class="comment">///&lt; last time the  accel bias check passed (uSec)</span></div><div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#af32f79b3c4fed49cba4b86a69e431ed9">  342</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#af32f79b3c4fed49cba4b86a69e431ed9">_delta_time_baro_us</a>{0};    <span class="comment">///&lt; delta time between two consecutive delayed baro samples from the buffer (uSec)</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a28f4cac591729e574ac2b421bb8d4d5c">  344</a></span>&#160;    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a28f4cac591729e574ac2b421bb8d4d5c">_last_imu_bias_cov_reset_us</a>{0};    <span class="comment">///&lt; time the last reset of IMU delta angle and velocity state covariances was performed (uSec)</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a462cf49b9f075298880e046b5fbe08fc">  346</a></span>&#160;    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#a462cf49b9f075298880e046b5fbe08fc">_earth_rate_NED</a>;   <span class="comment">///&lt; earth rotation vector (NED) in rad/s</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a2894300dfc5ee0a6f1853ff9428814fa">  348</a></span>&#160;    <a class="code" href="../../d0/de4/namespacematrix.html#a173f74e26b3f3c817ed4bfa86fc1e8e0">Dcmf</a> <a class="code" href="../../dc/d66/class_ekf.html#a2894300dfc5ee0a6f1853ff9428814fa">_R_to_earth</a>;   <span class="comment">///&lt; transformation matrix from body frame to earth frame from last EKF prediction</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// used by magnetometer fusion mode selection</span></div><div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#afb41649747b69caedaa32d4c3d414342">  351</a></span>&#160;    <a class="code" href="../../d0/de4/namespacematrix.html#a1b583711c91bf5c9f5b515e167edce90">Vector2f</a> <a class="code" href="../../dc/d66/class_ekf.html#afb41649747b69caedaa32d4c3d414342">_accel_lpf_NE</a>;         <span class="comment">///&lt; Low pass filtered horizontal earth frame acceleration (m/sec**2)</span></div><div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a2821776b166e78871ef9f7eac8838457">  352</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a2821776b166e78871ef9f7eac8838457">_yaw_delta_ef</a>{0.0f};      <span class="comment">///&lt; Recent change in yaw angle measured about the earth frame D axis (rad)</span></div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a811d13238bb8d2fd5d1e669e443a55bc">  353</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a811d13238bb8d2fd5d1e669e443a55bc">_yaw_rate_lpf_ef</a>{0.0f};       <span class="comment">///&lt; Filtered angular rate about earth frame D axis (rad/sec)</span></div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a4946eb7ab38bacee07201925350f1a29">  354</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a4946eb7ab38bacee07201925350f1a29">_mag_bias_observable</a>{<span class="keyword">false</span>};   <span class="comment">///&lt; true when there is enough rotation to make magnetometer bias errors observable</span></div><div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a17541c6b2f74ed5bac8d1f5a36d68ca0">  355</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a17541c6b2f74ed5bac8d1f5a36d68ca0">_yaw_angle_observable</a>{<span class="keyword">false</span>};  <span class="comment">///&lt; true when there is enough horizontal acceleration to make yaw observable</span></div><div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a3d888a1e60fb15a61f723d6d49ef9b34">  356</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a3d888a1e60fb15a61f723d6d49ef9b34">_time_yaw_started</a>{0};      <span class="comment">///&lt; last system time in usec that a yaw rotation manoeuvre was detected</span></div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a82bb548da63d49e7f01339c717297695">  357</a></span>&#160;<span class="comment"></span>    uint8_t <a class="code" href="../../dc/d66/class_ekf.html#a82bb548da63d49e7f01339c717297695">_num_bad_flight_yaw_events</a>{0};  <span class="comment">///&lt; number of times a bad heading has been detected in flight and required a yaw reset</span></div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a9f954eb2ac15055a4932c47c25b71a93">  358</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a9f954eb2ac15055a4932c47c25b71a93">_mag_use_not_inhibit_us</a>{0};    <span class="comment">///&lt; last system time in usec before magnetometer use was inhibited</span></div><div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a05d15d380482d0bbd650dba29aeccb4e">  359</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a05d15d380482d0bbd650dba29aeccb4e">_mag_use_inhibit</a>{<span class="keyword">false</span>};       <span class="comment">///&lt; true when magnetometer use is being inhibited</span></div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a5a50a1a73db678587d1206d4b967d12b">  360</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a5a50a1a73db678587d1206d4b967d12b">_mag_use_inhibit_prev</a>{<span class="keyword">false</span>};  <span class="comment">///&lt; true when magnetometer use was being inhibited the previous frame</span></div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a296928902b9783f5f605ff5993cb7df5">  361</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a296928902b9783f5f605ff5993cb7df5">_mag_inhibit_yaw_reset_req</a>{<span class="keyword">false</span>}; <span class="comment">///&lt; true when magnetometer inhibit has been active for long enough to require a yaw reset when conditions improve.</span></div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#adc0aa40b7378a773a7d5eb559e6edce2">  362</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#adc0aa40b7378a773a7d5eb559e6edce2">_last_static_yaw</a>{0.0f};       <span class="comment">///&lt; last yaw angle recorded when on ground motion checks were passing (rad)</span></div><div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#af41b850db61f2ba2fa543fe3cb805d6f">  363</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#af41b850db61f2ba2fa543fe3cb805d6f">_mag_yaw_reset_req</a>{<span class="keyword">false</span>};     <span class="comment">///&lt; true when a reset of the yaw using the magnetometer data has been requested</span></div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#adbe4e50f47ab3a25c2f465fc9b66b635">  364</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#adbe4e50f47ab3a25c2f465fc9b66b635">_mag_decl_cov_reset</a>{<span class="keyword">false</span>};    <span class="comment">///&lt; true after the fuseDeclination() function has been used to modify the earth field covariances after a magnetic field reset event.</span></div><div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#af6f96eca2db76f0a952f923d29f1b26d">  365</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#af6f96eca2db76f0a952f923d29f1b26d">_synthetic_mag_z_active</a>{<span class="keyword">false</span>};    <span class="comment">///&lt; true if we are generating synthetic magnetometer Z measurements</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a21e25b3a6efdb7ecaf04e4e3ebe53869">  367</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a21e25b3a6efdb7ecaf04e4e3ebe53869">P</a>[<a class="code" href="../../dc/d66/class_ekf.html#a0a50b20622b267e7989a95901f54870b">_k_num_states</a>][<a class="code" href="../../dc/d66/class_ekf.html#a0a50b20622b267e7989a95901f54870b">_k_num_states</a>] {};   <span class="comment">///&lt; state covariance matrix</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a4ec80dc0d08bdacdb4cb321af13a9b9c">  369</a></span>&#160;    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#a4ec80dc0d08bdacdb4cb321af13a9b9c">_delta_vel_bias_var_accum</a>;     <span class="comment">///&lt; kahan summation algorithm accumulator for delta velocity bias variance</span></div><div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#abf55908e0801ac25008de1e254a4135e">  370</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#abf55908e0801ac25008de1e254a4135e">_delta_angle_bias_var_accum</a>;   <span class="comment">///&lt; kahan summation algorithm accumulator for delta angle bias variance</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a741954791da1a860d0ac96dc86181d0b">  372</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a741954791da1a860d0ac96dc86181d0b">_vel_pos_innov</a>[6] {}; <span class="comment">///&lt; NED velocity and position innovations: 0-2 vel (m/sec),  3-5 pos (m)</span></div><div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a46546a8e1a0c6133d5d17cc07ecd659c">  373</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a46546a8e1a0c6133d5d17cc07ecd659c">_vel_pos_innov_var</a>[6] {}; <span class="comment">///&lt; NED velocity and position innovation variances: 0-2 vel ((m/sec)**2), 3-5 pos (m**2)</span></div><div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a352fc869b91db32be08037389c7f9500">  374</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a352fc869b91db32be08037389c7f9500">_aux_vel_innov</a>[2] {}; <span class="comment">///&lt; NE auxiliary velocity innovations: (m/sec)</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a3062061166cfd16a93007f8120947657">  376</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a3062061166cfd16a93007f8120947657">_mag_innov</a>[3] {};     <span class="comment">///&lt; earth magnetic field innovations (Gauss)</span></div><div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#af727cfe03d3c89d71e122a43799a854a">  377</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#af727cfe03d3c89d71e122a43799a854a">_mag_innov_var</a>[3] {}; <span class="comment">///&lt; earth magnetic field innovation variance (Gauss**2)</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ae48ba7943ed29615945abf4bcb77f575">  379</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ae48ba7943ed29615945abf4bcb77f575">_airspeed_innov</a>{0.0f};        <span class="comment">///&lt; airspeed measurement innovation (m/sec)</span></div><div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a17aed18d9e73be9108e3f50e47b23f93">  380</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a17aed18d9e73be9108e3f50e47b23f93">_airspeed_innov_var</a>{0.0f};    <span class="comment">///&lt; airspeed measurement innovation variance ((m/sec)**2)</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ac33759f784788cba6a1493732042e7d6">  382</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ac33759f784788cba6a1493732042e7d6">_beta_innov</a>{0.0f};    <span class="comment">///&lt; synthetic sideslip measurement innovation (rad)</span></div><div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a2d2b742a0db5377ca8034e5164a716cb">  383</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a2d2b742a0db5377ca8034e5164a716cb">_beta_innov_var</a>{0.0f};    <span class="comment">///&lt; synthetic sideslip measurement innovation variance (rad**2)</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a7a652cc1975298c65863dd510840aff1">  385</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a7a652cc1975298c65863dd510840aff1">_drag_innov</a>[2] {};    <span class="comment">///&lt; multirotor drag measurement innovation (m/sec**2)</span></div><div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#af4101833167bb9d27ab05c069caaaff4">  386</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#af4101833167bb9d27ab05c069caaaff4">_drag_innov_var</a>[2] {};    <span class="comment">///&lt; multirotor drag measurement innovation variance ((m/sec**2)**2)</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ad197d08be191c1b385ff51793bf619ba">  388</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ad197d08be191c1b385ff51793bf619ba">_heading_innov</a>{0.0f}; <span class="comment">///&lt; heading measurement innovation (rad)</span></div><div class="line"><a name="l00389"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a278a65a7d1b0a4fa8d02a25883482b3b">  389</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a278a65a7d1b0a4fa8d02a25883482b3b">_heading_innov_var</a>{0.0f}; <span class="comment">///&lt; heading measurement innovation variance (rad**2)</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// optical flow processing</span></div><div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a3b7ecfc32be723c9a92c1fd0d0546af1">  392</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a3b7ecfc32be723c9a92c1fd0d0546af1">_flow_innov</a>[2] {};    <span class="comment">///&lt; flow measurement innovation (rad/sec)</span></div><div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#acf400c7b1112fe361356e09f9b8a80c7">  393</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#acf400c7b1112fe361356e09f9b8a80c7">_flow_innov_var</a>[2] {};    <span class="comment">///&lt; flow innovation variance ((rad/sec)**2)</span></div><div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a2ddbf464da9e537669e42d43405bc67a">  394</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#a2ddbf464da9e537669e42d43405bc67a">_flow_gyro_bias</a>;   <span class="comment">///&lt; bias errors in optical flow sensor rate gyro outputs (rad/sec)</span></div><div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ab0e22396659807e0f62be0ebc3058009">  395</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#ab0e22396659807e0f62be0ebc3058009">_imu_del_ang_of</a>;   <span class="comment">///&lt; bias corrected delta angle measurements accumulated across the same time frame as the optical flow rates (rad)</span></div><div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ae6063ae2ec7691c6422c534cef8fa190">  396</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ae6063ae2ec7691c6422c534cef8fa190">_delta_time_of</a>{0.0f}; <span class="comment">///&lt; time in sec that _imu_del_ang_of was accumulated over (sec)</span></div><div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ab6f0ea500984e57fa1d6ef2f5b0a82e8">  397</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#ab6f0ea500984e57fa1d6ef2f5b0a82e8">_time_bad_motion_us</a>{0};    <span class="comment">///&lt; last system time that on-ground motion exceeded limits (uSec)</span></div><div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a5106b977efeb668b215df9b5d3e65994">  398</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a5106b977efeb668b215df9b5d3e65994">_time_good_motion_us</a>{0};   <span class="comment">///&lt; last system time that on-ground motion was within limits (uSec)</span></div><div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a1379edb7ebffd297b002608eab444928">  399</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a1379edb7ebffd297b002608eab444928">_inhibit_flow_use</a>{<span class="keyword">false</span>};  <span class="comment">///&lt; true when use of optical flow and range finder is being inhibited</span></div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a7d652ae9f284b3b53c86d35fa0b4bc62">  400</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a1b583711c91bf5c9f5b515e167edce90">Vector2f</a> <a class="code" href="../../dc/d66/class_ekf.html#a7d652ae9f284b3b53c86d35fa0b4bc62">_flowRadXYcomp</a>;    <span class="comment">///&lt; measured delta angle of the image about the X and Y body axes after removal of body rotation (rad), RH rotation is positive</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// output predictor states</span></div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ad2497b194654b9aadee1d7bcc189e91e">  403</a></span>&#160;    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#ad2497b194654b9aadee1d7bcc189e91e">_delta_angle_corr</a>; <span class="comment">///&lt; delta angle correction vector (rad)</span></div><div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#aedc00bc6e14815fbb195ba0e7a8dcc73">  404</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d4/d03/structestimator_1_1imu_sample.html">imuSample</a> <a class="code" href="../../dc/d66/class_ekf.html#aedc00bc6e14815fbb195ba0e7a8dcc73">_imu_down_sampled</a>{};  <span class="comment">///&lt; down sampled imu data (sensor rate -&gt; filter update rate)</span></div><div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ad360245cc68e9b5245923a7e76ecd0a6">  405</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a46a2a9f5c092d90cf33d4e0cac3f3593">Quatf</a> <a class="code" href="../../dc/d66/class_ekf.html#ad360245cc68e9b5245923a7e76ecd0a6">_q_down_sampled</a>;      <span class="comment">///&lt; down sampled quaternion (tracking delta angles between ekf update steps)</span></div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ad3681b42d9cfa7c0dde9730ca1d00890">  406</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#ad3681b42d9cfa7c0dde9730ca1d00890">_vel_err_integ</a>;    <span class="comment">///&lt; integral of velocity tracking error (m)</span></div><div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a980d746b55e5f2ef9c17c55c41fede5d">  407</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#a980d746b55e5f2ef9c17c55c41fede5d">_pos_err_integ</a>;    <span class="comment">///&lt; integral of position tracking error (m.s)</span></div><div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a0499cc0e642a51b76a9de49c0de2c9b4">  408</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a0499cc0e642a51b76a9de49c0de2c9b4">_output_tracking_error</a>[3] {}; <span class="comment">///&lt; contains the magnitude of the angle, velocity and position track errors (rad, m/s, m)</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// variables used for the GPS quality checks</span></div><div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#aaa872baa37efcb07e4f4bf7869ee5548">  411</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#aaa872baa37efcb07e4f4bf7869ee5548">_gpsDriftVelN</a>{0.0f};      <span class="comment">///&lt; GPS north position derivative (m/sec)</span></div><div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a6bb63bb66e3480e256722a5d31687c20">  412</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a6bb63bb66e3480e256722a5d31687c20">_gpsDriftVelE</a>{0.0f};      <span class="comment">///&lt; GPS east position derivative (m/sec)</span></div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ac43d9c5fa7b46e54a660c74984660ec4">  413</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ac43d9c5fa7b46e54a660c74984660ec4">_gps_drift_velD</a>{0.0f};        <span class="comment">///&lt; GPS down position derivative (m/sec)</span></div><div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#adbb18ea85a81916d7d68f8bc36ebaba1">  414</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#adbb18ea85a81916d7d68f8bc36ebaba1">_gps_velD_diff_filt</a>{0.0f};    <span class="comment">///&lt; GPS filtered Down velocity (m/sec)</span></div><div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#adc2160d684ccf63b88fa0062458126bc">  415</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#adc2160d684ccf63b88fa0062458126bc">_gps_velN_filt</a>{0.0f};     <span class="comment">///&lt; GPS filtered North velocity (m/sec)</span></div><div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a0f152a43b10cf4990c2f8d95e8927dda">  416</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a0f152a43b10cf4990c2f8d95e8927dda">_gps_velE_filt</a>{0.0f};     <span class="comment">///&lt; GPS filtered East velocity (m/sec)</span></div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a5e605b54fba2fa27b0ccaa14bb867e02">  417</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a5e605b54fba2fa27b0ccaa14bb867e02">_last_gps_fail_us</a>{0};      <span class="comment">///&lt; last system time in usec that the GPS failed it&#39;s checks</span></div><div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a684322f4439c1f80a6dc36ea04c9a4c9">  418</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a684322f4439c1f80a6dc36ea04c9a4c9">_last_gps_pass_us</a>{0};      <span class="comment">///&lt; last system time in usec that the GPS passed it&#39;s checks</span></div><div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a62df1019ac9cfdb1169c5460be4e27e5">  419</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a62df1019ac9cfdb1169c5460be4e27e5">_gps_error_norm</a>{1.0f};        <span class="comment">///&lt; normalised gps error</span></div><div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a6fc55317d849254e304c4aad73345506">  420</a></span>&#160;<span class="comment"></span>    uint32_t <a class="code" href="../../dc/d66/class_ekf.html#a6fc55317d849254e304c4aad73345506">_min_gps_health_time_us</a>{10000000}; <span class="comment">///&lt; GPS is marked as healthy only after this amount of time</span></div><div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a45746d6c687dd5c97149a3ccb2357800">  421</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a45746d6c687dd5c97149a3ccb2357800">_gps_checks_passed</a>{<span class="keyword">false</span>};     <span class="comment">///&gt; true when all active GPS checks have passed</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// Variables used to publish the WGS-84 location of the EKF local NED origin</span></div><div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a796067c4430935264feaaa274bf0a455">  424</a></span>&#160;    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a796067c4430935264feaaa274bf0a455">_last_gps_origin_time_us</a>{0};   <span class="comment">///&lt; time the origin was last set (uSec)</span></div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ae6eb7f3370b0859fed80529409c72f5f">  425</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ae6eb7f3370b0859fed80529409c72f5f">_gps_alt_ref</a>{0.0f};       <span class="comment">///&lt; WGS-84 height (m)</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// Variables used to initialise the filter states</span></div><div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a3340c762e82a827c4fafbd454e98d8e0">  428</a></span>&#160;    uint32_t <a class="code" href="../../dc/d66/class_ekf.html#a3340c762e82a827c4fafbd454e98d8e0">_hgt_counter</a>{0};       <span class="comment">///&lt; number of height samples read during initialisation</span></div><div class="line"><a name="l00429"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a5dfe0d30def39dec09939e0edbac6853">  429</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a5dfe0d30def39dec09939e0edbac6853">_rng_filt_state</a>{0.0f};        <span class="comment">///&lt; filtered height measurement (m)</span></div><div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a92b4c38dae93f3935fc49e0af88abea3">  430</a></span>&#160;<span class="comment"></span>    uint32_t <a class="code" href="../../dc/d66/class_ekf.html#a92b4c38dae93f3935fc49e0af88abea3">_mag_counter</a>{0};       <span class="comment">///&lt; number of magnetometer samples read during initialisation</span></div><div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ae28e511532b85ec68085417f434953ae">  431</a></span>&#160;<span class="comment"></span>    uint32_t <a class="code" href="../../dc/d66/class_ekf.html#ae28e511532b85ec68085417f434953ae">_ev_counter</a>{0};        <span class="comment">///&lt; number of external vision samples read during initialisation</span></div><div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a28dbba42e1fc4d370b6405f99b62b043">  432</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a28dbba42e1fc4d370b6405f99b62b043">_time_last_mag</a>{0};     <span class="comment">///&lt; measurement time of last magnetomter sample (uSec)</span></div><div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a51ee969f6d4e139a22a52ad9a7e653a0">  433</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../dc/d8f/class_alpha_filter.html">AlphaFilterVector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#a51ee969f6d4e139a22a52ad9a7e653a0">_mag_lpf</a>;       <span class="comment">///&lt; filtered magnetometer measurement (Gauss)</span></div><div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a87f5d58f37f6854b44c3ea9a8cda6411">  434</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#a87f5d58f37f6854b44c3ea9a8cda6411">_delVel_sum</a>;           <span class="comment">///&lt; summed delta velocity (m/sec)</span></div><div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a67af914ab13e31777c6bae86d86311ac">  435</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a67af914ab13e31777c6bae86d86311ac">_hgt_sensor_offset</a>{0.0f};     <span class="comment">///&lt; set as necessary if desired to maintain the same height after a height reset (m)</span></div><div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a0cc7428fdc526b4852b7a1c909b94810">  436</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a0cc7428fdc526b4852b7a1c909b94810">_baro_hgt_offset</a>{0.0f};       <span class="comment">///&lt; baro height reading at the local NED origin (m)</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">// Variables used to control activation of post takeoff functionality</span></div><div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#aa2c5a9b5968445e5432ddb150fcb18d2">  439</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#aa2c5a9b5968445e5432ddb150fcb18d2">_last_on_ground_posD</a>{0.0f};   <span class="comment">///&lt; last vertical position when the in_air status was false (m)</span></div><div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#adc073d16a6470ca97d2650b96115899d">  440</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#adc073d16a6470ca97d2650b96115899d">_flt_mag_align_converging</a>{<span class="keyword">false</span>};  <span class="comment">///&lt; true when the in-flight mag field post alignment convergence is being performd</span></div><div class="line"><a name="l00441"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ad92fd40503a8f2bf201a7e294f17fc26">  441</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#ad92fd40503a8f2bf201a7e294f17fc26">_flt_mag_align_start_time</a>{0};  <span class="comment">///&lt; time that inflight magnetic field alignment started (uSec)</span></div><div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a0d6b030d36693f1043b55f1a2ed21db9">  442</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a0d6b030d36693f1043b55f1a2ed21db9">_time_last_mov_3d_mag_suitable</a>{0}; <span class="comment">///&lt; last system time that sufficient movement to use 3-axis magnetometer fusion was detected (uSec)</span></div><div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a72747ac3528a51934b9fa60283e0a9e5">  443</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a72747ac3528a51934b9fa60283e0a9e5">_saved_mag_bf_variance</a>[4] {}; <span class="comment">///&lt; magnetic field state variances that have been saved for use at the next initialisation (Gauss**2)</span></div><div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a771d6c2925a6f37cf0f5af4701750f88">  444</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a771d6c2925a6f37cf0f5af4701750f88">_saved_mag_ef_covmat</a>[2][2] {};    <span class="comment">///&lt; NE magnetic field state covariance sub-matrix saved for use at the next initialisation (Gauss**2)</span></div><div class="line"><a name="l00445"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ad5c4866ae07c08e475a743f0d2755da1">  445</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#ad5c4866ae07c08e475a743f0d2755da1">_velpos_reset_request</a>{<span class="keyword">false</span>};  <span class="comment">///&lt; true when a large yaw error has been fixed and a velocity and position state reset is required</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a9a3363a143636b252178e060493b27be">  447</a></span>&#160;    <a class="code" href="../../d2/da1/unionestimator_1_1gps__check__fail__status__u.html">gps_check_fail_status_u</a> <a class="code" href="../../dc/d66/class_ekf.html#a9a3363a143636b252178e060493b27be">_gps_check_fail_status</a>{};</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// variables used to inhibit accel bias learning</span></div><div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a377a013ac564e0273ab17137ead8cbcb">  450</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a377a013ac564e0273ab17137ead8cbcb">_accel_bias_inhibit</a>{<span class="keyword">false</span>};    <span class="comment">///&lt; true when the accel bias learning is being inhibited</span></div><div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ac6b7615a74185fb1ffec1e08fa450c0a">  451</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#ac6b7615a74185fb1ffec1e08fa450c0a">_accel_vec_filt</a>{};     <span class="comment">///&lt; acceleration vector after application of a low pass filter (m/sec**2)</span></div><div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#afc2507b762f7faf405bb42688ef06666">  452</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#afc2507b762f7faf405bb42688ef06666">_accel_mag_filt</a>{0.0f};    <span class="comment">///&lt; acceleration magnitude after application of a decaying envelope filter (rad/sec)</span></div><div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ad3e94add45ddaa2e835769005cf5f3ca">  453</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ad3e94add45ddaa2e835769005cf5f3ca">_ang_rate_mag_filt</a>{0.0f};     <span class="comment">///&lt; angular rate magnitude after application of a decaying envelope filter (rad/sec)</span></div><div class="line"><a name="l00454"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a9f4ca6d659b487fd165fb34fa09cfe36">  454</a></span>&#160;<span class="comment"></span>    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#a9f4ca6d659b487fd165fb34fa09cfe36">_prev_dvel_bias_var</a>;       <span class="comment">///&lt; saved delta velocity XYZ bias variances (m/sec)**2</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// Terrain height state estimation</span></div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a2b3ef7b330f70897b858b988ab7c4d3b">  457</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a2b3ef7b330f70897b858b988ab7c4d3b">_terrain_vpos</a>{0.0f};      <span class="comment">///&lt; estimated vertical position of the terrain underneath the vehicle in local NED frame (m)</span></div><div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a562a5313172ecf727fcced923a07528f">  458</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a562a5313172ecf727fcced923a07528f">_terrain_var</a>{1e4f};       <span class="comment">///&lt; variance of terrain position estimate (m**2)</span></div><div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ac85267a55e6d941b9fb1434b98edd20e">  459</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ac85267a55e6d941b9fb1434b98edd20e">_hagl_innov</a>{0.0f};        <span class="comment">///&lt; innovation of the last height above terrain measurement (m)</span></div><div class="line"><a name="l00460"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a500635927248bc989ffe08871dc4cc7f">  460</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a500635927248bc989ffe08871dc4cc7f">_hagl_innov_var</a>{0.0f};        <span class="comment">///&lt; innovation variance for the last height above terrain measurement (m**2)</span></div><div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a68d5b523ef75680c85bebe1f8f134d6b">  461</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a68d5b523ef75680c85bebe1f8f134d6b">_time_last_hagl_fuse</a>{0};       <span class="comment">///&lt; last system time that the hagl measurement failed it&#39;s checks (uSec)</span></div><div class="line"><a name="l00462"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#acedab56d4ee07bcddb2411447971f55e">  462</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#acedab56d4ee07bcddb2411447971f55e">_terrain_initialised</a>{<span class="keyword">false</span>};   <span class="comment">///&lt; true when the terrain estimator has been initialized</span></div><div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#af9fc18d45e3f147aeff0674747fa552b">  463</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#af9fc18d45e3f147aeff0674747fa552b">_sin_tilt_rng</a>{0.0f};      <span class="comment">///&lt; sine of the range finder tilt rotation about the Y body axis</span></div><div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a7300cf5ea53fd784bb451dbcfef5965c">  464</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a7300cf5ea53fd784bb451dbcfef5965c">_cos_tilt_rng</a>{0.0f};      <span class="comment">///&lt; cosine of the range finder tilt rotation about the Y body axis</span></div><div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#acea6fadadc01c460f9d163e80b2d567a">  465</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#acea6fadadc01c460f9d163e80b2d567a">_R_rng_to_earth_2_2</a>{0.0f};    <span class="comment">///&lt; 2,2 element of the rotation matrix from sensor frame to earth frame</span></div><div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ab09f7d4ae6ff19d8465947f3e7005006">  466</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ab09f7d4ae6ff19d8465947f3e7005006">_dt_last_range_update_filt_us</a>{0.0f};  <span class="comment">///&lt; filtered value of the delta time elapsed since the last range measurement came into the filter (uSec)</span></div><div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a39bd3244606afebb0fc495477c962aac">  467</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a39bd3244606afebb0fc495477c962aac">_hagl_valid</a>{<span class="keyword">false</span>};        <span class="comment">///&lt; true when the height above ground estimate is valid</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">// height sensor status</span></div><div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a0135735b720700b89a5f6574567dfdbc">  470</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a0135735b720700b89a5f6574567dfdbc">_baro_hgt_faulty</a>{<span class="keyword">false</span>};       <span class="comment">///&lt; true if valid baro data is unavailable for use</span></div><div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a1b6d2c569c77565cc381c146a548dd49">  471</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a1b6d2c569c77565cc381c146a548dd49">_gps_hgt_intermittent</a>{<span class="keyword">false</span>};  <span class="comment">///&lt; true if gps height into the buffer is intermittent</span></div><div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a846ed97767a228e2098b18dd6558d8ff">  472</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a846ed97767a228e2098b18dd6558d8ff">_rng_hgt_valid</a>{<span class="keyword">false</span>};     <span class="comment">///&lt; true if range finder sample retrieved from buffer is valid</span></div><div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#afad933d73c4376ca64db280c7f19a750">  473</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">int</span> <a class="code" href="../../dc/d66/class_ekf.html#afad933d73c4376ca64db280c7f19a750">_primary_hgt_source</a>{<a class="code" href="../../d5/d60/lib_2ecl_2_e_k_f_2common_8h.html#aafc0f692373d9cfc3868005db716f649">VDIST_SENSOR_BARO</a>}; <span class="comment">///&lt; specifies primary source of height data</span></div><div class="line"><a name="l00474"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a19375f61dfab2c45b8cc12abdea1e559">  474</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a19375f61dfab2c45b8cc12abdea1e559">_time_bad_rng_signal_quality</a>{0};   <span class="comment">///&lt; timestamp at which range finder signal quality was 0 (used for hysteresis)</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">// imu fault status</span></div><div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a1ff47177a5245c18ea2bc233a2b7674b">  477</a></span>&#160;    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a1ff47177a5245c18ea2bc233a2b7674b">_time_bad_vert_accel</a>{0};   <span class="comment">///&lt; last time a bad vertical accel was detected (uSec)</span></div><div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a2f993c2bcec8bc8b9bb3bf92a26cf6e0">  478</a></span>&#160;<span class="comment"></span>    uint64_t <a class="code" href="../../dc/d66/class_ekf.html#a2f993c2bcec8bc8b9bb3bf92a26cf6e0">_time_good_vert_accel</a>{0};  <span class="comment">///&lt; last time a good vertical accel was detected (uSec)</span></div><div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ac89300ffcaaad5892ee4d19696037001">  479</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#ac89300ffcaaad5892ee4d19696037001">_bad_vert_accel_detected</a>{<span class="keyword">false</span>};   <span class="comment">///&lt; true when bad vertical accelerometer data has been detected</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// variables used to control range aid functionality</span></div><div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ab46a0c26c40fb91a696caf4648d77a6d">  482</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#ab46a0c26c40fb91a696caf4648d77a6d">_is_range_aid_suitable</a>{<span class="keyword">false</span>}; <span class="comment">///&lt; true when range finder can be used in flight as the height reference instead of the primary height sensor</span></div><div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a295fbf4a20e58e2df01a9370bc50ac76">  483</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a295fbf4a20e58e2df01a9370bc50ac76">_range_aid_mode_selected</a>{<span class="keyword">false</span>};   <span class="comment">///&lt; true when range finder is being used as the height reference instead of the primary height sensor</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// variables used to check range finder validity data</span></div><div class="line"><a name="l00486"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a2faabb864bd1d12572a072e3a5330603">  486</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a2faabb864bd1d12572a072e3a5330603">_rng_stuck_min_val</a>{0.0f};     <span class="comment">///&lt; minimum value for new rng measurement when being stuck</span></div><div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ad58b299ddfb88b3fa03a055b08a8a58d">  487</a></span>&#160;<span class="comment"></span>    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ad58b299ddfb88b3fa03a055b08a8a58d">_rng_stuck_max_val</a>{0.0f};     <span class="comment">///&lt; maximum value for new rng measurement when being stuck</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#a9959bb8dae3a9997fb6b08843addbcc8">  489</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a9959bb8dae3a9997fb6b08843addbcc8">_height_rate_lpf</a>{0.0f};</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">// update the real time complementary filter states. This includes the prediction</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="comment">// and the correction step</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a4795ba38dfab8dc0e86d54af567574f9">calculateOutputStates</a>();</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// initialise filter states of both the delayed ekf and the real time complementary filter</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a51e005b564acbd344748d400273c416b">initialiseFilter</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">// initialise ekf covariance matrix</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a39e266caf9178e9c60950122c8bdb323">initialiseCovariance</a>();</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">// predict ekf state</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ac9608f65fd03d69ab6cfe8641979d529">predictState</a>();</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// predict ekf covariance</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#af35df366a6d4f3246b63a01566210a7c">predictCovariance</a>();</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">// ekf sequential fusion of magnetometer measurements</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a24f1225aaeec71df4d34d20777c1f528">fuseMag</a>();</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">// fuse the first euler angle from either a 321 or 312 rotation sequence as the observation (currently measures yaw using the magnetometer)</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#af644f0431ec8322a6e6bc2dfb7cdff3d">fuseHeading</a>();</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">// fuse the yaw angle obtained from a dual antenna GPS unit</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ae320167eb2316dd746f4efe919b5aee6">fuseGpsAntYaw</a>();</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">// reset the quaternions states using the yaw angle obtained from a dual antenna GPS unit</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">// return true if the reset was successful</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a8ca7e1028dd6a193acb64631036ee757">resetGpsAntYaw</a>();</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">// fuse magnetometer declination measurement</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">// argument passed in is the declination uncertainty in radians</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a6cab516f98e08b6356cf8903c3b4adfd">fuseDeclination</a>(<span class="keywordtype">float</span> decl_sigma);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="comment">// apply sensible limits to the declination and length of the NE mag field states estimates</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a3b96c08ee92d2a39dcd223b3d4213cbc">limitDeclination</a>();</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">// fuse airspeed measurement</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a4aeac9aaeef543b77c23947bae5607bd">fuseAirspeed</a>();</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">// fuse synthetic zero sideslip measurement</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a08c475cc3e0d978431224937eb310f99">fuseSideslip</a>();</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="comment">// fuse body frame drag specific forces for multi-rotor wind estimation</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a83e1ee3bdbcf0beabb85e0eef87a962a">fuseDrag</a>();</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">// fuse velocity and position measurements (also barometer height)</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a8fd4f2159849dc6326169c816157387f">fuseVelPosHeight</a>();</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="comment">// reset velocity states of the ekf</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a0268d0e1335a60952fa8bb722f821674">resetVelocity</a>();</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="comment">// fuse optical flow line of sight rate measurements</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aebc76db99cc062452f100742a80c4de6">fuseOptFlow</a>();</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">// calculate optical flow body angular rate compensation</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment">// returns false if bias corrected body rate data is unavailable</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#adc60c3f193f21850b93e6e368e5f66a4">calcOptFlowBodyRateComp</a>();</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">// initialise the terrain vertical position estimator</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// return true if the initialisation is successful</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a5b265a0429b1510ac0ef9fcba510360e">initHagl</a>();</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="comment">// run the terrain estimator</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a3a736fa26fe071bf1fe6942f547f92cc">runTerrainEstimator</a>();</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">// update the terrain vertical position estimate using a height above ground measurement from the range finder</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a4563878321b3b60447509710fed2eea3">fuseHagl</a>();</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="comment">// update the terrain vertical position estimate using an optical flow measurement</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a668dad54de9fd6f0d35efdb0230c65e8">fuseFlowForTerrain</a>();</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="comment">// reset the heading and magnetic field states using the declination and magnetometer/external vision measurements</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">// return true if successful</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#aabb8e6ed59b04c33697c3a5105825f98">resetMagHeading</a>(<span class="keyword">const</span> <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> &amp;mag_init, <span class="keywordtype">bool</span> increase_yaw_var = <span class="keyword">true</span>, <span class="keywordtype">bool</span> update_buffer=<span class="keyword">true</span>);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">// Do a forced re-alignment of the yaw angle to align with the horizontal velocity vector from the GPS.</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">// It is used to align the yaw angle after launch or takeoff for fixed wing vehicle.</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a7896e8c019d0df0a0725a5f463800044">realignYawGPS</a>();</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">// Return the magnetic declination in radians to be used by the alignment and fusion processing</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a83ac4e7952563683069107eaea8825a8">getMagDeclination</a>();</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// reset position states of the ekf (only horizontal position)</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a427d41afde8eb4acb8fc5290bcfbcb9a">resetPosition</a>();</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">// reset height state of the ekf</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a732f6e0dfe595bca82bdff3ae2421700">resetHeight</a>();</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// modify output filter to match the the EKF state at the fusion time horizon</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a9a7b0eedbccd75e6dbc766ebaaee9925">alignOutputFilter</a>();</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="comment">// update the estimated angular misalignment vector between the EV naigration frame and the EKF navigation frame</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">// and update the rotation matrix which transforms EV navigation frame measurements into NED</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a6aab86464a2a3e93ee17fc05ded4a241">calcExtVisRotMat</a>();</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">// reset the estimated angular misalignment vector between the EV naigration frame and the EKF navigation frame</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="comment">// and reset the rotation matrix which transforms EV navigation frame measurements into NED</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a14d54802f5c7618d0101916fffe092a2">resetExtVisRotMat</a>();</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="comment">// limit the diagonal of the covariance matrix</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a44ed26d116c7af6ecc6c8973d439ff2d">fixCovarianceErrors</a>();</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="comment">// make ekf covariance matrix symmetric between a nominated state indexe range</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a22be86a20618f9990a0021c54f31ad8f">makeSymmetrical</a>(<span class="keywordtype">float</span> (&amp;cov_mat)[<a class="code" href="../../dc/d66/class_ekf.html#a0a50b20622b267e7989a95901f54870b">_k_num_states</a>][<a class="code" href="../../dc/d66/class_ekf.html#a0a50b20622b267e7989a95901f54870b">_k_num_states</a>], uint8_t first, uint8_t last);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="comment">// constrain the ekf states</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a232288245fee48b96ab53a479dcd4d00">constrainStates</a>();</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment">// generic function which will perform a fusion step given a kalman gain K</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">// and a scalar innovation value</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aac63e41e363c1f8d21375662a700e65a">fuse</a>(<span class="keywordtype">float</span> *K, <span class="keywordtype">float</span> innovation);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment">// calculate the earth rotation vector from a given latitude</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a5160411a3b97ad10d989ed5a96821352">calcEarthRateNED</a>(<a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> &amp;omega, <span class="keywordtype">float</span> lat_rad) <span class="keyword">const</span>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="comment">// return true id the GPS quality is good enough to set an origin and start aiding</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a7fd160ae7d8e35ec754f0dce8c5d8153">gps_is_good</a>(<span class="keyword">const</span> <a class="code" href="../../da/d7e/structestimator_1_1gps__message.html">gps_message</a> &amp;gps);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="comment">// Control the filter fusion modes</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a709c2a511002736cd376c265c244eace">controlFusionModes</a>();</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="comment">// control fusion of external vision observations</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a4a504cfcfe76af40520e2f6abbcfccd3">controlExternalVisionFusion</a>();</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="comment">// control fusion of optical flow observations</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a198de67548c5407f0bbccc62f888c2b8">controlOpticalFlowFusion</a>();</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="comment">// control fusion of GPS observations</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ad29f668e2cb537f7e4373ccba9ef80ad">controlGpsFusion</a>();</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// control fusion of magnetometer observations</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#af7b13c3328aee801c57df71e99b3d2a2">controlMagFusion</a>();</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a0ca03003996218259d343d526f065ae3">updateMagFilter</a>();</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a4fb97af3133b0f90b205c85424dca180">canRunMagFusion</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a1840694d8d4a1e71d2847a02d0e14964">checkHaglYawResetReq</a>();</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ab41addaa5482d62667328c300db0d25f">getTerrainVPos</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aa73a3299bd9b9975e268bca91b385aae">runOnGroundYawReset</a>();</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#af18ef975c56278f900dac296d4c0c1a0">isYawResetAuthorized</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a5f256767a45b3d7c57f75edade49287c">canResetMagHeading</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a3a5746a93bc89940139428190db96f38">runInAirYawReset</a>();</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#abe44b8d6843af7e2a6b78c059b5dba9a">canRealignYawUsingGps</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a921384ecaa7912d4803add15c8d1b2e8">runVelPosReset</a>();</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ae6bc4a65c6605547f3a7570d1060ff0f">selectMagAuto</a>();</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#adedc1dc5e57f319a2b0d70452ea36238">check3DMagFusionSuitability</a>();</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a668eac17be299fcd8995f28be4151266">checkYawAngleObservability</a>();</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ac9be4a8a86dc2398d6b9a053ae8ac472">checkMagBiasObservability</a>();</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a962d6be8242144203599b519d6376f52">isYawAngleObservable</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a80f10caaa9a04cf28d0cd7b26159f067">isMagBiasObservable</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#aed683ba8a5652b59c7a3df47bfeab4e7">canUse3DMagFusion</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a8f27dacb50fc38aaeca8170d88b75815">checkMagDeclRequired</a>();</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a02303e56b30d1704f2be3e0e8a04e095">checkMagInhibition</a>();</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a9cd4984bf21090bc609aff6391edff08">shouldInhibitMag</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ab032c45aa539ecd512d7e539bbbf38fd">checkMagFieldStrength</a>();</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a11ae2a99f3c1d016c51dc7521b0c6384">isStrongMagneticDisturbance</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a5363ceef7d620a5eef0e336ef5f9b749">isMeasuredMatchingGpsMagStrength</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a3d6387e362409f5306a3a7cfde7d7401">isMeasuredMatchingAverageMagStrength</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#a6e7b668998c21ebc814242ce304f59a5">isMeasuredMatchingExpected</a>(<span class="keywordtype">float</span> measured, <span class="keywordtype">float</span> expected, <span class="keywordtype">float</span> gate);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a434e228e673df0f462f033994eefb197">runMagAndMagDeclFusions</a>();</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a0d270537ecebeb4065a1b97e5e586e7f">run3DMagAndDeclFusions</a>();</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="comment">// control fusion of range finder observations</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a8b76d1703237dc9ce16451396a7357da">controlRangeFinderFusion</a>();</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="comment">// control fusion of air data observations</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#abd99d3442f6872caf9e226d0f6e5f293">controlAirDataFusion</a>();</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// control fusion of synthetic sideslip observations</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a8631e0737f7fce3744dd99af8f71d25d">controlBetaFusion</a>();</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">// control fusion of multi-rotor drag specific force observations</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aaebc9bd7ff8a168b0fcecdaf0ebd8a91">controlDragFusion</a>();</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// control fusion of pressure altitude observations</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a1f2c5a313e0882bca2fcf4481315a994">controlBaroFusion</a>();</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="comment">// control fusion of velocity and position observations</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ab3b24c8516353054ffb5a642a7a25b06">controlVelPosFusion</a>();</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="comment">// control fusion of auxiliary velocity observations</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a41e9a14de9f501cc64a4a66a849d556a">controlAuxVelFusion</a>();</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">// control for height sensor timeouts, sensor changes and state resets</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a74992c47707b497466659bb7cb9e77eb">controlHeightSensorTimeouts</a>();</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment">// control for combined height fusion mode (implemented for switching between baro and range height)</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a64f378ac55cd9c7826923e9f78b236c1">controlHeightFusion</a>();</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">// determine if flight condition is suitable to use range finder instead of the primary height sensor</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a2f27f0db37995c7c8e7e02b40ffb41b2">checkRangeAidSuitability</a>();</div><div class="line"><a name="l00686"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ad169897dd355a0b3db39d811b9af4bfb">  686</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#ad169897dd355a0b3db39d811b9af4bfb">isRangeAidSuitable</a>() { <span class="keywordflow">return</span> <a class="code" href="../../dc/d66/class_ekf.html#ab46a0c26c40fb91a696caf4648d77a6d">_is_range_aid_suitable</a>; }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="comment">// update _rng_hgt_valid, which indicates if the current range sample has passed validity checks</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a580c523e7ca80c0d21a76f9d345e04e8">updateRangeDataValidity</a>();</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="comment">// check for &quot;stuck&quot; range finder measurements when rng was not valid for certain period</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ad88164e7feeb3f3c51c0d44c9d290832">updateRangeDataStuck</a>();</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="comment">// return the square of two floating point numbers - used in auto coded sections</span></div><div class="line"><a name="l00695"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#ac557eacd06bd597b3ab097cab74c1c39">  695</a></span>&#160;    <span class="keyword">static</span> constexpr <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#ac557eacd06bd597b3ab097cab74c1c39">sq</a>(<span class="keywordtype">float</span> var) { <span class="keywordflow">return</span> var * var; }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="comment">// set control flags to use baro height</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aa34f4d9d89e096b542a287fbe1b91d92">setControlBaroHeight</a>();</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="comment">// set control flags to use range height</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a3a839968be88e4e47f265d8f62b0155a">setControlRangeHeight</a>();</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// set control flags to use GPS height</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a8b687c82c5dfbdeebae02685783fc2ef">setControlGPSHeight</a>();</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">// set control flags to use external vision height</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aaf80ea102825ba5755fba7f2a7446578">setControlEVHeight</a>();</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aa3557241350622e78d0ef053e28177dc">stopMagFusion</a>();</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aa148e57137bf741e4ea5797152d1fe19">stopMag3DFusion</a>();</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#ab01e08a118d9778ea0a79d552f286ba3">stopMagHdgFusion</a>();</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a0828d9e222ff448c3686d36d3eafbad3">startMagHdgFusion</a>();</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a8722aaa3baa6b8fb1a837b9478f35105">startMag3DFusion</a>();</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="comment">// zero the specified range of rows in the state covariance matrix</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a49a4da2e831b46876b307eb8e0560a12">zeroRows</a>(<span class="keywordtype">float</span> (&amp;cov_mat)[_k_num_states][_k_num_states], uint8_t first, uint8_t last);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="comment">// zero the specified range of columns in the state covariance matrix</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a421983af018ca82e2c5c0ba3fa5ad769">zeroCols</a>(<span class="keywordtype">float</span> (&amp;cov_mat)[_k_num_states][_k_num_states], uint8_t first, uint8_t last);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="comment">// zero the specified range of off diagonals in the state covariance matrix</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a5b85c3509e588863acecef05b7d0a195">zeroOffDiag</a>(<span class="keywordtype">float</span> (&amp;cov_mat)[_k_num_states][_k_num_states], uint8_t first, uint8_t last);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">// zero the specified range of off diagonals in the state covariance matrix</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">// set the diagonals to the supplied value</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a3e1cf1f594a9d829c03e3672816a7f07">setDiag</a>(<span class="keywordtype">float</span> (&amp;cov_mat)[_k_num_states][_k_num_states], uint8_t first, uint8_t last, <span class="keywordtype">float</span> variance);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="comment">// calculate the measurement variance for the optical flow sensor</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a235e6e03f6e6611fd053b395adc71b3a">calcOptFlowMeasVar</a>();</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="comment">// rotate quaternion covariances into variances for an equivalent rotation vector</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> <a class="code" href="../../dc/d66/class_ekf.html#ab3c6e783a4a9cd982d1fb2e01a4cd54b">calcRotVecVariances</a>();</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">// initialise the quaternion covariances using rotation vector variances</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a8c9fb4e5919264cdf44c8e940c488443">initialiseQuatCovariances</a>(<a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> &amp;rot_vec_var);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="comment">// perform a limited reset of the magnetic field state covariances</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a43b43d423a1c6d45dc4cf6de7fe3bdfe">resetMagRelatedCovariances</a>();</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">// perform a limited reset of the wind state covariances</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#aede08985fc3703e505df3538134c1d40">resetWindCovariance</a>();</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="comment">// perform a reset of the wind states</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a999d2ee6ba6c99901f9de895101d68b2">resetWindStates</a>();</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// check that the range finder data is continuous</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a5d30376fa415773e9f477b012ecc522f">updateRangeDataContinuity</a>();</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno"><a class="line" href="../../dc/d66/class_ekf.html#adb8a3d8bddd5e3d3f5d49582a05ec7a9">  749</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../dc/d66/class_ekf.html#adb8a3d8bddd5e3d3f5d49582a05ec7a9">isRangeDataContinuous</a>() { <span class="keywordflow">return</span> <a class="code" href="../../dc/d66/class_ekf.html#ab09f7d4ae6ff19d8465947f3e7005006">_dt_last_range_update_filt_us</a> &lt; 2e6f; }</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="comment">// Increase the yaw error variance of the quaternions</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="comment">// Argument is additional yaw variance in rad**2</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a2ebf3a417f7a40089ab9cd2e24980bf3">increaseQuatYawErrVariance</a>(<span class="keywordtype">float</span> yaw_variance);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// load and save mag field state covariance data for re-use</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a79d7543c05ace38a2864e3f600597f3e">loadMagCovData</a>();</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a8a167edfb8ae0887a7f965b6876ea422">saveMagCovData</a>();</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#afd14b23a4b1aa308c74651d2e91bba47">clearMagCov</a>();</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a54621e0a885dc41a71820a64cae0b13f">zeroMagCov</a>();</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="comment">// uncorrelate quaternion states from other states</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dc/d66/class_ekf.html#a5e11064b04c01923452d6523d4d29542">uncorrelateQuatStates</a>();</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="comment">// Use Kahan summation algorithm to get the sum of &quot;sum_previous&quot; and &quot;input&quot;.</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">// This function relies on the caller to be responsible for keeping a copy of</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="comment">// &quot;accumulator&quot; and passing this value at the next iteration.</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="comment">// Ref: https://en.wikipedia.org/wiki/Kahan_summation_algorithm</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a508df454896d82f65f3e8daae19159dd">kahanSummation</a>(<span class="keywordtype">float</span> sum_previous, <span class="keywordtype">float</span> input, <span class="keywordtype">float</span> &amp;accumulator) <span class="keyword">const</span>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">// calculate a synthetic value for the magnetometer Z component, given the 3D magnetomter</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">// sensor measurement</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../dc/d66/class_ekf.html#a31a4fdb6a6a5d2a36f701c3e17dc91f7">calculate_synthetic_mag_z_measurement</a>(<a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> mag_meas, <a class="code" href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">Vector3f</a> mag_earth_predicted);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;};</div><div class="ttc" id="class_ekf_html_aed683ba8a5652b59c7a3df47bfeab4e7"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aed683ba8a5652b59c7a3df47bfeab4e7">Ekf::canUse3DMagFusion</a></div><div class="ttdeci">bool canUse3DMagFusion() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00237">mag_control.cpp:237</a></div></div>
<div class="ttc" id="class_ekf_html_a6cab516f98e08b6356cf8903c3b4adfd"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6cab516f98e08b6356cf8903c3b4adfd">Ekf::fuseDeclination</a></div><div class="ttdeci">void fuseDeclination(float decl_sigma)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/mag__fusion_8cpp_source.html#l00815">mag_fusion.cpp:815</a></div></div>
<div class="ttc" id="class_ekf_html_ad3681b42d9cfa7c0dde9730ca1d00890"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad3681b42d9cfa7c0dde9730ca1d00890">Ekf::_vel_err_integ</a></div><div class="ttdeci">Vector3f _vel_err_integ</div><div class="ttdoc">integral of velocity tracking error (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00406">ekf.h:406</a></div></div>
<div class="ttc" id="classmatrix_1_1_vector_html"><div class="ttname"><a href="../../d1/d71/classmatrix_1_1_vector.html">matrix::Vector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd8/_dual_8hpp_source.html#l00022">Dual.hpp:22</a></div></div>
<div class="ttc" id="class_ekf_html_a79d7543c05ace38a2864e3f600597f3e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a79d7543c05ace38a2864e3f600597f3e">Ekf::loadMagCovData</a></div><div class="ttdeci">void loadMagCovData()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01748">ekf_helper.cpp:1748</a></div></div>
<div class="ttc" id="class_ekf_html_a7300cf5ea53fd784bb451dbcfef5965c"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a7300cf5ea53fd784bb451dbcfef5965c">Ekf::_cos_tilt_rng</a></div><div class="ttdeci">float _cos_tilt_rng</div><div class="ttdoc">cosine of the range finder tilt rotation about the Y body axis </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00464">ekf.h:464</a></div></div>
<div class="ttc" id="class_ekf_html_a1ff47177a5245c18ea2bc233a2b7674b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a1ff47177a5245c18ea2bc233a2b7674b">Ekf::_time_bad_vert_accel</a></div><div class="ttdeci">uint64_t _time_bad_vert_accel</div><div class="ttdoc">last time a bad vertical accel was detected (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00477">ekf.h:477</a></div></div>
<div class="ttc" id="class_ekf_html_aa34f4d9d89e096b542a287fbe1b91d92"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa34f4d9d89e096b542a287fbe1b91d92">Ekf::setControlBaroHeight</a></div><div class="ttdeci">void setControlBaroHeight()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01545">ekf_helper.cpp:1545</a></div></div>
<div class="ttc" id="class_ekf_html_a9777c6b014ac1dda749ba7582589e766"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9777c6b014ac1dda749ba7582589e766">Ekf::_posInnovGateNE</a></div><div class="ttdeci">float _posInnovGateNE</div><div class="ttdoc">Number of standard deviations used for the NE position fusion innovation consistency check...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00300">ekf.h:300</a></div></div>
<div class="ttc" id="class_ekf_html_ac33759f784788cba6a1493732042e7d6"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac33759f784788cba6a1493732042e7d6">Ekf::_beta_innov</a></div><div class="ttdeci">float _beta_innov</div><div class="ttdoc">synthetic sideslip measurement innovation (rad) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00382">ekf.h:382</a></div></div>
<div class="ttc" id="class_ekf_html_a4795ba38dfab8dc0e86d54af567574f9"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a4795ba38dfab8dc0e86d54af567574f9">Ekf::calculateOutputStates</a></div><div class="ttdeci">void calculateOutputStates()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7a/ekf_8cpp_source.html#l00458">ekf.cpp:458</a></div></div>
<div class="ttc" id="class_ekf_html_afd14b23a4b1aa308c74651d2e91bba47"><div class="ttname"><a href="../../dc/d66/class_ekf.html#afd14b23a4b1aa308c74651d2e91bba47">Ekf::clearMagCov</a></div><div class="ttdeci">void clearMagCov()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d38/covariance_8cpp_source.html#l00917">covariance.cpp:917</a></div></div>
<div class="ttc" id="class_ekf_html_ad271d2ac4617391daae7f2727fbbd60e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad271d2ac4617391daae7f2727fbbd60e">Ekf::_fuse_height</a></div><div class="ttdeci">bool _fuse_height</div><div class="ttdoc">true when baro height data should be fused </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00293">ekf.h:293</a></div></div>
<div class="ttc" id="class_ekf_html_aaa872baa37efcb07e4f4bf7869ee5548"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aaa872baa37efcb07e4f4bf7869ee5548">Ekf::_gpsDriftVelN</a></div><div class="ttdeci">float _gpsDriftVelN</div><div class="ttdoc">GPS north position derivative (m/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00411">ekf.h:411</a></div></div>
<div class="ttc" id="class_ekf_html_acd779b7801421d846f714072ee78bbd6"><div class="ttname"><a href="../../dc/d66/class_ekf.html#acd779b7801421d846f714072ee78bbd6">Ekf::_state</a></div><div class="ttdeci">stateSample _state</div><div class="ttdoc">state struct of the ekf running at the delayed time horizon </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00288">ekf.h:288</a></div></div>
<div class="ttc" id="class_ekf_html_a73da8472a390f8a3a497e16479bc10d0"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a73da8472a390f8a3a497e16479bc10d0">Ekf::covariances</a></div><div class="ttdeci">matrix::SquareMatrix&lt; float, 24 &gt; covariances() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00129">ekf.h:129</a></div></div>
<div class="ttc" id="_commander_8cpp_html_a707b22601c0c46541a855d5320fb60e4"><div class="ttname"><a href="../../da/d73/_commander_8cpp.html#a707b22601c0c46541a855d5320fb60e4">status</a></div><div class="ttdeci">static struct vehicle_status_s status</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d73/_commander_8cpp_source.html#l00138">Commander.cpp:138</a></div></div>
<div class="ttc" id="class_ekf_html_a46546a8e1a0c6133d5d17cc07ecd659c"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a46546a8e1a0c6133d5d17cc07ecd659c">Ekf::_vel_pos_innov_var</a></div><div class="ttdeci">float _vel_pos_innov_var[6]</div><div class="ttdoc">NED velocity and position innovation variances: 0-2 vel ((m/sec)**2), 3-5 pos (m**2) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00373">ekf.h:373</a></div></div>
<div class="ttc" id="class_ekf_html_a50773b1a5047bbe92274eda9cb3b79ba"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a50773b1a5047bbe92274eda9cb3b79ba">Ekf::get_ekf_vel_accuracy</a></div><div class="ttdeci">void get_ekf_vel_accuracy(float *ekf_evh, float *ekf_evv) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01041">ekf_helper.cpp:1041</a></div></div>
<div class="ttc" id="class_ekf_html_a3b7ecfc32be723c9a92c1fd0d0546af1"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3b7ecfc32be723c9a92c1fd0d0546af1">Ekf::_flow_innov</a></div><div class="ttdeci">float _flow_innov[2]</div><div class="ttdoc">flow measurement innovation (rad/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00392">ekf.h:392</a></div></div>
<div class="ttc" id="class_ekf_html_a0d6b030d36693f1043b55f1a2ed21db9"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0d6b030d36693f1043b55f1a2ed21db9">Ekf::_time_last_mov_3d_mag_suitable</a></div><div class="ttdeci">uint64_t _time_last_mov_3d_mag_suitable</div><div class="ttdoc">last system time that sufficient movement to use 3-axis magnetometer fusion was detected (uSec) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00442">ekf.h:442</a></div></div>
<div class="ttc" id="class_ekf_html_a51e005b564acbd344748d400273c416b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a51e005b564acbd344748d400273c416b">Ekf::initialiseFilter</a></div><div class="ttdeci">bool initialiseFilter(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7a/ekf_8cpp_source.html#l00152">ekf.cpp:152</a></div></div>
<div class="ttc" id="class_ekf_html_a8c9fb4e5919264cdf44c8e940c488443"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a8c9fb4e5919264cdf44c8e940c488443">Ekf::initialiseQuatCovariances</a></div><div class="ttdeci">void initialiseQuatCovariances(Vector3f &amp;rot_vec_var)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01433">ekf_helper.cpp:1433</a></div></div>
<div class="ttc" id="class_ekf_html_a8ca7e1028dd6a193acb64631036ee757"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a8ca7e1028dd6a193acb64631036ee757">Ekf::resetGpsAntYaw</a></div><div class="ttdeci">bool resetGpsAntYaw()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de9/gps__yaw__fusion_8cpp_source.html#l00293">gps_yaw_fusion.cpp:293</a></div></div>
<div class="ttc" id="class_ekf_html_af22a997424d81abaaaf7be408bb5327b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af22a997424d81abaaaf7be408bb5327b">Ekf::_dt_update</a></div><div class="ttdeci">float _dt_update</div><div class="ttdoc">delta time since last ekf update. This time can be used for filters which run at the same rate as the...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00286">ekf.h:286</a></div></div>
<div class="ttc" id="class_ekf_html_a0aa7c5efd6c432fd43d59ed0db74ffaa"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0aa7c5efd6c432fd43d59ed0db74ffaa">Ekf::velD_change</a></div><div class="ttdeci">float velD_change</div><div class="ttdoc">Down velocity change due to last reset (m/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00279">ekf.h:279</a></div></div>
<div class="ttc" id="class_ekf_html_a771d6c2925a6f37cf0f5af4701750f88"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a771d6c2925a6f37cf0f5af4701750f88">Ekf::_saved_mag_ef_covmat</a></div><div class="ttdeci">float _saved_mag_ef_covmat[2][2]</div><div class="ttdoc">NE magnetic field state covariance sub-matrix saved for use at the next initialisation (Gauss**2) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00444">ekf.h:444</a></div></div>
<div class="ttc" id="_arm_authorization_8cpp_html_af06c723c3b5220b3ef9839275a0cf051"><div class="ttname"><a href="../../d3/dc0/_arm_authorization_8cpp.html#af06c723c3b5220b3ef9839275a0cf051">state</a></div><div class="ttdeci">static enum @74 state</div></div>
<div class="ttc" id="class_ekf_html_a8b687c82c5dfbdeebae02685783fc2ef"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a8b687c82c5dfbdeebae02685783fc2ef">Ekf::setControlGPSHeight</a></div><div class="ttdeci">void setControlGPSHeight()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01563">ekf_helper.cpp:1563</a></div></div>
<div class="ttc" id="class_ekf_html_a18c3d06267632079171bf22649dd343e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a18c3d06267632079171bf22649dd343e">Ekf::_ev_rot_last_time_us</a></div><div class="ttdeci">uint64_t _ev_rot_last_time_us</div><div class="ttdoc">previous time that the calculation of the EV to EKF rotation matrix was updated (uSec) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00313">ekf.h:313</a></div></div>
<div class="ttc" id="class_ekf_html_aa0da930e5979a051b2336c4e464af5ec"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa0da930e5979a051b2336c4e464af5ec">Ekf::calculate_quaternion</a></div><div class="ttdeci">Quatf calculate_quaternion() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7a/ekf_8cpp_source.html#l00680">ekf.cpp:680</a></div></div>
<div class="ttc" id="class_ekf_html_a811d13238bb8d2fd5d1e669e443a55bc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a811d13238bb8d2fd5d1e669e443a55bc">Ekf::_yaw_rate_lpf_ef</a></div><div class="ttdeci">float _yaw_rate_lpf_ef</div><div class="ttdoc">Filtered angular rate about earth frame D axis (rad/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00353">ekf.h:353</a></div></div>
<div class="ttc" id="class_ekf_html_aabb8e6ed59b04c33697c3a5105825f98"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aabb8e6ed59b04c33697c3a5105825f98">Ekf::resetMagHeading</a></div><div class="ttdeci">bool resetMagHeading(const Vector3f &amp;mag_init, bool increase_yaw_var=true, bool update_buffer=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00554">ekf_helper.cpp:554</a></div></div>
<div class="ttc" id="class_ekf_html_ac9be4a8a86dc2398d6b9a053ae8ac472"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac9be4a8a86dc2398d6b9a053ae8ac472">Ekf::checkMagBiasObservability</a></div><div class="ttdeci">void checkMagBiasObservability()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00209">mag_control.cpp:209</a></div></div>
<div class="ttc" id="class_ekf_html_a72747ac3528a51934b9fa60283e0a9e5"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a72747ac3528a51934b9fa60283e0a9e5">Ekf::_saved_mag_bf_variance</a></div><div class="ttdeci">float _saved_mag_bf_variance[4]</div><div class="ttdoc">magnetic field state variances that have been saved for use at the next initialisation (Gauss**2) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00443">ekf.h:443</a></div></div>
<div class="ttc" id="class_ekf_html_af8c72fef6bd53ba62d8b49578be035e6"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af8c72fef6bd53ba62d8b49578be035e6">Ekf::get_ekf_origin</a></div><div class="ttdeci">bool get_ekf_origin(uint64_t *origin_time, map_projection_reference_s *origin_pos, float *origin_alt) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00959">ekf_helper.cpp:959</a></div></div>
<div class="ttc" id="class_ekf_html_a741954791da1a860d0ac96dc86181d0b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a741954791da1a860d0ac96dc86181d0b">Ekf::_vel_pos_innov</a></div><div class="ttdeci">float _vel_pos_innov[6]</div><div class="ttdoc">NED velocity and position innovations: 0-2 vel (m/sec), 3-5 pos (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00372">ekf.h:372</a></div></div>
<div class="ttc" id="class_ekf_html_a1f2c5a313e0882bca2fcf4481315a994"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a1f2c5a313e0882bca2fcf4481315a994">Ekf::controlBaroFusion</a></div><div class="ttdeci">void controlBaroFusion()</div></div>
<div class="ttc" id="class_ekf_html_aa73a3299bd9b9975e268bca91b385aae"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa73a3299bd9b9975e268bca91b385aae">Ekf::runOnGroundYawReset</a></div><div class="ttdeci">void runOnGroundYawReset()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00133">mag_control.cpp:133</a></div></div>
<div class="ttc" id="class_ekf_html_a9cd4984bf21090bc609aff6391edff08"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9cd4984bf21090bc609aff6391edff08">Ekf::shouldInhibitMag</a></div><div class="ttdeci">bool shouldInhibitMag() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00269">mag_control.cpp:269</a></div></div>
<div class="ttc" id="class_ekf_html_a154155cff71c61b399aef0e63aacff31"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a154155cff71c61b399aef0e63aacff31">Ekf::get_state_delayed</a></div><div class="ttdeci">void get_state_delayed(float *state) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00902">ekf_helper.cpp:902</a></div></div>
<div class="ttc" id="class_ekf_html_a82deeeb3662e1eed7fc1d4512cddeb86"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a82deeeb3662e1eed7fc1d4512cddeb86">Ekf::get_heading_innov</a></div><div class="ttdeci">void get_heading_innov(float *heading_innov) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00859">ekf_helper.cpp:859</a></div></div>
<div class="ttc" id="namespacematrix_html_a173f74e26b3f3c817ed4bfa86fc1e8e0"><div class="ttname"><a href="../../d0/de4/namespacematrix.html#a173f74e26b3f3c817ed4bfa86fc1e8e0">matrix::Dcmf</a></div><div class="ttdeci">Dcm&lt; float &gt; Dcmf</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/_dcm_8hpp_source.html#l00185">Dcm.hpp:185</a></div></div>
<div class="ttc" id="class_ekf_html_a6eefdb491c045a48690a637dceafe041"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6eefdb491c045a48690a637dceafe041">Ekf::get_pos_var</a></div><div class="ttdeci">void get_pos_var(Vector3f &amp;pos_var) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d38/covariance_8cpp_source.html#l00121">covariance.cpp:121</a></div></div>
<div class="ttc" id="class_ekf_html_adc0aa40b7378a773a7d5eb559e6edce2"><div class="ttname"><a href="../../dc/d66/class_ekf.html#adc0aa40b7378a773a7d5eb559e6edce2">Ekf::_last_static_yaw</a></div><div class="ttdeci">float _last_static_yaw</div><div class="ttdoc">last yaw angle recorded when on ground motion checks were passing (rad) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00362">ekf.h:362</a></div></div>
<div class="ttc" id="class_ekf_html_af41b850db61f2ba2fa543fe3cb805d6f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af41b850db61f2ba2fa543fe3cb805d6f">Ekf::_mag_yaw_reset_req</a></div><div class="ttdeci">bool _mag_yaw_reset_req</div><div class="ttdoc">true when a reset of the yaw using the magnetometer data has been requested </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00363">ekf.h:363</a></div></div>
<div class="ttc" id="class_ekf_html_a07e33d3291ac3ed2b7a35b2b62e0c133"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a07e33d3291ac3ed2b7a35b2b62e0c133">Ekf::_hpos_pred_prev</a></div><div class="ttdeci">Vector2f _hpos_pred_prev</div><div class="ttdoc">previous value of NE position state used by odometry fusion (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00309">ekf.h:309</a></div></div>
<div class="ttc" id="class_ekf_html_af6f96eca2db76f0a952f923d29f1b26d"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af6f96eca2db76f0a952f923d29f1b26d">Ekf::_synthetic_mag_z_active</a></div><div class="ttdeci">bool _synthetic_mag_z_active</div><div class="ttdoc">true if we are generating synthetic magnetometer Z measurements </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00365">ekf.h:365</a></div></div>
<div class="ttc" id="class_ekf_html_abeb8be4c6b1348e89d14a43b3db3c075"><div class="ttname"><a href="../../dc/d66/class_ekf.html#abeb8be4c6b1348e89d14a43b3db3c075">Ekf::updateTerrainValidity</a></div><div class="ttdeci">void updateTerrainValidity()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d47/ecl_2_e_k_f_2terrain__estimator_8cpp_source.html#l00292">terrain_estimator.cpp:292</a></div></div>
<div class="ttc" id="class_ekf_html_ae6eb7f3370b0859fed80529409c72f5f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ae6eb7f3370b0859fed80529409c72f5f">Ekf::_gps_alt_ref</a></div><div class="ttdeci">float _gps_alt_ref</div><div class="ttdoc">WGS-84 height (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00425">ekf.h:425</a></div></div>
<div class="ttc" id="class_ekf_html_aec0b89a9fced97190f4c760a0b3981ae"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aec0b89a9fced97190f4c760a0b3981ae">Ekf::posNE_counter</a></div><div class="ttdeci">uint8_t posNE_counter</div><div class="ttdoc">number of horizontal position reset events (allow to wrap if count exceeds 255) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00275">ekf.h:275</a></div></div>
<div class="ttc" id="class_ekf_html_a6b0a16c7c95041154060d34e560f90df"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6b0a16c7c95041154060d34e560f90df">Ekf::get_true_airspeed</a></div><div class="ttdeci">void get_true_airspeed(float *tas) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db6/airspeed__fusion_8cpp_source.html#l00251">airspeed_fusion.cpp:251</a></div></div>
<div class="ttc" id="class_ekf_html_a4ec80dc0d08bdacdb4cb321af13a9b9c"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a4ec80dc0d08bdacdb4cb321af13a9b9c">Ekf::_delta_vel_bias_var_accum</a></div><div class="ttdeci">Vector3f _delta_vel_bias_var_accum</div><div class="ttdoc">kahan summation algorithm accumulator for delta velocity bias variance </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00369">ekf.h:369</a></div></div>
<div class="ttc" id="class_ekf_html_a28f4cac591729e574ac2b421bb8d4d5c"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a28f4cac591729e574ac2b421bb8d4d5c">Ekf::_last_imu_bias_cov_reset_us</a></div><div class="ttdeci">uint64_t _last_imu_bias_cov_reset_us</div><div class="ttdoc">time the last reset of IMU delta angle and velocity state covariances was performed (uSec) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00344">ekf.h:344</a></div></div>
<div class="ttc" id="class_ekf_html_a2821776b166e78871ef9f7eac8838457"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a2821776b166e78871ef9f7eac8838457">Ekf::_yaw_delta_ef</a></div><div class="ttdeci">float _yaw_delta_ef</div><div class="ttdoc">Recent change in yaw angle measured about the earth frame D axis (rad) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00352">ekf.h:352</a></div></div>
<div class="ttc" id="class_ekf_html_a74992c47707b497466659bb7cb9e77eb"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a74992c47707b497466659bb7cb9e77eb">Ekf::controlHeightSensorTimeouts</a></div><div class="ttdeci">void controlHeightSensorTimeouts()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l00762">control.cpp:762</a></div></div>
<div class="ttc" id="class_ekf_html_a6fc55317d849254e304c4aad73345506"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6fc55317d849254e304c4aad73345506">Ekf::_min_gps_health_time_us</a></div><div class="ttdeci">uint32_t _min_gps_health_time_us</div><div class="ttdoc">GPS is marked as healthy only after this amount of time. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00420">ekf.h:420</a></div></div>
<div class="ttc" id="class_ekf_html_aeb821726b265b4f45fb34e6256e0284b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aeb821726b265b4f45fb34e6256e0284b">Ekf::get_terrain_var</a></div><div class="ttdeci">float get_terrain_var() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00211">ekf.h:211</a></div></div>
<div class="ttc" id="class_ekf_html_a130cd4a116ce168764865b2436cd1465"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a130cd4a116ce168764865b2436cd1465">Ekf::get_gyro_bias</a></div><div class="ttdeci">void get_gyro_bias(float bias[3]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00948">ekf_helper.cpp:948</a></div></div>
<div class="ttc" id="class_ekf_html_a0268d0e1335a60952fa8bb722f821674"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0268d0e1335a60952fa8bb722f821674">Ekf::resetVelocity</a></div><div class="ttdeci">bool resetVelocity()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00050">ekf_helper.cpp:50</a></div></div>
<div class="ttc" id="class_ekf_html_ab0e22396659807e0f62be0ebc3058009"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab0e22396659807e0f62be0ebc3058009">Ekf::_imu_del_ang_of</a></div><div class="ttdeci">Vector3f _imu_del_ang_of</div><div class="ttdoc">bias corrected delta angle measurements accumulated across the same time frame as the optical flow ra...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00395">ekf.h:395</a></div></div>
<div class="ttc" id="class_ekf_html_a5d30376fa415773e9f477b012ecc522f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5d30376fa415773e9f477b012ecc522f">Ekf::updateRangeDataContinuity</a></div><div class="ttdeci">void updateRangeDataContinuity()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d95/range__finder__checks_8cpp_source.html#l00044">range_finder_checks.cpp:44</a></div></div>
<div class="ttc" id="class_ekf_html_a278a65a7d1b0a4fa8d02a25883482b3b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a278a65a7d1b0a4fa8d02a25883482b3b">Ekf::_heading_innov_var</a></div><div class="ttdeci">float _heading_innov_var</div><div class="ttdoc">heading measurement innovation variance (rad**2) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00389">ekf.h:389</a></div></div>
<div class="ttc" id="class_ekf_html_a198de67548c5407f0bbccc62f888c2b8"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a198de67548c5407f0bbccc62f888c2b8">Ekf::controlOpticalFlowFusion</a></div><div class="ttdeci">void controlOpticalFlowFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l00422">control.cpp:422</a></div></div>
<div class="ttc" id="class_ekf_html_ae6bc4a65c6605547f3a7570d1060ff0f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ae6bc4a65c6605547f3a7570d1060ff0f">Ekf::selectMagAuto</a></div><div class="ttdeci">void selectMagAuto()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00181">mag_control.cpp:181</a></div></div>
<div class="ttc" id="class_ekf_html_a921384ecaa7912d4803add15c8d1b2e8"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a921384ecaa7912d4803add15c8d1b2e8">Ekf::runVelPosReset</a></div><div class="ttdeci">void runVelPosReset()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00172">mag_control.cpp:172</a></div></div>
<div class="ttc" id="class_ekf_html_afb41649747b69caedaa32d4c3d414342"><div class="ttname"><a href="../../dc/d66/class_ekf.html#afb41649747b69caedaa32d4c3d414342">Ekf::_accel_lpf_NE</a></div><div class="ttdeci">Vector2f _accel_lpf_NE</div><div class="ttdoc">Low pass filtered horizontal earth frame acceleration (m/sec**2) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00351">ekf.h:351</a></div></div>
<div class="ttc" id="class_ekf_html_a4fb97af3133b0f90b205c85424dca180"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a4fb97af3133b0f90b205c85424dca180">Ekf::canRunMagFusion</a></div><div class="ttdeci">bool canRunMagFusion() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00108">mag_control.cpp:108</a></div></div>
<div class="ttc" id="class_ekf_html_a0b437744d93a2c98c04b940e1a971567"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0b437744d93a2c98c04b940e1a971567">Ekf::_flow_for_terrain_data_ready</a></div><div class="ttdeci">bool _flow_for_terrain_data_ready</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00324">ekf.h:324</a></div></div>
<div class="ttc" id="class_ekf_html_aa6284f74a392c2b1e1a8293b71911118"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa6284f74a392c2b1e1a8293b71911118">Ekf::get_output_tracking_error</a></div><div class="ttdeci">void get_output_tracking_error(float error[3]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00969">ekf_helper.cpp:969</a></div></div>
<div class="ttc" id="class_ekf_html_a17ab887585a9635fe818a9a016b5349b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a17ab887585a9635fe818a9a016b5349b">Ekf::_ev_rot_mat_initialised</a></div><div class="ttdeci">bool _ev_rot_mat_initialised</div><div class="ttdoc">_ev_rot_mat should only be initialised once in the beginning through the reset function ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00314">ekf.h:314</a></div></div>
<div class="ttc" id="class_ekf_html_a19375f61dfab2c45b8cc12abdea1e559"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a19375f61dfab2c45b8cc12abdea1e559">Ekf::_time_bad_rng_signal_quality</a></div><div class="ttdeci">uint64_t _time_bad_rng_signal_quality</div><div class="ttdoc">timestamp at which range finder signal quality was 0 (used for hysteresis) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00474">ekf.h:474</a></div></div>
<div class="ttc" id="class_ekf_html_a684322f4439c1f80a6dc36ea04c9a4c9"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a684322f4439c1f80a6dc36ea04c9a4c9">Ekf::_last_gps_pass_us</a></div><div class="ttdeci">uint64_t _last_gps_pass_us</div><div class="ttdoc">last system time in usec that the GPS passed it&amp;#39;s checks </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00418">ekf.h:418</a></div></div>
<div class="ttc" id="class_ekf_html_a67af914ab13e31777c6bae86d86311ac"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a67af914ab13e31777c6bae86d86311ac">Ekf::_hgt_sensor_offset</a></div><div class="ttdeci">float _hgt_sensor_offset</div><div class="ttdoc">set as necessary if desired to maintain the same height after a height reset (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00435">ekf.h:435</a></div></div>
<div class="ttc" id="class_ekf_html_a7a652cc1975298c65863dd510840aff1"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a7a652cc1975298c65863dd510840aff1">Ekf::_drag_innov</a></div><div class="ttdeci">float _drag_innov[2]</div><div class="ttdoc">multirotor drag measurement innovation (m/sec**2) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00385">ekf.h:385</a></div></div>
<div class="ttc" id="class_ekf_html_a796067c4430935264feaaa274bf0a455"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a796067c4430935264feaaa274bf0a455">Ekf::_last_gps_origin_time_us</a></div><div class="ttdeci">uint64_t _last_gps_origin_time_us</div><div class="ttdoc">true when all active GPS checks have passed </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00424">ekf.h:424</a></div></div>
<div class="ttc" id="class_ekf_html_a08c475cc3e0d978431224937eb310f99"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a08c475cc3e0d978431224937eb310f99">Ekf::fuseSideslip</a></div><div class="ttdeci">void fuseSideslip()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d93/sideslip__fusion_8cpp_source.html#l00047">sideslip_fusion.cpp:47</a></div></div>
<div class="ttc" id="class_ekf_html_a58136f4f35684f59a941d560e12cd4cd"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a58136f4f35684f59a941d560e12cd4cd">Ekf::get_drag_innov_var</a></div><div class="ttdeci">void get_drag_innov_var(float drag_innov_var[2]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d01/optflow__fusion_8cpp_source.html#l00535">optflow_fusion.cpp:535</a></div></div>
<div class="ttc" id="class_alpha_filter_html"><div class="ttname"><a href="../../dc/d8f/class_alpha_filter.html">AlphaFilter&lt; Vector3f &gt;</a></div></div>
<div class="ttc" id="class_ekf_html_a2ddbf464da9e537669e42d43405bc67a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a2ddbf464da9e537669e42d43405bc67a">Ekf::_flow_gyro_bias</a></div><div class="ttdeci">Vector3f _flow_gyro_bias</div><div class="ttdoc">bias errors in optical flow sensor rate gyro outputs (rad/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00394">ekf.h:394</a></div></div>
<div class="ttc" id="class_ekf_html_ab13c9c5ebc66ce3aa0e53bba73350401"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab13c9c5ebc66ce3aa0e53bba73350401">Ekf::get_mag_innov_var</a></div><div class="ttdeci">void get_mag_innov_var(float mag_innov_var[3]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00872">ekf_helper.cpp:872</a></div></div>
<div class="ttc" id="class_ekf_html_a8631e0737f7fce3744dd99af8f71d25d"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a8631e0737f7fce3744dd99af8f71d25d">Ekf::controlBetaFusion</a></div><div class="ttdeci">void controlBetaFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l01242">control.cpp:1242</a></div></div>
<div class="ttc" id="class_ekf_html_a39e266caf9178e9c60950122c8bdb323"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a39e266caf9178e9c60950122c8bdb323">Ekf::initialiseCovariance</a></div><div class="ttdeci">void initialiseCovariance()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d38/covariance_8cpp_source.html#l00049">covariance.cpp:49</a></div></div>
<div class="ttc" id="class_ekf_html_a74a3e3a8ac14ae14d05d20b925e4c6e7"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a74a3e3a8ac14ae14d05d20b925e4c6e7">Ekf::_fuse_hpos_as_odom</a></div><div class="ttdeci">bool _fuse_hpos_as_odom</div><div class="ttdoc">true when the NE position data is being fused using an odometry assumption </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00307">ekf.h:307</a></div></div>
<div class="ttc" id="class_estimator_interface_html"><div class="ttname"><a href="../../d5/d73/class_estimator_interface.html">EstimatorInterface</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/estimator__interface_8h_source.html#l00055">estimator_interface.h:55</a></div></div>
<div class="ttc" id="class_ekf_html_a4aeac9aaeef543b77c23947bae5607bd"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a4aeac9aaeef543b77c23947bae5607bd">Ekf::fuseAirspeed</a></div><div class="ttdeci">void fuseAirspeed()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db6/airspeed__fusion_8cpp_source.html#l00047">airspeed_fusion.cpp:47</a></div></div>
<div class="ttc" id="class_ekf_html_ad58b299ddfb88b3fa03a055b08a8a58d"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad58b299ddfb88b3fa03a055b08a8a58d">Ekf::_rng_stuck_max_val</a></div><div class="ttdeci">float _rng_stuck_max_val</div><div class="ttdoc">maximum value for new rng measurement when being stuck </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00487">ekf.h:487</a></div></div>
<div class="ttc" id="class_ekf_html_abf55908e0801ac25008de1e254a4135e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#abf55908e0801ac25008de1e254a4135e">Ekf::_delta_angle_bias_var_accum</a></div><div class="ttdeci">Vector3f _delta_angle_bias_var_accum</div><div class="ttdoc">kahan summation algorithm accumulator for delta angle bias variance </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00370">ekf.h:370</a></div></div>
<div class="ttc" id="class_ekf_html_a508df454896d82f65f3e8daae19159dd"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a508df454896d82f65f3e8daae19159dd">Ekf::kahanSummation</a></div><div class="ttdeci">float kahanSummation(float sum_previous, float input, float &amp;accumulator) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01762">ekf_helper.cpp:1762</a></div></div>
<div class="ttc" id="class_ekf_html_a562a5313172ecf727fcced923a07528f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a562a5313172ecf727fcced923a07528f">Ekf::_terrain_var</a></div><div class="ttdeci">float _terrain_var</div><div class="ttdoc">variance of terrain position estimate (m**2) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00458">ekf.h:458</a></div></div>
<div class="ttc" id="class_ekf_html_adbe4e50f47ab3a25c2f465fc9b66b635"><div class="ttname"><a href="../../dc/d66/class_ekf.html#adbe4e50f47ab3a25c2f465fc9b66b635">Ekf::_mag_decl_cov_reset</a></div><div class="ttdeci">bool _mag_decl_cov_reset</div><div class="ttdoc">true after the fuseDeclination() function has been used to modify the earth field covariances after a...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00364">ekf.h:364</a></div></div>
<div class="ttc" id="class_ekf_html_a999d2ee6ba6c99901f9de895101d68b2"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a999d2ee6ba6c99901f9de895101d68b2">Ekf::resetWindStates</a></div><div class="ttdeci">void resetWindStates()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db6/airspeed__fusion_8cpp_source.html#l00260">airspeed_fusion.cpp:260</a></div></div>
<div class="ttc" id="class_ekf_html_a5e605b54fba2fa27b0ccaa14bb867e02"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5e605b54fba2fa27b0ccaa14bb867e02">Ekf::_last_gps_fail_us</a></div><div class="ttdeci">uint64_t _last_gps_fail_us</div><div class="ttdoc">last system time in usec that the GPS failed it&amp;#39;s checks </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00417">ekf.h:417</a></div></div>
<div class="ttc" id="classmatrix_1_1_square_matrix_html"><div class="ttname"><a href="../../d4/d6e/classmatrix_1_1_square_matrix.html">matrix::SquareMatrix</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5f/_square_matrix_8hpp_source.html#l00026">SquareMatrix.hpp:26</a></div></div>
<div class="ttc" id="class_ekf_html_a54621e0a885dc41a71820a64cae0b13f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a54621e0a885dc41a71820a64cae0b13f">Ekf::zeroMagCov</a></div><div class="ttdeci">void zeroMagCov()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d38/covariance_8cpp_source.html#l00923">covariance.cpp:923</a></div></div>
<div class="ttc" id="class_ekf_html_aaebc9bd7ff8a168b0fcecdaf0ebd8a91"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aaebc9bd7ff8a168b0fcecdaf0ebd8a91">Ekf::controlDragFusion</a></div><div class="ttdeci">void controlDragFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l01276">control.cpp:1276</a></div></div>
<div class="ttc" id="class_ekf_html_aadb9b481c324a568c7ad7247ece0635f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aadb9b481c324a568c7ad7247ece0635f">Ekf::_fuse_vert_vel</a></div><div class="ttdeci">bool _fuse_vert_vel</div><div class="ttdoc">true when gps vertical velocity measurement should be fused </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00296">ekf.h:296</a></div></div>
<div class="ttc" id="class_ekf_html_a7fd160ae7d8e35ec754f0dce8c5d8153"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a7fd160ae7d8e35ec754f0dce8c5d8153">Ekf::gps_is_good</a></div><div class="ttdeci">bool gps_is_good(const gps_message &amp;gps)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/ddc/gps__checks_8cpp_source.html#l00116">gps_checks.cpp:116</a></div></div>
<div class="ttc" id="class_ekf_html_a0f152a43b10cf4990c2f8d95e8927dda"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0f152a43b10cf4990c2f8d95e8927dda">Ekf::_gps_velE_filt</a></div><div class="ttdeci">float _gps_velE_filt</div><div class="ttdoc">GPS filtered East velocity (m/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00416">ekf.h:416</a></div></div>
<div class="ttc" id="class_ekf_html_aafc973511c85e2645fbb71c48d67bd0b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aafc973511c85e2645fbb71c48d67bd0b">Ekf::get_imu_vibe_metrics</a></div><div class="ttdeci">void get_imu_vibe_metrics(float vibe[3]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00980">ekf_helper.cpp:980</a></div></div>
<div class="ttc" id="class_ekf_html_ae320167eb2316dd746f4efe919b5aee6"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ae320167eb2316dd746f4efe919b5aee6">Ekf::fuseGpsAntYaw</a></div><div class="ttdeci">void fuseGpsAntYaw()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de9/gps__yaw__fusion_8cpp_source.html#l00048">gps_yaw_fusion.cpp:48</a></div></div>
<div class="ttc" id="class_ekf_html_a2f27f0db37995c7c8e7e02b40ffb41b2"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a2f27f0db37995c7c8e7e02b40ffb41b2">Ekf::checkRangeAidSuitability</a></div><div class="ttdeci">void checkRangeAidSuitability()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l01166">control.cpp:1166</a></div></div>
<div class="ttc" id="class_ekf_html_a3062061166cfd16a93007f8120947657"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3062061166cfd16a93007f8120947657">Ekf::_mag_innov</a></div><div class="ttdeci">float _mag_innov[3]</div><div class="ttdoc">earth magnetic field innovations (Gauss) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00376">ekf.h:376</a></div></div>
<div class="ttc" id="class_ekf_html_afae4a156deb83b64743ecfd1783585b1"><div class="ttname"><a href="../../dc/d66/class_ekf.html#afae4a156deb83b64743ecfd1783585b1">Ekf::get_flow_innov_var</a></div><div class="ttdeci">void get_flow_innov_var(float flow_innov_var[2]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d01/optflow__fusion_8cpp_source.html#l00524">optflow_fusion.cpp:524</a></div></div>
<div class="ttc" id="class_ekf_html_a295fbf4a20e58e2df01a9370bc50ac76"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a295fbf4a20e58e2df01a9370bc50ac76">Ekf::_range_aid_mode_selected</a></div><div class="ttdeci">bool _range_aid_mode_selected</div><div class="ttdoc">true when range finder is being used as the height reference instead of the primary height sensor ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00483">ekf.h:483</a></div></div>
<div class="ttc" id="class_ekf_html_aedc00bc6e14815fbb195ba0e7a8dcc73"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aedc00bc6e14815fbb195ba0e7a8dcc73">Ekf::_imu_down_sampled</a></div><div class="ttdeci">imuSample _imu_down_sampled</div><div class="ttdoc">down sampled imu data (sensor rate -&gt; filter update rate) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00404">ekf.h:404</a></div></div>
<div class="ttc" id="class_ekf_html_a59f137c1049591a6b2c74c2446c71475"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a59f137c1049591a6b2c74c2446c71475">Ekf::collect_gps</a></div><div class="ttdeci">bool collect_gps(const gps_message &amp;gps) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/ddc/gps__checks_8cpp_source.html#l00059">gps_checks.cpp:59</a></div></div>
<div class="ttc" id="class_ekf_html_ac30a1e5acf2d34f872dff5f35073305e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac30a1e5acf2d34f872dff5f35073305e">Ekf::posNE_change</a></div><div class="ttdeci">Vector2f posNE_change</div><div class="ttdoc">North, East position change due to last reset (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00280">ekf.h:280</a></div></div>
<div class="ttc" id="class_ekf_html_a21e25b3a6efdb7ecaf04e4e3ebe53869"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a21e25b3a6efdb7ecaf04e4e3ebe53869">Ekf::P</a></div><div class="ttdeci">float P[_k_num_states][_k_num_states]</div><div class="ttdoc">state covariance matrix </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00367">ekf.h:367</a></div></div>
<div class="ttc" id="class_ekf_html_a2f993c2bcec8bc8b9bb3bf92a26cf6e0"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a2f993c2bcec8bc8b9bb3bf92a26cf6e0">Ekf::_time_good_vert_accel</a></div><div class="ttdeci">uint64_t _time_good_vert_accel</div><div class="ttdoc">last time a good vertical accel was detected (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00478">ekf.h:478</a></div></div>
<div class="ttc" id="class_ekf_html_ab6f0ea500984e57fa1d6ef2f5b0a82e8"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab6f0ea500984e57fa1d6ef2f5b0a82e8">Ekf::_time_bad_motion_us</a></div><div class="ttdeci">uint64_t _time_bad_motion_us</div><div class="ttdoc">last system time that on-ground motion exceeded limits (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00397">ekf.h:397</a></div></div>
<div class="ttc" id="class_ekf_html_a421983af018ca82e2c5c0ba3fa5ad769"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a421983af018ca82e2c5c0ba3fa5ad769">Ekf::zeroCols</a></div><div class="ttdeci">void zeroCols(float(&amp;cov_mat)[_k_num_states][_k_num_states], uint8_t first, uint8_t last)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01249">ekf_helper.cpp:1249</a></div></div>
<div class="ttc" id="class_ekf_html_a28dbba42e1fc4d370b6405f99b62b043"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a28dbba42e1fc4d370b6405f99b62b043">Ekf::_time_last_mag</a></div><div class="ttdeci">uint64_t _time_last_mag</div><div class="ttdoc">measurement time of last magnetomter sample (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00432">ekf.h:432</a></div></div>
<div class="ttc" id="class_ekf_html_a6e7b668998c21ebc814242ce304f59a5"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6e7b668998c21ebc814242ce304f59a5">Ekf::isMeasuredMatchingExpected</a></div><div class="ttdeci">static bool isMeasuredMatchingExpected(float measured, float expected, float gate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00317">mag_control.cpp:317</a></div></div>
<div class="ttc" id="class_ekf_html_ad45e69a060a10b6e376155f69001c73c"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad45e69a060a10b6e376155f69001c73c">Ekf::get_wind_velocity</a></div><div class="ttdeci">void get_wind_velocity(float *wind) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db6/airspeed__fusion_8cpp_source.html#l00239">airspeed_fusion.cpp:239</a></div></div>
<div class="ttc" id="class_ekf_html_afef49e9a605195c4233469f9f5954eb7"><div class="ttname"><a href="../../dc/d66/class_ekf.html#afef49e9a605195c4233469f9f5954eb7">Ekf::_time_last_rng_ready</a></div><div class="ttdeci">uint64_t _time_last_rng_ready</div><div class="ttdoc">time the last range finder measurement was ready (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00337">ekf.h:337</a></div></div>
<div class="ttc" id="class_ekf_html_a296928902b9783f5f605ff5993cb7df5"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a296928902b9783f5f605ff5993cb7df5">Ekf::_mag_inhibit_yaw_reset_req</a></div><div class="ttdeci">bool _mag_inhibit_yaw_reset_req</div><div class="ttdoc">true when magnetometer inhibit has been active for long enough to require a yaw reset when conditions...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00361">ekf.h:361</a></div></div>
<div class="ttc" id="class_ekf_html_a6aab86464a2a3e93ee17fc05ded4a241"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6aab86464a2a3e93ee17fc05ded4a241">Ekf::calcExtVisRotMat</a></div><div class="ttdeci">void calcExtVisRotMat()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01620">ekf_helper.cpp:1620</a></div></div>
<div class="ttc" id="class_ekf_html_ab032c45aa539ecd512d7e539bbbf38fd"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab032c45aa539ecd512d7e539bbbf38fd">Ekf::checkMagFieldStrength</a></div><div class="ttdeci">void checkMagFieldStrength()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00285">mag_control.cpp:285</a></div></div>
<div class="ttc" id="class_ekf_html_add9f94883d2738c2fdeee5d2a12521fc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#add9f94883d2738c2fdeee5d2a12521fc">Ekf::collect_imu</a></div><div class="ttdeci">bool collect_imu(const imuSample &amp;imu) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7a/ekf_8cpp_source.html#l00378">ekf.cpp:378</a></div></div>
<div class="ttc" id="class_ekf_html_a2b3ef7b330f70897b858b988ab7c4d3b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a2b3ef7b330f70897b858b988ab7c4d3b">Ekf::_terrain_vpos</a></div><div class="ttdeci">float _terrain_vpos</div><div class="ttdoc">estimated vertical position of the terrain underneath the vehicle in local NED frame (m) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00457">ekf.h:457</a></div></div>
<div class="ttc" id="class_ekf_html_a2faabb864bd1d12572a072e3a5330603"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a2faabb864bd1d12572a072e3a5330603">Ekf::_rng_stuck_min_val</a></div><div class="ttdeci">float _rng_stuck_min_val</div><div class="ttdoc">minimum value for new rng measurement when being stuck </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00486">ekf.h:486</a></div></div>
<div class="ttc" id="class_ekf_html_a377a013ac564e0273ab17137ead8cbcb"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a377a013ac564e0273ab17137ead8cbcb">Ekf::_accel_bias_inhibit</a></div><div class="ttdeci">bool _accel_bias_inhibit</div><div class="ttdoc">true when the accel bias learning is being inhibited </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00450">ekf.h:450</a></div></div>
<div class="ttc" id="class_ekf_html_ad197d08be191c1b385ff51793bf619ba"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad197d08be191c1b385ff51793bf619ba">Ekf::_heading_innov</a></div><div class="ttdeci">float _heading_innov</div><div class="ttdoc">heading measurement innovation (rad) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00388">ekf.h:388</a></div></div>
<div class="ttc" id="class_ekf_html_a65fd9532bbb45027c99a0d36a460feee"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a65fd9532bbb45027c99a0d36a460feee">Ekf::_time_last_of_fuse</a></div><div class="ttdeci">uint64_t _time_last_of_fuse</div><div class="ttdoc">time the last fusion of optical flow measurements were performed (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00334">ekf.h:334</a></div></div>
<div class="ttc" id="class_ekf_html_abce5be2bb91286381af9c86e7a801ea1"><div class="ttname"><a href="../../dc/d66/class_ekf.html#abce5be2bb91286381af9c86e7a801ea1">Ekf::_time_last_hgt_fuse</a></div><div class="ttdeci">uint64_t _time_last_hgt_fuse</div><div class="ttdoc">time the last fusion of height measurements was performed (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00333">ekf.h:333</a></div></div>
<div class="ttc" id="class_ekf_html_a47019547f568a177737a552ac1f209ac"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a47019547f568a177737a552ac1f209ac">Ekf::_imu_collection_time_adj</a></div><div class="ttdeci">float _imu_collection_time_adj</div><div class="ttdoc">the amount of time the IMU collection needs to be advanced to meet the target set by FILTER_UPDATE_PE...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00339">ekf.h:339</a></div></div>
<div class="ttc" id="class_ekf_html_a500635927248bc989ffe08871dc4cc7f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a500635927248bc989ffe08871dc4cc7f">Ekf::_hagl_innov_var</a></div><div class="ttdeci">float _hagl_innov_var</div><div class="ttdoc">innovation variance for the last height above terrain measurement (m**2) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00460">ekf.h:460</a></div></div>
<div class="ttc" id="class_ekf_html_a43b43d423a1c6d45dc4cf6de7fe3bdfe"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a43b43d423a1c6d45dc4cf6de7fe3bdfe">Ekf::resetMagRelatedCovariances</a></div><div class="ttdeci">void resetMagRelatedCovariances()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d38/covariance_8cpp_source.html#l00899">covariance.cpp:899</a></div></div>
<div class="ttc" id="class_ekf_html_a8a167edfb8ae0887a7f965b6876ea422"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a8a167edfb8ae0887a7f965b6876ea422">Ekf::saveMagCovData</a></div><div class="ttdeci">void saveMagCovData()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01733">ekf_helper.cpp:1733</a></div></div>
<div class="ttc" id="class_ekf_html_a2d3212673e6d04d6c8e7bb50254428ef"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a2d3212673e6d04d6c8e7bb50254428ef">Ekf::posD_change</a></div><div class="ttdeci">float posD_change</div><div class="ttdoc">Down position change due to last reset (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00281">ekf.h:281</a></div></div>
<div class="ttc" id="class_ekf_html_a83ac4e7952563683069107eaea8825a8"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a83ac4e7952563683069107eaea8825a8">Ekf::getMagDeclination</a></div><div class="ttdeci">float getMagDeclination()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00750">ekf_helper.cpp:750</a></div></div>
<div class="ttc" id="class_ekf_html_a6499365a27be64a6c4799b7d2390c3a5"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6499365a27be64a6c4799b7d2390c3a5">Ekf::_baro_data_ready</a></div><div class="ttdeci">bool _baro_data_ready</div><div class="ttdoc">true when new baro height data has fallen behind the fusion time horizon and is available to be fused...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00319">ekf.h:319</a></div></div>
<div class="ttc" id="class_ekf_html_a14d54802f5c7618d0101916fffe092a2"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a14d54802f5c7618d0101916fffe092a2">Ekf::resetExtVisRotMat</a></div><div class="ttdeci">void resetExtVisRotMat()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01657">ekf_helper.cpp:1657</a></div></div>
<div class="ttc" id="class_ekf_html_ac9608f65fd03d69ab6cfe8641979d529"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac9608f65fd03d69ab6cfe8641979d529">Ekf::predictState</a></div><div class="ttdeci">void predictState()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7a/ekf_8cpp_source.html#l00318">ekf.cpp:318</a></div></div>
<div class="ttc" id="class_ekf_html_a9a3363a143636b252178e060493b27be"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9a3363a143636b252178e060493b27be">Ekf::_gps_check_fail_status</a></div><div class="ttdeci">gps_check_fail_status_u _gps_check_fail_status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00447">ekf.h:447</a></div></div>
<div class="ttc" id="class_ekf_html_a709c2a511002736cd376c265c244eace"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a709c2a511002736cd376c265c244eace">Ekf::controlFusionModes</a></div><div class="ttdeci">void controlFusionModes()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l00046">control.cpp:46</a></div></div>
<div class="ttc" id="class_ekf_html_aab6b0981c7810a13997a5b80876c21a8"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aab6b0981c7810a13997a5b80876c21a8">Ekf::_fuse_hor_vel</a></div><div class="ttdeci">bool _fuse_hor_vel</div><div class="ttdoc">true when gps horizontal velocity measurement should be fused </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00295">ekf.h:295</a></div></div>
<div class="ttc" id="class_ekf_html_aac63e41e363c1f8d21375662a700e65a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aac63e41e363c1f8d21375662a700e65a">Ekf::fuse</a></div><div class="ttdeci">void fuse(float *K, float innovation)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01201">ekf_helper.cpp:1201</a></div></div>
<div class="ttc" id="class_ekf_html_a05594e1cc45f8d977f99358ca5336370"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a05594e1cc45f8d977f99358ca5336370">Ekf::getHaglInnovVar</a></div><div class="ttdeci">void getHaglInnovVar(float *hagl_innov_var) override</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d47/ecl_2_e_k_f_2terrain__estimator_8cpp_source.html#l00317">terrain_estimator.cpp:317</a></div></div>
<div class="ttc" id="class_ekf_html_a51ee969f6d4e139a22a52ad9a7e653a0"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a51ee969f6d4e139a22a52ad9a7e653a0">Ekf::_mag_lpf</a></div><div class="ttdeci">AlphaFilterVector3f _mag_lpf</div><div class="ttdoc">filtered magnetometer measurement (Gauss) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00433">ekf.h:433</a></div></div>
<div class="ttc" id="class_ekf_html_a9f4ca6d659b487fd165fb34fa09cfe36"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9f4ca6d659b487fd165fb34fa09cfe36">Ekf::_prev_dvel_bias_var</a></div><div class="ttdeci">Vector3f _prev_dvel_bias_var</div><div class="ttdoc">saved delta velocity XYZ bias variances (m/sec)**2 </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00454">ekf.h:454</a></div></div>
<div class="ttc" id="class_ekf_html_a11ae2a99f3c1d016c51dc7521b0c6384"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a11ae2a99f3c1d016c51dc7521b0c6384">Ekf::isStrongMagneticDisturbance</a></div><div class="ttdeci">bool isStrongMagneticDisturbance() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00297">mag_control.cpp:297</a></div></div>
<div class="ttc" id="class_ekf_html_a2894300dfc5ee0a6f1853ff9428814fa"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a2894300dfc5ee0a6f1853ff9428814fa">Ekf::_R_to_earth</a></div><div class="ttdeci">Dcmf _R_to_earth</div><div class="ttdoc">transformation matrix from body frame to earth frame from last EKF prediction </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00348">ekf.h:348</a></div></div>
<div class="ttc" id="class_ekf_html_a28b5096ae41a69d4636e45e3c77b5c42"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a28b5096ae41a69d4636e45e3c77b5c42">Ekf::get_airspeed_innov_var</a></div><div class="ttdeci">void get_airspeed_innov_var(float *airspeed_innov_var) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00878">ekf_helper.cpp:878</a></div></div>
<div class="ttc" id="class_ekf_html_ab8d70d06300fd6bb22fc2d4ee4aa03d5"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab8d70d06300fd6bb22fc2d4ee4aa03d5">Ekf::_hvelInnovGate</a></div><div class="ttdeci">float _hvelInnovGate</div><div class="ttdoc">Number of standard deviations used for the horizontal velocity fusion innovation consistency check...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00303">ekf.h:303</a></div></div>
<div class="ttc" id="class_ekf_html_a5160411a3b97ad10d989ed5a96821352"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5160411a3b97ad10d989ed5a96821352">Ekf::calcEarthRateNED</a></div><div class="ttdeci">void calcEarthRateNED(Vector3f &amp;omega, float lat_rad) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00820">ekf_helper.cpp:820</a></div></div>
<div class="ttc" id="class_ekf_html_a6d4de32b2cac9be19d251ac1918d924a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6d4de32b2cac9be19d251ac1918d924a">Ekf::get_accel_bias</a></div><div class="ttdeci">void get_accel_bias(float bias[3]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00938">ekf_helper.cpp:938</a></div></div>
<div class="ttc" id="structestimator_1_1imu_sample_html"><div class="ttname"><a href="../../d4/d03/structestimator_1_1imu_sample.html">estimator::imuSample</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/lib_2ecl_2_e_k_f_2common_8h_source.html#l00106">common.h:106</a></div></div>
<div class="ttc" id="class_ekf_html_a4a504cfcfe76af40520e2f6abbcfccd3"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a4a504cfcfe76af40520e2f6abbcfccd3">Ekf::controlExternalVisionFusion</a></div><div class="ttdeci">void controlExternalVisionFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l00174">control.cpp:174</a></div></div>
<div class="ttc" id="class_ekf_html_a31a4fdb6a6a5d2a36f701c3e17dc91f7"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a31a4fdb6a6a5d2a36f701c3e17dc91f7">Ekf::calculate_synthetic_mag_z_measurement</a></div><div class="ttdeci">float calculate_synthetic_mag_z_measurement(Vector3f mag_meas, Vector3f mag_earth_predicted)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/mag__fusion_8cpp_source.html#l01006">mag_fusion.cpp:1006</a></div></div>
<div class="ttc" id="class_ekf_html_a434e228e673df0f462f033994eefb197"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a434e228e673df0f462f033994eefb197">Ekf::runMagAndMagDeclFusions</a></div><div class="ttdeci">void runMagAndMagDeclFusions()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00323">mag_control.cpp:323</a></div></div>
<div class="ttc" id="class_ekf_html_a074bf8fe22c02e2a06ff16950d894964"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a074bf8fe22c02e2a06ff16950d894964">Ekf::update_deadreckoning_status</a></div><div class="ttdeci">void update_deadreckoning_status()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01325">ekf_helper.cpp:1325</a></div></div>
<div class="ttc" id="class_ekf_html_a1379edb7ebffd297b002608eab444928"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a1379edb7ebffd297b002608eab444928">Ekf::_inhibit_flow_use</a></div><div class="ttdeci">bool _inhibit_flow_use</div><div class="ttdoc">true when use of optical flow and range finder is being inhibited </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00399">ekf.h:399</a></div></div>
<div class="ttc" id="class_ekf_html_a64f378ac55cd9c7826923e9f78b236c1"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a64f378ac55cd9c7826923e9f78b236c1">Ekf::controlHeightFusion</a></div><div class="ttdeci">void controlHeightFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l00996">control.cpp:996</a></div></div>
<div class="ttc" id="class_ekf_html_a0ca03003996218259d343d526f065ae3"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0ca03003996218259d343d526f065ae3">Ekf::updateMagFilter</a></div><div class="ttdeci">void updateMagFilter()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00101">mag_control.cpp:101</a></div></div>
<div class="ttc" id="class_ekf_html_a882a137a6c9dfe19cfc9df590193c48a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a882a137a6c9dfe19cfc9df590193c48a">Ekf::~Ekf</a></div><div class="ttdeci">virtual ~Ekf()=default</div></div>
<div class="ttc" id="class_ekf_html_a7896e8c019d0df0a0725a5f463800044"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a7896e8c019d0df0a0725a5f463800044">Ekf::realignYawGPS</a></div><div class="ttdeci">bool realignYawGPS()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00405">ekf_helper.cpp:405</a></div></div>
<div class="ttc" id="class_ekf_html_ab4e4ef92b7280561cacde3a33c6eed41"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab4e4ef92b7280561cacde3a33c6eed41">Ekf::get_heading_innov_var</a></div><div class="ttdeci">void get_heading_innov_var(float *heading_innov_var) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00890">ekf_helper.cpp:890</a></div></div>
<div class="ttc" id="class_ekf_html_aa50b3a1a76ae9dc6def6f818becc356c"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa50b3a1a76ae9dc6def6f818becc356c">Ekf::_ev_data_ready</a></div><div class="ttdeci">bool _ev_data_ready</div><div class="ttdoc">true when new external vision system data has fallen behind the fusion time horizon and is available ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00322">ekf.h:322</a></div></div>
<div class="ttc" id="class_ekf_html_af2d3f767e5ac4c144b74983b10efab1a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af2d3f767e5ac4c144b74983b10efab1a">Ekf::_time_last_pos_fuse</a></div><div class="ttdeci">uint64_t _time_last_pos_fuse</div><div class="ttdoc">time the last fusion of horizontal position measurements was performed (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00330">ekf.h:330</a></div></div>
<div class="ttc" id="class_ekf_html_a5b85c3509e588863acecef05b7d0a195"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5b85c3509e588863acecef05b7d0a195">Ekf::zeroOffDiag</a></div><div class="ttdeci">void zeroOffDiag(float(&amp;cov_mat)[_k_num_states][_k_num_states], uint8_t first, uint8_t last)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01258">ekf_helper.cpp:1258</a></div></div>
<div class="ttc" id="crsf_8cpp_html_aba4ef90cc13b3b968c2b833c072476a8a11648e4e66e7ed6a86cb7f1d0cf604fe"><div class="ttname"><a href="../../d9/dd2/crsf_8cpp.html#aba4ef90cc13b3b968c2b833c072476a8a11648e4e66e7ed6a86cb7f1d0cf604fe">crsf_frame_type_t::gps</a></div></div>
<div class="ttc" id="class_ekf_html_afad933d73c4376ca64db280c7f19a750"><div class="ttname"><a href="../../dc/d66/class_ekf.html#afad933d73c4376ca64db280c7f19a750">Ekf::_primary_hgt_source</a></div><div class="ttdeci">int _primary_hgt_source</div><div class="ttdoc">specifies primary source of height data </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00473">ekf.h:473</a></div></div>
<div class="ttc" id="class_ekf_html_a45746d6c687dd5c97149a3ccb2357800"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a45746d6c687dd5c97149a3ccb2357800">Ekf::_gps_checks_passed</a></div><div class="ttdeci">bool _gps_checks_passed</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00421">ekf.h:421</a></div></div>
<div class="ttc" id="class_ekf_html_a5a50a1a73db678587d1206d4b967d12b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5a50a1a73db678587d1206d4b967d12b">Ekf::_mag_use_inhibit_prev</a></div><div class="ttdeci">bool _mag_use_inhibit_prev</div><div class="ttdoc">true when magnetometer use was being inhibited the previous frame </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00360">ekf.h:360</a></div></div>
<div class="ttc" id="class_ekf_html_ab3c6e783a4a9cd982d1fb2e01a4cd54b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab3c6e783a4a9cd982d1fb2e01a4cd54b">Ekf::calcRotVecVariances</a></div><div class="ttdeci">Vector3f calcRotVecVariances()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01386">ekf_helper.cpp:1386</a></div></div>
<div class="ttc" id="class_ekf_html_a2d2b742a0db5377ca8034e5164a716cb"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a2d2b742a0db5377ca8034e5164a716cb">Ekf::_beta_innov_var</a></div><div class="ttdeci">float _beta_innov_var</div><div class="ttdoc">synthetic sideslip measurement innovation variance (rad**2) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00383">ekf.h:383</a></div></div>
<div class="ttc" id="class_ekf_html_af18ef975c56278f900dac296d4c0c1a0"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af18ef975c56278f900dac296d4c0c1a0">Ekf::isYawResetAuthorized</a></div><div class="ttdeci">bool isYawResetAuthorized() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00144">mag_control.cpp:144</a></div></div>
<div class="ttc" id="class_ekf_html_adc073d16a6470ca97d2650b96115899d"><div class="ttname"><a href="../../dc/d66/class_ekf.html#adc073d16a6470ca97d2650b96115899d">Ekf::_flt_mag_align_converging</a></div><div class="ttdeci">bool _flt_mag_align_converging</div><div class="ttdoc">true when the in-flight mag field post alignment convergence is being performd </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00440">ekf.h:440</a></div></div>
<div class="ttc" id="class_ekf_html_a49e7059aa68090514aa305891f4c5abc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a49e7059aa68090514aa305891f4c5abc">Ekf::get_velD_reset</a></div><div class="ttdeci">void get_velD_reset(float *delta, uint8_t *counter) override</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00226">ekf.h:226</a></div></div>
<div class="ttc" id="class_ekf_html_acedab56d4ee07bcddb2411447971f55e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#acedab56d4ee07bcddb2411447971f55e">Ekf::_terrain_initialised</a></div><div class="ttdeci">bool _terrain_initialised</div><div class="ttdoc">true when the terrain estimator has been initialized </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00462">ekf.h:462</a></div></div>
<div class="ttc" id="class_ekf_html_a5363ceef7d620a5eef0e336ef5f9b749"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5363ceef7d620a5eef0e336ef5f9b749">Ekf::isMeasuredMatchingGpsMagStrength</a></div><div class="ttdeci">bool isMeasuredMatchingGpsMagStrength() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00302">mag_control.cpp:302</a></div></div>
<div class="ttc" id="class_ekf_html_a8b76d1703237dc9ce16451396a7357da"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a8b76d1703237dc9ce16451396a7357da">Ekf::controlRangeFinderFusion</a></div><div class="ttdeci">void controlRangeFinderFusion()</div></div>
<div class="ttc" id="class_ekf_html_a9edd0b757c650961a312c10324639edc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9edd0b757c650961a312c10324639edc">Ekf::get_posNE_reset</a></div><div class="ttdeci">void get_posNE_reset(float delta[2], uint8_t *counter) override</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00229">ekf.h:229</a></div></div>
<div class="ttc" id="class_ekf_html_ade71d2f293de1fc02253c413aae93466"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ade71d2f293de1fc02253c413aae93466">Ekf::get_vel_pos_innov_var</a></div><div class="ttdeci">void get_vel_pos_innov_var(float vel_pos_innov_var[6]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00866">ekf_helper.cpp:866</a></div></div>
<div class="ttc" id="class_ekf_html_a3b96c08ee92d2a39dcd223b3d4213cbc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3b96c08ee92d2a39dcd223b3d4213cbc">Ekf::limitDeclination</a></div><div class="ttdeci">void limitDeclination()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/mag__fusion_8cpp_source.html#l00955">mag_fusion.cpp:955</a></div></div>
<div class="ttc" id="class_ekf_html_af0f6c95caa2f0bf5cf7e56b658f88230"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af0f6c95caa2f0bf5cf7e56b658f88230">Ekf::reset_imu_bias</a></div><div class="ttdeci">bool reset_imu_bias() override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01122">ekf_helper.cpp:1122</a></div></div>
<div class="ttc" id="class_ekf_html_a7d652ae9f284b3b53c86d35fa0b4bc62"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a7d652ae9f284b3b53c86d35fa0b4bc62">Ekf::_flowRadXYcomp</a></div><div class="ttdeci">Vector2f _flowRadXYcomp</div><div class="ttdoc">measured delta angle of the image about the X and Y body axes after removal of body rotation (rad)...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00400">ekf.h:400</a></div></div>
<div class="ttc" id="class_ekf_html_a5f256767a45b3d7c57f75edade49287c"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5f256767a45b3d7c57f75edade49287c">Ekf::canResetMagHeading</a></div><div class="ttdeci">bool canResetMagHeading() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00149">mag_control.cpp:149</a></div></div>
<div class="ttc" id="class_ekf_html_ab41addaa5482d62667328c300db0d25f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab41addaa5482d62667328c300db0d25f">Ekf::getTerrainVPos</a></div><div class="ttdeci">float getTerrainVPos() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00128">mag_control.cpp:128</a></div></div>
<div class="ttc" id="class_ekf_html_a0135735b720700b89a5f6574567dfdbc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0135735b720700b89a5f6574567dfdbc">Ekf::_baro_hgt_faulty</a></div><div class="ttdeci">bool _baro_hgt_faulty</div><div class="ttdoc">true if valid baro data is unavailable for use </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00470">ekf.h:470</a></div></div>
<div class="ttc" id="class_ekf_html_a0499cc0e642a51b76a9de49c0de2c9b4"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0499cc0e642a51b76a9de49c0de2c9b4">Ekf::_output_tracking_error</a></div><div class="ttdeci">float _output_tracking_error[3]</div><div class="ttdoc">contains the magnitude of the angle, velocity and position track errors (rad, m/s, m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00408">ekf.h:408</a></div></div>
<div class="ttc" id="class_ekf_html_abee756b6f0a6d25a6b9870b1f8949fda"><div class="ttname"><a href="../../dc/d66/class_ekf.html#abee756b6f0a6d25a6b9870b1f8949fda">Ekf::get_ekf_gpos_accuracy</a></div><div class="ttdeci">void get_ekf_gpos_accuracy(float *ekf_eph, float *ekf_epv) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01005">ekf_helper.cpp:1005</a></div></div>
<div class="ttc" id="class_ekf_html_a397509ec6183c78faa883b6fe1d6c62b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a397509ec6183c78faa883b6fe1d6c62b">Ekf::_flow_data_ready</a></div><div class="ttdeci">bool _flow_data_ready</div><div class="ttdoc">true when the leading edge of the optical flow integration period has fallen behind the fusion time h...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00321">ekf.h:321</a></div></div>
<div class="ttc" id="class_ekf_html_a025233b16bb49ce2605fe2b915def8c3"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a025233b16bb49ce2605fe2b915def8c3">Ekf::reset</a></div><div class="ttdeci">void reset(uint64_t timestamp) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7a/ekf_8cpp_source.html#l00055">ekf.cpp:55</a></div></div>
<div class="ttc" id="class_ekf_html_aa148e57137bf741e4ea5797152d1fe19"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa148e57137bf741e4ea5797152d1fe19">Ekf::stopMag3DFusion</a></div><div class="ttdeci">void stopMag3DFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01588">ekf_helper.cpp:1588</a></div></div>
<div class="ttc" id="class_ekf_html_a92b4c38dae93f3935fc49e0af88abea3"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a92b4c38dae93f3935fc49e0af88abea3">Ekf::_mag_counter</a></div><div class="ttdeci">uint32_t _mag_counter</div><div class="ttdoc">number of magnetometer samples read during initialisation </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00430">ekf.h:430</a></div></div>
<div class="ttc" id="class_ekf_html_a24b2ca7a7cc4aac13a651324e1a82a39"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a24b2ca7a7cc4aac13a651324e1a82a39">Ekf::get_gps_drift_metrics</a></div><div class="ttdeci">bool get_gps_drift_metrics(float drift[3], bool *blocked) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00993">ekf_helper.cpp:993</a></div></div>
<div class="ttc" id="class_ekf_html_adecec470744c46a30400b7f0c22731ab"><div class="ttname"><a href="../../dc/d66/class_ekf.html#adecec470744c46a30400b7f0c22731ab">Ekf::posD_counter</a></div><div class="ttdeci">uint8_t posD_counter</div><div class="ttdoc">number of vertical position reset events (allow to wrap if count exceeds 255) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00276">ekf.h:276</a></div></div>
<div class="ttc" id="namespacematrix_html_a1b583711c91bf5c9f5b515e167edce90"><div class="ttname"><a href="../../d0/de4/namespacematrix.html#a1b583711c91bf5c9f5b515e167edce90">matrix::Vector2f</a></div><div class="ttdeci">Vector2&lt; float &gt; Vector2f</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d12/_vector2_8hpp_source.html#l00069">Vector2.hpp:69</a></div></div>
<div class="ttc" id="class_ekf_html_af4101833167bb9d27ab05c069caaaff4"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af4101833167bb9d27ab05c069caaaff4">Ekf::_drag_innov_var</a></div><div class="ttdeci">float _drag_innov_var[2]</div><div class="ttdoc">multirotor drag measurement innovation variance ((m/sec**2)**2) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00386">ekf.h:386</a></div></div>
<div class="ttc" id="class_ekf_html_a668dad54de9fd6f0d35efdb0230c65e8"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a668dad54de9fd6f0d35efdb0230c65e8">Ekf::fuseFlowForTerrain</a></div><div class="ttdeci">void fuseFlowForTerrain()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d47/ecl_2_e_k_f_2terrain__estimator_8cpp_source.html#l00185">terrain_estimator.cpp:185</a></div></div>
<div class="ttc" id="class_ekf_html_af83f2120b1bbbf39464a871f9a147df7"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af83f2120b1bbbf39464a871f9a147df7">Ekf::quat_counter</a></div><div class="ttdeci">uint8_t quat_counter</div><div class="ttdoc">number of quaternion reset events (allow to wrap if count exceeds 255) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00277">ekf.h:277</a></div></div>
<div class="ttc" id="class_ekf_html_ae28e511532b85ec68085417f434953ae"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ae28e511532b85ec68085417f434953ae">Ekf::_ev_counter</a></div><div class="ttdeci">uint32_t _ev_counter</div><div class="ttdoc">number of external vision samples read during initialisation </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00431">ekf.h:431</a></div></div>
<div class="ttc" id="class_ekf_html_a9022fc92eee770ae6daf527c2bd02894"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9022fc92eee770ae6daf527c2bd02894">Ekf::get_airspeed_innov</a></div><div class="ttdeci">void get_airspeed_innov(float *airspeed_innov) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00847">ekf_helper.cpp:847</a></div></div>
<div class="ttc" id="class_ekf_html_a462cf49b9f075298880e046b5fbe08fc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a462cf49b9f075298880e046b5fbe08fc">Ekf::_earth_rate_NED</a></div><div class="ttdeci">Vector3f _earth_rate_NED</div><div class="ttdoc">earth rotation vector (NED) in rad/s </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00346">ekf.h:346</a></div></div>
<div class="ttc" id="class_ekf_html_a3e1cf1f594a9d829c03e3672816a7f07"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3e1cf1f594a9d829c03e3672816a7f07">Ekf::setDiag</a></div><div class="ttdeci">void setDiag(float(&amp;cov_mat)[_k_num_states][_k_num_states], uint8_t first, uint8_t last, float variance)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01302">ekf_helper.cpp:1302</a></div></div>
<div class="ttc" id="class_ekf_html_a4563878321b3b60447509710fed2eea3"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a4563878321b3b60447509710fed2eea3">Ekf::fuseHagl</a></div><div class="ttdeci">void fuseHagl()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d47/ecl_2_e_k_f_2terrain__estimator_8cpp_source.html#l00133">terrain_estimator.cpp:133</a></div></div>
<div class="ttc" id="class_ekf_html_a352fc869b91db32be08037389c7f9500"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a352fc869b91db32be08037389c7f9500">Ekf::_aux_vel_innov</a></div><div class="ttdeci">float _aux_vel_innov[2]</div><div class="ttdoc">NE auxiliary velocity innovations: (m/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00374">ekf.h:374</a></div></div>
<div class="ttc" id="class_ekf_html_a02303e56b30d1704f2be3e0e8a04e095"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a02303e56b30d1704f2be3e0e8a04e095">Ekf::checkMagInhibition</a></div><div class="ttdeci">void checkMagInhibition()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00256">mag_control.cpp:256</a></div></div>
<div class="ttc" id="safety_8c_html_a57451d202e70f5eafc93a3cc5e6c0c6e"><div class="ttname"><a href="../../d4/d6d/safety_8c.html#a57451d202e70f5eafc93a3cc5e6c0c6e">counter</a></div><div class="ttdeci">static unsigned counter</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d6d/safety_8c_source.html#l00056">safety.c:56</a></div></div>
<div class="ttc" id="class_ekf_html_ac43d9c5fa7b46e54a660c74984660ec4"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac43d9c5fa7b46e54a660c74984660ec4">Ekf::_gps_drift_velD</a></div><div class="ttdeci">float _gps_drift_velD</div><div class="ttdoc">GPS down position derivative (m/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00413">ekf.h:413</a></div></div>
<div class="ttc" id="class_ekf_html_ab01e08a118d9778ea0a79d552f286ba3"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab01e08a118d9778ea0a79d552f286ba3">Ekf::stopMagHdgFusion</a></div><div class="ttdeci">void stopMagHdgFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01597">ekf_helper.cpp:1597</a></div></div>
<div class="ttc" id="class_ekf_html_ac557eacd06bd597b3ab097cab74c1c39"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac557eacd06bd597b3ab097cab74c1c39">Ekf::sq</a></div><div class="ttdeci">static constexpr float sq(float var)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00695">ekf.h:695</a></div></div>
<div class="ttc" id="class_ekf_html_a1bf56ed84bdc1938d25e8abfb206c035"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a1bf56ed84bdc1938d25e8abfb206c035">Ekf::_tas_data_ready</a></div><div class="ttdeci">bool _tas_data_ready</div><div class="ttdoc">true when new true airspeed data has fallen behind the fusion time horizon and is available to be fus...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00323">ekf.h:323</a></div></div>
<div class="ttc" id="class_ekf_html_af727cfe03d3c89d71e122a43799a854a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af727cfe03d3c89d71e122a43799a854a">Ekf::_mag_innov_var</a></div><div class="ttdeci">float _mag_innov_var[3]</div><div class="ttdoc">earth magnetic field innovation variance (Gauss**2) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00377">ekf.h:377</a></div></div>
<div class="ttc" id="class_ekf_html_af7b13c3328aee801c57df71e99b3d2a2"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af7b13c3328aee801c57df71e99b3d2a2">Ekf::controlMagFusion</a></div><div class="ttdeci">void controlMagFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00042">mag_control.cpp:42</a></div></div>
<div class="ttc" id="class_ekf_html_a1b4041650288e65d2f6d92eb4bfb2e7c"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a1b4041650288e65d2f6d92eb4bfb2e7c">Ekf::get_ev2ekf_quaternion</a></div><div class="ttdeci">void get_ev2ekf_quaternion(float *quat) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01680">ekf_helper.cpp:1680</a></div></div>
<div class="ttc" id="class_ekf_html_aeee1ded47822f0a25038a49cf8de1ebf"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aeee1ded47822f0a25038a49cf8de1ebf">Ekf::get_ekf_ctrl_limits</a></div><div class="ttdeci">void get_ekf_ctrl_limits(float *vxy_max, float *vz_max, float *hagl_min, float *hagl_max) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01079">ekf_helper.cpp:1079</a></div></div>
<div class="ttc" id="class_ekf_html_ac2f3572994b79118429989ba1ffe305c"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac2f3572994b79118429989ba1ffe305c">Ekf::get_ekf_lpos_accuracy</a></div><div class="ttdeci">void get_ekf_lpos_accuracy(float *ekf_eph, float *ekf_epv) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01024">ekf_helper.cpp:1024</a></div></div>
<div class="ttc" id="class_ekf_html_a09681091370a154802f1eed4a169aad1"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a09681091370a154802f1eed4a169aad1">Ekf::get_ekf_soln_status</a></div><div class="ttdeci">void get_ekf_soln_status(uint16_t *status) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01178">ekf_helper.cpp:1178</a></div></div>
<div class="ttc" id="class_ekf_html_ae6063ae2ec7691c6422c534cef8fa190"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ae6063ae2ec7691c6422c534cef8fa190">Ekf::_delta_time_of</a></div><div class="ttdeci">float _delta_time_of</div><div class="ttdoc">time in sec that _imu_del_ang_of was accumulated over (sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00396">ekf.h:396</a></div></div>
<div class="ttc" id="class_ekf_html_ad5c4866ae07c08e475a743f0d2755da1"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad5c4866ae07c08e475a743f0d2755da1">Ekf::_velpos_reset_request</a></div><div class="ttdeci">bool _velpos_reset_request</div><div class="ttdoc">true when a large yaw error has been fixed and a velocity and position state reset is required ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00445">ekf.h:445</a></div></div>
<div class="ttc" id="class_ekf_html_a559e33df39de1d4cc4da05c84aec4090"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a559e33df39de1d4cc4da05c84aec4090">Ekf::_time_last_fake_gps</a></div><div class="ttdeci">uint64_t _time_last_fake_gps</div><div class="ttdoc">same flag as &quot;_flow_data_ready&quot; but used for separate terrain estimator </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00326">ekf.h:326</a></div></div>
<div class="ttc" id="class_ekf_html_a17aed18d9e73be9108e3f50e47b23f93"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a17aed18d9e73be9108e3f50e47b23f93">Ekf::_airspeed_innov_var</a></div><div class="ttdeci">float _airspeed_innov_var</div><div class="ttdoc">airspeed measurement innovation variance ((m/sec)**2) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00380">ekf.h:380</a></div></div>
<div class="ttc" id="class_ekf_html_aea152a4b7b6217827883f8511a26eec3"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aea152a4b7b6217827883f8511a26eec3">Ekf::get_posD_reset</a></div><div class="ttdeci">void get_posD_reset(float *delta, uint8_t *counter) override</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00223">ekf.h:223</a></div></div>
<div class="ttc" id="class_ekf_html_a2ebf3a417f7a40089ab9cd2e24980bf3"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a2ebf3a417f7a40089ab9cd2e24980bf3">Ekf::increaseQuatYawErrVariance</a></div><div class="ttdeci">void increaseQuatYawErrVariance(float yaw_variance)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01692">ekf_helper.cpp:1692</a></div></div>
<div class="ttc" id="class_ekf_html_ac772808c6db439a56d31c4f9d422a9d3"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac772808c6db439a56d31c4f9d422a9d3">Ekf::_posObsNoiseNE</a></div><div class="ttdeci">float _posObsNoiseNE</div><div class="ttdoc">1-STD observation noise used for the fusion of NE position data (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00299">ekf.h:299</a></div></div>
<div class="ttc" id="class_ekf_html_a41e9a14de9f501cc64a4a66a849d556a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a41e9a14de9f501cc64a4a66a849d556a">Ekf::controlAuxVelFusion</a></div><div class="ttdeci">void controlAuxVelFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l01364">control.cpp:1364</a></div></div>
<div class="ttc" id="class_ekf_html_ab8cae80815f6d360ff45eadc87400f22"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab8cae80815f6d360ff45eadc87400f22">Ekf::_hpos_prev_available</a></div><div class="ttdeci">bool _hpos_prev_available</div><div class="ttdoc">true when previous values of the estimate and measurement are available for use </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00310">ekf.h:310</a></div></div>
<div class="ttc" id="class_ekf_html_a44ed26d116c7af6ecc6c8973d439ff2d"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a44ed26d116c7af6ecc6c8973d439ff2d">Ekf::fixCovarianceErrors</a></div><div class="ttdeci">void fixCovarianceErrors()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d38/covariance_8cpp_source.html#l00728">covariance.cpp:728</a></div></div>
<div class="ttc" id="class_ekf_html_a39aeee8c1888f7178351cda487f1adcf"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a39aeee8c1888f7178351cda487f1adcf">Ekf::_time_acc_bias_check</a></div><div class="ttdeci">uint64_t _time_acc_bias_check</div><div class="ttdoc">last time the accel bias check passed (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00341">ekf.h:341</a></div></div>
<div class="ttc" id="class_ekf_html_abe44b8d6843af7e2a6b78c059b5dba9a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#abe44b8d6843af7e2a6b78c059b5dba9a">Ekf::canRealignYawUsingGps</a></div><div class="ttdeci">bool canRealignYawUsingGps() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00167">mag_control.cpp:167</a></div></div>
<div class="ttc" id="class_ekf_html_a92dfb71303e5f9b59869fc73603c67d8"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a92dfb71303e5f9b59869fc73603c67d8">Ekf::_ev_rot_mat</a></div><div class="ttdeci">Dcmf _ev_rot_mat</div><div class="ttdoc">transformation matrix that rotates observations from the EV to the EKF navigation frame...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00312">ekf.h:312</a></div></div>
<div class="ttc" id="class_ekf_html_a8f27dacb50fc38aaeca8170d88b75815"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a8f27dacb50fc38aaeca8170d88b75815">Ekf::checkMagDeclRequired</a></div><div class="ttdeci">void checkMagDeclRequired()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00245">mag_control.cpp:245</a></div></div>
<div class="ttc" id="class_ekf_html_a452fe41b96bfe5e6ae7f7daaa913af52"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a452fe41b96bfe5e6ae7f7daaa913af52">Ekf::_time_ins_deadreckon_start</a></div><div class="ttdeci">uint64_t _time_ins_deadreckon_start</div><div class="ttdoc">amount of time we have been doing inertial only deadreckoning (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00327">ekf.h:327</a></div></div>
<div class="ttc" id="class_ekf_html_a846ed97767a228e2098b18dd6558d8ff"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a846ed97767a228e2098b18dd6558d8ff">Ekf::_rng_hgt_valid</a></div><div class="ttdeci">bool _rng_hgt_valid</div><div class="ttdoc">true if range finder sample retrieved from buffer is valid </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00472">ekf.h:472</a></div></div>
<div class="ttc" id="class_ekf_html_a3a839968be88e4e47f265d8f62b0155a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3a839968be88e4e47f265d8f62b0155a">Ekf::setControlRangeHeight</a></div><div class="ttdeci">void setControlRangeHeight()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01554">ekf_helper.cpp:1554</a></div></div>
<div class="ttc" id="class_ekf_html_a644c86cbd1554bd1f84ece2ea0eb528a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a644c86cbd1554bd1f84ece2ea0eb528a">Ekf::get_flow_innov</a></div><div class="ttdeci">void get_flow_innov(float flow_innov[2]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d01/optflow__fusion_8cpp_source.html#l00518">optflow_fusion.cpp:518</a></div></div>
<div class="ttc" id="class_ekf_html_a24f1225aaeec71df4d34d20777c1f528"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a24f1225aaeec71df4d34d20777c1f528">Ekf::fuseMag</a></div><div class="ttdeci">void fuseMag()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/mag__fusion_8cpp_source.html#l00047">mag_fusion.cpp:47</a></div></div>
<div class="ttc" id="class_ekf_html_aaf80ea102825ba5755fba7f2a7446578"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aaf80ea102825ba5755fba7f2a7446578">Ekf::setControlEVHeight</a></div><div class="ttdeci">void setControlEVHeight()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01572">ekf_helper.cpp:1572</a></div></div>
<div class="ttc" id="class_ekf_html_ab543155fc15c91b3cc02e4acaf1341f8"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab543155fc15c91b3cc02e4acaf1341f8">Ekf::velD_counter</a></div><div class="ttdeci">uint8_t velD_counter</div><div class="ttdoc">number of vertical velocity reset events (allow to wrap if count exceeds 255) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00274">ekf.h:274</a></div></div>
<div class="ttc" id="class_ekf_html_a732f6e0dfe595bca82bdff3ae2421700"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a732f6e0dfe595bca82bdff3ae2421700">Ekf::resetHeight</a></div><div class="ttdeci">void resetHeight()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00214">ekf_helper.cpp:214</a></div></div>
<div class="ttc" id="structmap__projection__reference__s_html"><div class="ttname"><a href="../../de/d7e/structmap__projection__reference__s.html">map_projection_reference_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d35/geo_8h_source.html#l00075">geo.h:75</a></div></div>
<div class="ttc" id="class_ekf_html_a9a7b0eedbccd75e6dbc766ebaaee9925"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9a7b0eedbccd75e6dbc766ebaaee9925">Ekf::alignOutputFilter</a></div><div class="ttdeci">void alignOutputFilter()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00378">ekf_helper.cpp:378</a></div></div>
<div class="ttc" id="class_ekf_html_af2f60243cd2e814edda98265f427f1eb"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af2f60243cd2e814edda98265f427f1eb">Ekf::get_mag_innov</a></div><div class="ttdeci">void get_mag_innov(float mag_innov[3]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00841">ekf_helper.cpp:841</a></div></div>
<div class="ttc" id="class_ekf_html_aede08985fc3703e505df3538134c1d40"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aede08985fc3703e505df3538134c1d40">Ekf::resetWindCovariance</a></div><div class="ttdeci">void resetWindCovariance()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d38/covariance_8cpp_source.html#l00929">covariance.cpp:929</a></div></div>
<div class="ttc" id="class_ekf_html_a1cd7296c8b13839ef0deef6ce915cf2e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a1cd7296c8b13839ef0deef6ce915cf2e">Ekf::get_aux_vel_innov</a></div><div class="ttdeci">void get_aux_vel_innov(float aux_vel_innov[2]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00835">ekf_helper.cpp:835</a></div></div>
<div class="ttc" id="class_ekf_html_a8fd4f2159849dc6326169c816157387f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a8fd4f2159849dc6326169c816157387f">Ekf::fuseVelPosHeight</a></div><div class="ttdeci">void fuseVelPosHeight()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/daf/vel__pos__fusion_8cpp_source.html#l00048">vel_pos_fusion.cpp:48</a></div></div>
<div class="ttc" id="class_ekf_html_a3a736fa26fe071bf1fe6942f547f92cc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3a736fa26fe071bf1fe6942f547f92cc">Ekf::runTerrainEstimator</a></div><div class="ttdeci">void runTerrainEstimator()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d47/ecl_2_e_k_f_2terrain__estimator_8cpp_source.html#l00088">terrain_estimator.cpp:88</a></div></div>
<div class="ttc" id="class_ekf_html_a05d15d380482d0bbd650dba29aeccb4e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a05d15d380482d0bbd650dba29aeccb4e">Ekf::_mag_use_inhibit</a></div><div class="ttdeci">bool _mag_use_inhibit</div><div class="ttdoc">true when magnetometer use is being inhibited </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00359">ekf.h:359</a></div></div>
<div class="ttc" id="unionestimator_1_1gps__check__fail__status__u_html"><div class="ttname"><a href="../../d2/da1/unionestimator_1_1gps__check__fail__status__u.html">estimator::gps_check_fail_status_u</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/lib_2ecl_2_e_k_f_2common_8h_source.html#l00422">common.h:422</a></div></div>
<div class="ttc" id="class_ekf_html_a6b0b68ac1364f0bfe5bb2b3055666259"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6b0b68ac1364f0bfe5bb2b3055666259">Ekf::getTerrainVertPos</a></div><div class="ttdeci">void getTerrainVertPos(float *ret) override</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d47/ecl_2_e_k_f_2terrain__estimator_8cpp_source.html#l00306">terrain_estimator.cpp:306</a></div></div>
<div class="ttc" id="class_ekf_html_a6db4632334ca657f8cb042641d96a9c5"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6db4632334ca657f8cb042641d96a9c5">Ekf::get_vel_var</a></div><div class="ttdeci">void get_vel_var(Vector3f &amp;vel_var) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d38/covariance_8cpp_source.html#l00128">covariance.cpp:128</a></div></div>
<div class="ttc" id="namespacematrix_html_a85ce33c9bcfea4a8c30718869eecf911"><div class="ttname"><a href="../../d0/de4/namespacematrix.html#a85ce33c9bcfea4a8c30718869eecf911">matrix::Vector3f</a></div><div class="ttdeci">Vector3&lt; float &gt; Vector3f</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d6a/_vector3_8hpp_source.html#l00136">Vector3.hpp:136</a></div></div>
<div class="ttc" id="class_ekf_html_a22be86a20618f9990a0021c54f31ad8f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a22be86a20618f9990a0021c54f31ad8f">Ekf::makeSymmetrical</a></div><div class="ttdeci">void makeSymmetrical(float(&amp;cov_mat)[_k_num_states][_k_num_states], uint8_t first, uint8_t last)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00773">ekf_helper.cpp:773</a></div></div>
<div class="ttc" id="class_ekf_html_a39bd3244606afebb0fc495477c962aac"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a39bd3244606afebb0fc495477c962aac">Ekf::_hagl_valid</a></div><div class="ttdeci">bool _hagl_valid</div><div class="ttdoc">true when the height above ground estimate is valid </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00467">ekf.h:467</a></div></div>
<div class="ttc" id="class_ekf_html_afc2507b762f7faf405bb42688ef06666"><div class="ttname"><a href="../../dc/d66/class_ekf.html#afc2507b762f7faf405bb42688ef06666">Ekf::_accel_mag_filt</a></div><div class="ttdeci">float _accel_mag_filt</div><div class="ttdoc">acceleration magnitude after application of a decaying envelope filter (rad/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00452">ekf.h:452</a></div></div>
<div class="ttc" id="class_ekf_html_acea6fadadc01c460f9d163e80b2d567a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#acea6fadadc01c460f9d163e80b2d567a">Ekf::_R_rng_to_earth_2_2</a></div><div class="ttdeci">float _R_rng_to_earth_2_2</div><div class="ttdoc">2,2 element of the rotation matrix from sensor frame to earth frame </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00465">ekf.h:465</a></div></div>
<div class="ttc" id="class_ekf_html_a232288245fee48b96ab53a479dcd4d00"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a232288245fee48b96ab53a479dcd4d00">Ekf::constrainStates</a></div><div class="ttdeci">void constrainStates()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00784">ekf_helper.cpp:784</a></div></div>
<div class="ttc" id="class_ekf_html_ac85267a55e6d941b9fb1434b98edd20e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac85267a55e6d941b9fb1434b98edd20e">Ekf::_hagl_innov</a></div><div class="ttdeci">float _hagl_innov</div><div class="ttdoc">innovation of the last height above terrain measurement (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00459">ekf.h:459</a></div></div>
<div class="ttc" id="class_ekf_html_a192e2511156f82005e55e3f62f38eb2f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a192e2511156f82005e55e3f62f38eb2f">Ekf::orientation_covariances</a></div><div class="ttdeci">matrix::SquareMatrix&lt; float, 4 &gt; orientation_covariances() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00135">ekf.h:135</a></div></div>
<div class="ttc" id="class_ekf_html_abc60e8d0d0c95e532ae58c83f17e7340"><div class="ttname"><a href="../../dc/d66/class_ekf.html#abc60e8d0d0c95e532ae58c83f17e7340">Ekf::_vvelInnovGate</a></div><div class="ttdeci">float _vvelInnovGate</div><div class="ttdoc">Number of standard deviations used for the vertical velocity fusion innovation consistency check...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00304">ekf.h:304</a></div></div>
<div class="ttc" id="lib_2ecl_2_e_k_f_2common_8h_html_aafc0f692373d9cfc3868005db716f649"><div class="ttname"><a href="../../d5/d60/lib_2ecl_2_e_k_f_2common_8h.html#aafc0f692373d9cfc3868005db716f649">VDIST_SENSOR_BARO</a></div><div class="ttdeci">#define VDIST_SENSOR_BARO</div><div class="ttdoc">Use baro height. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/lib_2ecl_2_e_k_f_2common_8h_source.html#l00178">common.h:178</a></div></div>
<div class="ttc" id="class_ekf_html_a0f1b9f78819c1ab5ed4cdd5dd2e040b5"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0f1b9f78819c1ab5ed4cdd5dd2e040b5">Ekf::covariances_diagonal</a></div><div class="ttdeci">matrix::Vector&lt; float, 24 &gt; covariances_diagonal() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00132">ekf.h:132</a></div></div>
<div class="ttc" id="class_ekf_html_a32cf3d40f85ac21ef2b31808f2b64166"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a32cf3d40f85ac21ef2b31808f2b64166">Ekf::_filter_initialised</a></div><div class="ttdeci">bool _filter_initialised</div><div class="ttdoc">true when the EKF sttes and covariances been initialised </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00290">ekf.h:290</a></div></div>
<div class="ttc" id="class_ekf_html_a35c74f0818c25033a9d1050fece5bbe0"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a35c74f0818c25033a9d1050fece5bbe0">Ekf::_time_last_arsp_fuse</a></div><div class="ttdeci">uint64_t _time_last_arsp_fuse</div><div class="ttdoc">time the last fusion of airspeed measurements were performed (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00335">ekf.h:335</a></div></div>
<div class="ttc" id="class_ekf_html_a1b6d2c569c77565cc381c146a548dd49"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a1b6d2c569c77565cc381c146a548dd49">Ekf::_gps_hgt_intermittent</a></div><div class="ttdeci">bool _gps_hgt_intermittent</div><div class="ttdoc">true if gps height into the buffer is intermittent </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00471">ekf.h:471</a></div></div>
<div class="ttc" id="class_ekf_html_a3a8768f349ec11c62d5fb33d5d2dc9f4"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3a8768f349ec11c62d5fb33d5d2dc9f4">Ekf::get_velNE_reset</a></div><div class="ttdeci">void get_velNE_reset(float delta[2], uint8_t *counter) override</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00236">ekf.h:236</a></div></div>
<div class="ttc" id="class_ekf_html_adbb18ea85a81916d7d68f8bc36ebaba1"><div class="ttname"><a href="../../dc/d66/class_ekf.html#adbb18ea85a81916d7d68f8bc36ebaba1">Ekf::_gps_velD_diff_filt</a></div><div class="ttdeci">float _gps_velD_diff_filt</div><div class="ttdoc">GPS filtered Down velocity (m/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00414">ekf.h:414</a></div></div>
<div class="ttc" id="class_ekf_html"><div class="ttname"><a href="../../dc/d66/class_ekf.html">Ekf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00047">ekf.h:47</a></div></div>
<div class="ttc" id="class_ekf_html_ad92fd40503a8f2bf201a7e294f17fc26"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad92fd40503a8f2bf201a7e294f17fc26">Ekf::_flt_mag_align_start_time</a></div><div class="ttdeci">uint64_t _flt_mag_align_start_time</div><div class="ttdoc">time that inflight magnetic field alignment started (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00441">ekf.h:441</a></div></div>
<div class="ttc" id="class_ekf_html_af9fc18d45e3f147aeff0674747fa552b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af9fc18d45e3f147aeff0674747fa552b">Ekf::_sin_tilt_rng</a></div><div class="ttdeci">float _sin_tilt_rng</div><div class="ttdoc">sine of the range finder tilt rotation about the Y body axis </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00463">ekf.h:463</a></div></div>
<div class="ttc" id="class_ekf_html_a3d888a1e60fb15a61f723d6d49ef9b34"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3d888a1e60fb15a61f723d6d49ef9b34">Ekf::_time_yaw_started</a></div><div class="ttdeci">uint64_t _time_yaw_started</div><div class="ttdoc">last system time in usec that a yaw rotation manoeuvre was detected </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00356">ekf.h:356</a></div></div>
<div class="ttc" id="class_ekf_html_acf400c7b1112fe361356e09f9b8a80c7"><div class="ttname"><a href="../../dc/d66/class_ekf.html#acf400c7b1112fe361356e09f9b8a80c7">Ekf::_flow_innov_var</a></div><div class="ttdeci">float _flow_innov_var[2]</div><div class="ttdoc">flow innovation variance ((rad/sec)**2) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00393">ekf.h:393</a></div></div>
<div class="ttc" id="namespacematrix_html_a46a2a9f5c092d90cf33d4e0cac3f3593"><div class="ttname"><a href="../../d0/de4/namespacematrix.html#a46a2a9f5c092d90cf33d4e0cac3f3593">matrix::Quatf</a></div><div class="ttdeci">Quaternion&lt; float &gt; Quatf</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d42/_quaternion_8hpp_source.html#l00544">Quaternion.hpp:544</a></div></div>
<div class="ttc" id="class_ekf_html_a49a4da2e831b46876b307eb8e0560a12"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a49a4da2e831b46876b307eb8e0560a12">Ekf::zeroRows</a></div><div class="ttdeci">void zeroRows(float(&amp;cov_mat)[_k_num_states][_k_num_states], uint8_t first, uint8_t last)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01239">ekf_helper.cpp:1239</a></div></div>
<div class="ttc" id="class_ekf_html_a72581f4361d22bc18f469cd66fe13fff"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a72581f4361d22bc18f469cd66fe13fff">Ekf::quat_change</a></div><div class="ttdeci">Quatf quat_change</div><div class="ttdoc">quaternion delta due to last reset - multiply pre-reset quaternion by this to get post-reset quaterni...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00282">ekf.h:282</a></div></div>
<div class="ttc" id="structestimator_1_1gps__message_html"><div class="ttname"><a href="../../da/d7e/structestimator_1_1gps__message.html">estimator::gps_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/lib_2ecl_2_e_k_f_2common_8h_source.html#l00057">common.h:57</a></div></div>
<div class="ttc" id="class_ekf_html_afb2792627f6e81265ba5d5446130e40a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#afb2792627f6e81265ba5d5446130e40a">Ekf::set_min_required_gps_health_time</a></div><div class="ttdeci">void set_min_required_gps_health_time(uint32_t time_us)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00266">ekf.h:266</a></div></div>
<div class="ttc" id="class_ekf_html_ab3b24c8516353054ffb5a642a7a25b06"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab3b24c8516353054ffb5a642a7a25b06">Ekf::controlVelPosFusion</a></div><div class="ttdeci">void controlVelPosFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l01299">control.cpp:1299</a></div></div>
<div class="ttc" id="estimator__interface_8h_html"><div class="ttname"><a href="../../d9/d77/estimator__interface_8h.html">estimator_interface.h</a></div><div class="ttdoc">Definition of base class for attitude estimators. </div></div>
<div class="ttc" id="class_ekf_html_aa5373937e531323cdf59b8e83c722c95"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa5373937e531323cdf59b8e83c722c95">Ekf::_state_reset_status</a></div><div class="ttdeci">struct Ekf::@62 _state_reset_status</div><div class="ttdoc">reset event monitoring structure containing velocity, position, height and yaw reset information ...</div></div>
<div class="ttc" id="class_ekf_html_a5106b977efeb668b215df9b5d3e65994"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5106b977efeb668b215df9b5d3e65994">Ekf::_time_good_motion_us</a></div><div class="ttdeci">uint64_t _time_good_motion_us</div><div class="ttdoc">last system time that on-ground motion was within limits (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00398">ekf.h:398</a></div></div>
<div class="ttc" id="class_ekf_html_a7115759ac2c83f44bd39551c01b9879a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a7115759ac2c83f44bd39551c01b9879a">Ekf::get_vel_pos_innov</a></div><div class="ttdeci">void get_vel_pos_innov(float vel_pos_innov[6]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00829">ekf_helper.cpp:829</a></div></div>
<div class="ttc" id="class_ekf_html_ad29f668e2cb537f7e4373ccba9ef80ad"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad29f668e2cb537f7e4373ccba9ef80ad">Ekf::controlGpsFusion</a></div><div class="ttdeci">void controlGpsFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l00576">control.cpp:576</a></div></div>
<div class="ttc" id="class_ekf_html_ae7c135e78e21755b4db631d350949033"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ae7c135e78e21755b4db631d350949033">Ekf::_pos_meas_prev</a></div><div class="ttdeci">Vector3f _pos_meas_prev</div><div class="ttdoc">previous value of NED position measurement fused using odometry assumption (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00308">ekf.h:308</a></div></div>
<div class="ttc" id="class_ekf_html_a96990c59ceddd44ba217fcc4c577c43e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a96990c59ceddd44ba217fcc4c577c43e">Ekf::_fuse_pos</a></div><div class="ttdeci">bool _fuse_pos</div><div class="ttdoc">true when gps position data should be fused </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00294">ekf.h:294</a></div></div>
<div class="ttc" id="class_ekf_html_a962d6be8242144203599b519d6376f52"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a962d6be8242144203599b519d6376f52">Ekf::isYawAngleObservable</a></div><div class="ttdeci">bool isYawAngleObservable() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00227">mag_control.cpp:227</a></div></div>
<div class="ttc" id="class_ekf_html_a17541c6b2f74ed5bac8d1f5a36d68ca0"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a17541c6b2f74ed5bac8d1f5a36d68ca0">Ekf::_yaw_angle_observable</a></div><div class="ttdeci">bool _yaw_angle_observable</div><div class="ttdoc">true when there is enough horizontal acceleration to make yaw observable </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00355">ekf.h:355</a></div></div>
<div class="ttc" id="class_ekf_html_ab737c1a3cc1190bcffa0f9223799829f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab737c1a3cc1190bcffa0f9223799829f">Ekf::_last_known_posNE</a></div><div class="ttdeci">Vector2f _last_known_posNE</div><div class="ttdoc">last known local NE position vector (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00338">ekf.h:338</a></div></div>
<div class="ttc" id="class_ekf_html_a3181feb24523c531dc723511f3c1bc4b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3181feb24523c531dc723511f3c1bc4b">Ekf::_velObsVarNED</a></div><div class="ttdeci">Vector3f _velObsVarNED</div><div class="ttdoc">1-STD observation noise variance used for the fusion of NED velocity data (m/sec)**2 ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00302">ekf.h:302</a></div></div>
<div class="ttc" id="class_ekf_html_ab09f7d4ae6ff19d8465947f3e7005006"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab09f7d4ae6ff19d8465947f3e7005006">Ekf::_dt_last_range_update_filt_us</a></div><div class="ttdeci">float _dt_last_range_update_filt_us</div><div class="ttdoc">filtered value of the delta time elapsed since the last range measurement came into the filter (uSec)...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00466">ekf.h:466</a></div></div>
<div class="ttc" id="class_ekf_html_a9b83133d2d7daa33d044c3f2c2af6272"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9b83133d2d7daa33d044c3f2c2af6272">Ekf::_time_last_delpos_fuse</a></div><div class="ttdeci">uint64_t _time_last_delpos_fuse</div><div class="ttdoc">time the last fusion of incremental horizontal position measurements was performed (uSec) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00331">ekf.h:331</a></div></div>
<div class="ttc" id="class_ekf_html_a87f5d58f37f6854b44c3ea9a8cda6411"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a87f5d58f37f6854b44c3ea9a8cda6411">Ekf::_delVel_sum</a></div><div class="ttdeci">Vector3f _delVel_sum</div><div class="ttdoc">summed delta velocity (m/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00434">ekf.h:434</a></div></div>
<div class="ttc" id="class_ekf_html_adb8a3d8bddd5e3d3f5d49582a05ec7a9"><div class="ttname"><a href="../../dc/d66/class_ekf.html#adb8a3d8bddd5e3d3f5d49582a05ec7a9">Ekf::isRangeDataContinuous</a></div><div class="ttdeci">bool isRangeDataContinuous()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00749">ekf.h:749</a></div></div>
<div class="ttc" id="class_ekf_html_a8722aaa3baa6b8fb1a837b9478f35105"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a8722aaa3baa6b8fb1a837b9478f35105">Ekf::startMag3DFusion</a></div><div class="ttdeci">void startMag3DFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01608">ekf_helper.cpp:1608</a></div></div>
<div class="ttc" id="class_ekf_html_a20e6be3ed2403b4d675ea33c463b3977"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a20e6be3ed2403b4d675ea33c463b3977">Ekf::Ekf</a></div><div class="ttdeci">Ekf()=default</div></div>
<div class="ttc" id="class_ekf_html_a5b265a0429b1510ac0ef9fcba510360e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5b265a0429b1510ac0ef9fcba510360e">Ekf::initHagl</a></div><div class="ttdeci">bool initHagl()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d47/ecl_2_e_k_f_2terrain__estimator_8cpp_source.html#l00046">terrain_estimator.cpp:46</a></div></div>
<div class="ttc" id="class_ekf_html_a5ff41038aa3facab845a8980f96ddeba"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5ff41038aa3facab845a8980f96ddeba">Ekf::get_gps_check_status</a></div><div class="ttdeci">void get_gps_check_status(uint16_t *val) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00896">ekf_helper.cpp:896</a></div></div>
<div class="ttc" id="class_ekf_html_a0d270537ecebeb4065a1b97e5e586e7f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0d270537ecebeb4065a1b97e5e586e7f">Ekf::run3DMagAndDeclFusions</a></div><div class="ttdeci">void run3DMagAndDeclFusions()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00333">mag_control.cpp:333</a></div></div>
<div class="ttc" id="class_ekf_html_ae48ba7943ed29615945abf4bcb77f575"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ae48ba7943ed29615945abf4bcb77f575">Ekf::_airspeed_innov</a></div><div class="ttdeci">float _airspeed_innov</div><div class="ttdoc">airspeed measurement innovation (m/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00379">ekf.h:379</a></div></div>
<div class="ttc" id="class_ekf_html_a83e1ee3bdbcf0beabb85e0eef87a962a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a83e1ee3bdbcf0beabb85e0eef87a962a">Ekf::fuseDrag</a></div><div class="ttdeci">void fuseDrag()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd8/drag__fusion_8cpp_source.html#l00046">drag_fusion.cpp:46</a></div></div>
<div class="ttc" id="class_ekf_html_af32f79b3c4fed49cba4b86a69e431ed9"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af32f79b3c4fed49cba4b86a69e431ed9">Ekf::_delta_time_baro_us</a></div><div class="ttdeci">uint64_t _delta_time_baro_us</div><div class="ttdoc">delta time between two consecutive delayed baro samples from the buffer (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00342">ekf.h:342</a></div></div>
<div class="ttc" id="class_ekf_html_aa2c5a9b5968445e5432ddb150fcb18d2"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa2c5a9b5968445e5432ddb150fcb18d2">Ekf::_last_on_ground_posD</a></div><div class="ttdeci">float _last_on_ground_posD</div><div class="ttdoc">last vertical position when the in_air status was false (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00439">ekf.h:439</a></div></div>
<div class="ttc" id="structestimator_1_1state_sample_html"><div class="ttname"><a href="../../de/d11/structestimator_1_1state_sample.html">estimator::stateSample</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/lib_2ecl_2_e_k_f_2common_8h_source.html#l00367">common.h:367</a></div></div>
<div class="ttc" id="class_ekf_html_a1840694d8d4a1e71d2847a02d0e14964"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a1840694d8d4a1e71d2847a02d0e14964">Ekf::checkHaglYawResetReq</a></div><div class="ttdeci">void checkHaglYawResetReq()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00115">mag_control.cpp:115</a></div></div>
<div class="ttc" id="class_ekf_html_af35df366a6d4f3246b63a01566210a7c"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af35df366a6d4f3246b63a01566210a7c">Ekf::predictCovariance</a></div><div class="ttdeci">void predictCovariance()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d38/covariance_8cpp_source.html#l00135">covariance.cpp:135</a></div></div>
<div class="ttc" id="class_ekf_html_a82bb548da63d49e7f01339c717297695"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a82bb548da63d49e7f01339c717297695">Ekf::_num_bad_flight_yaw_events</a></div><div class="ttdeci">uint8_t _num_bad_flight_yaw_events</div><div class="ttdoc">number of times a bad heading has been detected in flight and required a yaw reset ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00357">ekf.h:357</a></div></div>
<div class="ttc" id="class_ekf_html_a3a5746a93bc89940139428190db96f38"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3a5746a93bc89940139428190db96f38">Ekf::runInAirYawReset</a></div><div class="ttdeci">void runInAirYawReset()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00154">mag_control.cpp:154</a></div></div>
<div class="ttc" id="class_ekf_html_a3773a8a0965d3e838bdf3959a0b7ba62"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3773a8a0965d3e838bdf3959a0b7ba62">Ekf::_time_last_vel_fuse</a></div><div class="ttdeci">uint64_t _time_last_vel_fuse</div><div class="ttdoc">time the last fusion of velocity measurements was performed (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00332">ekf.h:332</a></div></div>
<div class="ttc" id="class_ekf_html_ad3e94add45ddaa2e835769005cf5f3ca"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad3e94add45ddaa2e835769005cf5f3ca">Ekf::_ang_rate_mag_filt</a></div><div class="ttdeci">float _ang_rate_mag_filt</div><div class="ttdoc">angular rate magnitude after application of a decaying envelope filter (rad/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00453">ekf.h:453</a></div></div>
<div class="ttc" id="class_ekf_html_ad169897dd355a0b3db39d811b9af4bfb"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad169897dd355a0b3db39d811b9af4bfb">Ekf::isRangeAidSuitable</a></div><div class="ttdeci">bool isRangeAidSuitable()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00686">ekf.h:686</a></div></div>
<div class="ttc" id="class_ekf_html_af644f0431ec8322a6e6bc2dfb7cdff3d"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af644f0431ec8322a6e6bc2dfb7cdff3d">Ekf::fuseHeading</a></div><div class="ttdeci">void fuseHeading()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d21/mag__fusion_8cpp_source.html#l00438">mag_fusion.cpp:438</a></div></div>
<div class="ttc" id="class_ekf_html_a6f6f48aed663e001288c80189f5cb5b4"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6f6f48aed663e001288c80189f5cb5b4">Ekf::getHaglInnov</a></div><div class="ttdeci">void getHaglInnov(float *hagl_innov) override</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d47/ecl_2_e_k_f_2terrain__estimator_8cpp_source.html#l00311">terrain_estimator.cpp:311</a></div></div>
<div class="ttc" id="class_ekf_html_a0cc7428fdc526b4852b7a1c909b94810"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0cc7428fdc526b4852b7a1c909b94810">Ekf::_baro_hgt_offset</a></div><div class="ttdeci">float _baro_hgt_offset</div><div class="ttdoc">baro height reading at the local NED origin (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00436">ekf.h:436</a></div></div>
<div class="ttc" id="class_ekf_html_a6bb63bb66e3480e256722a5d31687c20"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a6bb63bb66e3480e256722a5d31687c20">Ekf::_gpsDriftVelE</a></div><div class="ttdeci">float _gpsDriftVelE</div><div class="ttdoc">GPS east position derivative (m/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00412">ekf.h:412</a></div></div>
<div class="ttc" id="class_ekf_html_a60d78649f1a0734414b999367a09505d"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a60d78649f1a0734414b999367a09505d">Ekf::get_wind_velocity_var</a></div><div class="ttdeci">void get_wind_velocity_var(float *wind_var) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db6/airspeed__fusion_8cpp_source.html#l00245">airspeed_fusion.cpp:245</a></div></div>
<div class="ttc" id="class_ekf_html_a3340c762e82a827c4fafbd454e98d8e0"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3340c762e82a827c4fafbd454e98d8e0">Ekf::_hgt_counter</a></div><div class="ttdeci">uint32_t _hgt_counter</div><div class="ttdoc">number of height samples read during initialisation </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00428">ekf.h:428</a></div></div>
<div class="ttc" id="class_ekf_html_abd99d3442f6872caf9e226d0f6e5f293"><div class="ttname"><a href="../../dc/d66/class_ekf.html#abd99d3442f6872caf9e226d0f6e5f293">Ekf::controlAirDataFusion</a></div><div class="ttdeci">void controlAirDataFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d92/control_8cpp_source.html#l01199">control.cpp:1199</a></div></div>
<div class="ttc" id="class_ekf_html_a69eee7003191b8208c51c5f1453f0ad4"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a69eee7003191b8208c51c5f1453f0ad4">Ekf::init</a></div><div class="ttdeci">bool init(uint64_t timestamp) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7a/ekf_8cpp_source.html#l00047">ekf.cpp:47</a></div></div>
<div class="ttc" id="class_estimator_interface_html_a784f8cb858c7842492298da42b89c673"><div class="ttname"><a href="../../d5/d73/class_estimator_interface.html#a784f8cb858c7842492298da42b89c673">EstimatorInterface::FILTER_UPDATE_PERIOD_S</a></div><div class="ttdeci">static constexpr float FILTER_UPDATE_PERIOD_S</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d77/estimator__interface_8h_source.html#l00411">estimator_interface.h:411</a></div></div>
<div class="ttc" id="class_ekf_html_adedc1dc5e57f319a2b0d70452ea36238"><div class="ttname"><a href="../../dc/d66/class_ekf.html#adedc1dc5e57f319a2b0d70452ea36238">Ekf::check3DMagFusionSuitability</a></div><div class="ttdeci">void check3DMagFusionSuitability()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00187">mag_control.cpp:187</a></div></div>
<div class="ttc" id="class_ekf_html_ad360245cc68e9b5245923a7e76ecd0a6"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad360245cc68e9b5245923a7e76ecd0a6">Ekf::_q_down_sampled</a></div><div class="ttdeci">Quatf _q_down_sampled</div><div class="ttdoc">down sampled quaternion (tracking delta angles between ekf update steps) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00405">ekf.h:405</a></div></div>
<div class="ttc" id="class_ekf_html_ac89300ffcaaad5892ee4d19696037001"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac89300ffcaaad5892ee4d19696037001">Ekf::_bad_vert_accel_detected</a></div><div class="ttdeci">bool _bad_vert_accel_detected</div><div class="ttdoc">true when bad vertical accelerometer data has been detected </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00479">ekf.h:479</a></div></div>
<div class="ttc" id="class_ekf_html_a5e11064b04c01923452d6523d4d29542"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5e11064b04c01923452d6523d4d29542">Ekf::uncorrelateQuatStates</a></div><div class="ttdeci">void uncorrelateQuatStates()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01278">ekf_helper.cpp:1278</a></div></div>
<div class="ttc" id="class_ekf_html_a0d00f1af5ef0a7c03050ffe0d4d6f7be"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0d00f1af5ef0a7c03050ffe0d4d6f7be">Ekf::position_covariances</a></div><div class="ttdeci">matrix::SquareMatrix&lt; float, 3 &gt; position_covariances() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00141">ekf.h:141</a></div></div>
<div class="ttc" id="class_ekf_html_a8f9585dd541a53e59a8a89ce1ce9a250"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a8f9585dd541a53e59a8a89ce1ce9a250">Ekf::velocity_covariances</a></div><div class="ttdeci">matrix::SquareMatrix&lt; float, 3 &gt; velocity_covariances() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00138">ekf.h:138</a></div></div>
<div class="ttc" id="class_ekf_html_aa39b72030ae0b9b957f337379f6cee6d"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa39b72030ae0b9b957f337379f6cee6d">Ekf::get_quat_reset</a></div><div class="ttdeci">void get_quat_reset(float delta_quat[4], uint8_t *counter) override</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00243">ekf.h:243</a></div></div>
<div class="ttc" id="class_ekf_html_aa3557241350622e78d0ef053e28177dc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa3557241350622e78d0ef053e28177dc">Ekf::stopMagFusion</a></div><div class="ttdeci">void stopMagFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01581">ekf_helper.cpp:1581</a></div></div>
<div class="ttc" id="class_ekf_html_adc2160d684ccf63b88fa0062458126bc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#adc2160d684ccf63b88fa0062458126bc">Ekf::_gps_velN_filt</a></div><div class="ttdeci">float _gps_velN_filt</div><div class="ttdoc">GPS filtered North velocity (m/sec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00415">ekf.h:415</a></div></div>
<div class="ttc" id="class_ekf_html_ae0c709941cf63682abdce8599ed40114"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ae0c709941cf63682abdce8599ed40114">Ekf::_earth_rate_initialised</a></div><div class="ttdeci">bool _earth_rate_initialised</div><div class="ttdoc">true when we know the earth rotatin rate (requires GPS) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00291">ekf.h:291</a></div></div>
<div class="ttc" id="class_ekf_html_ae82204293e9423bbb5e6e58c8d40dc5f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ae82204293e9423bbb5e6e58c8d40dc5f">Ekf::_ev_rot_vec_filt</a></div><div class="ttdeci">Vector3f _ev_rot_vec_filt</div><div class="ttdoc">filtered rotation vector defining the rotation EV to EKF reference, initiliazied to zero rotation (ra...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00311">ekf.h:311</a></div></div>
<div class="ttc" id="class_ekf_html_ad88164e7feeb3f3c51c0d44c9d290832"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad88164e7feeb3f3c51c0d44c9d290832">Ekf::updateRangeDataStuck</a></div><div class="ttdeci">void updateRangeDataStuck()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d95/range__finder__checks_8cpp_source.html#l00110">range_finder_checks.cpp:110</a></div></div>
<div class="ttc" id="class_ekf_html_a580c523e7ca80c0d21a76f9d345e04e8"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a580c523e7ca80c0d21a76f9d345e04e8">Ekf::updateRangeDataValidity</a></div><div class="ttdeci">void updateRangeDataValidity()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d95/range__finder__checks_8cpp_source.html#l00057">range_finder_checks.cpp:57</a></div></div>
<div class="ttc" id="class_ekf_html_aebc76db99cc062452f100742a80c4de6"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aebc76db99cc062452f100742a80c4de6">Ekf::fuseOptFlow</a></div><div class="ttdeci">void fuseOptFlow()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d01/optflow__fusion_8cpp_source.html#l00048">optflow_fusion.cpp:48</a></div></div>
<div class="ttc" id="class_ekf_html_ad2497b194654b9aadee1d7bcc189e91e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad2497b194654b9aadee1d7bcc189e91e">Ekf::_delta_angle_corr</a></div><div class="ttdeci">Vector3f _delta_angle_corr</div><div class="ttdoc">delta angle correction vector (rad) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00403">ekf.h:403</a></div></div>
<div class="ttc" id="class_ekf_html_a31a8f6b2d39fbbc2e5f5bd02ed5088dc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a31a8f6b2d39fbbc2e5f5bd02ed5088dc">Ekf::get_beta_innov</a></div><div class="ttdeci">void get_beta_innov(float *beta_innov) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00853">ekf_helper.cpp:853</a></div></div>
<div class="ttc" id="class_ekf_html_a0a50b20622b267e7989a95901f54870b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0a50b20622b267e7989a95901f54870b">Ekf::_k_num_states</a></div><div class="ttdeci">static constexpr uint8_t _k_num_states</div><div class="ttdoc">number of EKF states </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00270">ekf.h:270</a></div></div>
<div class="ttc" id="class_ekf_html_a66fce94131503857e8a718c2cc4b3373"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a66fce94131503857e8a718c2cc4b3373">Ekf::get_innovation_test_status</a></div><div class="ttdeci">void get_innovation_test_status(uint16_t *status, float *mag, float *vel, float *pos, float *hgt, float *tas, float *hagl, float *beta) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01157">ekf_helper.cpp:1157</a></div></div>
<div class="ttc" id="class_ekf_html_a9671b9635e851d44eb1faf56198c4edd"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9671b9635e851d44eb1faf56198c4edd">Ekf::_time_last_beta_fuse</a></div><div class="ttdeci">uint64_t _time_last_beta_fuse</div><div class="ttdoc">time the last fusion of synthetic sideslip measurements were performed (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00336">ekf.h:336</a></div></div>
<div class="ttc" id="class_ekf_html_ac6b7615a74185fb1ffec1e08fa450c0a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac6b7615a74185fb1ffec1e08fa450c0a">Ekf::_accel_vec_filt</a></div><div class="ttdeci">Vector3f _accel_vec_filt</div><div class="ttdoc">acceleration vector after application of a low pass filter (m/sec**2) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00451">ekf.h:451</a></div></div>
<div class="ttc" id="class_ekf_html_a68d5b523ef75680c85bebe1f8f134d6b"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a68d5b523ef75680c85bebe1f8f134d6b">Ekf::_time_last_hagl_fuse</a></div><div class="ttdeci">uint64_t _time_last_hagl_fuse</div><div class="ttdoc">last system time that the hagl measurement failed it&amp;#39;s checks (uSec) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00461">ekf.h:461</a></div></div>
<div class="ttc" id="class_ekf_html_a370143a5adf9bb617c03a85855622259"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a370143a5adf9bb617c03a85855622259">Ekf::_dt_ekf_avg</a></div><div class="ttdeci">float _dt_ekf_avg</div><div class="ttdoc">average update rate of the ekf </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00285">ekf.h:285</a></div></div>
<div class="ttc" id="class_ekf_html_ac9f30b0c61c2624c0124866d30981bdc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ac9f30b0c61c2624c0124866d30981bdc">Ekf::velNE_counter</a></div><div class="ttdeci">uint8_t velNE_counter</div><div class="ttdoc">number of horizontal position reset events (allow to wrap if count exceeds 255) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00273">ekf.h:273</a></div></div>
<div class="ttc" id="class_ekf_html_a1b9045ddff0f8b0d8a695e1648198f52"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a1b9045ddff0f8b0d8a695e1648198f52">Ekf::_gps_data_ready</a></div><div class="ttdeci">bool _gps_data_ready</div><div class="ttdoc">true when new GPS data has fallen behind the fusion time horizon and is available to be fused ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00317">ekf.h:317</a></div></div>
<div class="ttc" id="class_ekf_html_a427d41afde8eb4acb8fc5290bcfbcb9a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a427d41afde8eb4acb8fc5290bcfbcb9a">Ekf::resetPosition</a></div><div class="ttdeci">bool resetPosition()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00139">ekf_helper.cpp:139</a></div></div>
<div class="ttc" id="class_ekf_html_adc60c3f193f21850b93e6e368e5f66a4"><div class="ttname"><a href="../../dc/d66/class_ekf.html#adc60c3f193f21850b93e6e368e5f66a4">Ekf::calcOptFlowBodyRateComp</a></div><div class="ttdeci">bool calcOptFlowBodyRateComp()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d01/optflow__fusion_8cpp_source.html#l00542">optflow_fusion.cpp:542</a></div></div>
<div class="ttc" id="class_ekf_html_a80f10caaa9a04cf28d0cd7b26159f067"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a80f10caaa9a04cf28d0cd7b26159f067">Ekf::isMagBiasObservable</a></div><div class="ttdeci">bool isMagBiasObservable() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00232">mag_control.cpp:232</a></div></div>
<div class="ttc" id="class_ekf_html_aeaea43a3548eb98c18eb340895d030fc"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aeaea43a3548eb98c18eb340895d030fc">Ekf::get_drag_innov</a></div><div class="ttdeci">void get_drag_innov(float drag_innov[2]) override</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d01/optflow__fusion_8cpp_source.html#l00529">optflow_fusion.cpp:529</a></div></div>
<div class="ttc" id="class_ekf_html_a174a8ebf58b267ae263cd8a64dc776d6"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a174a8ebf58b267ae263cd8a64dc776d6">Ekf::update</a></div><div class="ttdeci">bool update() override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7a/ekf_8cpp_source.html#l00117">ekf.cpp:117</a></div></div>
<div class="ttc" id="class_ekf_html_aa4df90e91dd289376fb0935c9facd7e2"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa4df90e91dd289376fb0935c9facd7e2">Ekf::isTerrainEstimateValid</a></div><div class="ttdeci">bool isTerrainEstimateValid() const override</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d47/ecl_2_e_k_f_2terrain__estimator_8cpp_source.html#l00287">terrain_estimator.cpp:287</a></div></div>
<div class="ttc" id="class_ekf_html_a980d746b55e5f2ef9c17c55c41fede5d"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a980d746b55e5f2ef9c17c55c41fede5d">Ekf::_pos_err_integ</a></div><div class="ttdeci">Vector3f _pos_err_integ</div><div class="ttdoc">integral of position tracking error (m.s) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00407">ekf.h:407</a></div></div>
<div class="ttc" id="class_ekf_html_a0828d9e222ff448c3686d36d3eafbad3"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a0828d9e222ff448c3686d36d3eafbad3">Ekf::startMagHdgFusion</a></div><div class="ttdeci">void startMagHdgFusion()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01602">ekf_helper.cpp:1602</a></div></div>
<div class="ttc" id="class_ekf_html_a9959bb8dae3a9997fb6b08843addbcc8"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9959bb8dae3a9997fb6b08843addbcc8">Ekf::_height_rate_lpf</a></div><div class="ttdeci">float _height_rate_lpf</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00489">ekf.h:489</a></div></div>
<div class="ttc" id="class_ekf_html_a64a5f5592204ab8f11fee0bd1ca67cdb"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a64a5f5592204ab8f11fee0bd1ca67cdb">Ekf::get_beta_innov_var</a></div><div class="ttdeci">void get_beta_innov_var(float *beta_innov_var) override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l00884">ekf_helper.cpp:884</a></div></div>
<div class="ttc" id="class_ekf_html_a9f0aa45ebf4e8a001e901fd895a49613"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9f0aa45ebf4e8a001e901fd895a49613">Ekf::velNE_change</a></div><div class="ttdeci">Vector2f velNE_change</div><div class="ttdoc">North East velocity change due to last reset (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00278">ekf.h:278</a></div></div>
<div class="ttc" id="class_ekf_html_a11105d600c13d5792cafa859b71106ae"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a11105d600c13d5792cafa859b71106ae">Ekf::_using_synthetic_position</a></div><div class="ttdeci">bool _using_synthetic_position</div><div class="ttdoc">true if we are using a synthetic position to constrain drift </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00328">ekf.h:328</a></div></div>
<div class="ttc" id="class_ekf_html_a9f954eb2ac15055a4932c47c25b71a93"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a9f954eb2ac15055a4932c47c25b71a93">Ekf::_mag_use_not_inhibit_us</a></div><div class="ttdeci">uint64_t _mag_use_not_inhibit_us</div><div class="ttdoc">last system time in usec before magnetometer use was inhibited </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00358">ekf.h:358</a></div></div>
<div class="ttc" id="class_ekf_html_aa243905f7a54a626f293cc031cc44687"><div class="ttname"><a href="../../dc/d66/class_ekf.html#aa243905f7a54a626f293cc031cc44687">Ekf::_mag_data_ready</a></div><div class="ttdeci">bool _mag_data_ready</div><div class="ttdoc">true when new magnetometer data has fallen behind the fusion time horizon and is available to be fuse...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00318">ekf.h:318</a></div></div>
<div class="ttc" id="class_ekf_html_a62df1019ac9cfdb1169c5460be4e27e5"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a62df1019ac9cfdb1169c5460be4e27e5">Ekf::_gps_error_norm</a></div><div class="ttdeci">float _gps_error_norm</div><div class="ttdoc">normalised gps error </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00419">ekf.h:419</a></div></div>
<div class="ttc" id="class_ekf_html_a413ed6bcf2f318fffc624672360d6907"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a413ed6bcf2f318fffc624672360d6907">Ekf::global_position_is_valid</a></div><div class="ttdeci">bool global_position_is_valid() override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d5c/ekf__helper_8cpp_source.html#l01317">ekf_helper.cpp:1317</a></div></div>
<div class="ttc" id="class_ekf_html_a235e6e03f6e6611fd053b395adc71b3a"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a235e6e03f6e6611fd053b395adc71b3a">Ekf::calcOptFlowMeasVar</a></div><div class="ttdeci">float calcOptFlowMeasVar()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d01/optflow__fusion_8cpp_source.html#l00589">optflow_fusion.cpp:589</a></div></div>
<div class="ttc" id="class_ekf_html_a16c805d4e24fd8fe7f7391cdc3f34447"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a16c805d4e24fd8fe7f7391cdc3f34447">Ekf::_range_data_ready</a></div><div class="ttdeci">bool _range_data_ready</div><div class="ttdoc">true when new range finder data has fallen behind the fusion time horizon and is available to be fuse...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00320">ekf.h:320</a></div></div>
<div class="ttc" id="class_ekf_html_a3d6387e362409f5306a3a7cfde7d7401"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a3d6387e362409f5306a3a7cfde7d7401">Ekf::isMeasuredMatchingAverageMagStrength</a></div><div class="ttdeci">bool isMeasuredMatchingAverageMagStrength() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00308">mag_control.cpp:308</a></div></div>
<div class="ttc" id="class_ekf_html_a5dfe0d30def39dec09939e0edbac6853"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a5dfe0d30def39dec09939e0edbac6853">Ekf::_rng_filt_state</a></div><div class="ttdeci">float _rng_filt_state</div><div class="ttdoc">filtered height measurement (m) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00429">ekf.h:429</a></div></div>
<div class="ttc" id="class_ekf_html_a4946eb7ab38bacee07201925350f1a29"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a4946eb7ab38bacee07201925350f1a29">Ekf::_mag_bias_observable</a></div><div class="ttdeci">bool _mag_bias_observable</div><div class="ttdoc">true when there is enough rotation to make magnetometer bias errors observable </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00354">ekf.h:354</a></div></div>
<div class="ttc" id="class_ekf_html_ad11324e8afcb4d6a0452d925949c3e34"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ad11324e8afcb4d6a0452d925949c3e34">Ekf::_fuse_hor_vel_aux</a></div><div class="ttdeci">bool _fuse_hor_vel_aux</div><div class="ttdoc">true when auxiliary horizontal velocity measurement should be fused </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00297">ekf.h:297</a></div></div>
<div class="ttc" id="class_ekf_html_af3f59b6a4316bd040a3563a17da75a5e"><div class="ttname"><a href="../../dc/d66/class_ekf.html#af3f59b6a4316bd040a3563a17da75a5e">Ekf::resetStates</a></div><div class="ttdeci">void resetStates() override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7a/ekf_8cpp_source.html#l00099">ekf.cpp:99</a></div></div>
<div class="ttc" id="class_ekf_html_ab46a0c26c40fb91a696caf4648d77a6d"><div class="ttname"><a href="../../dc/d66/class_ekf.html#ab46a0c26c40fb91a696caf4648d77a6d">Ekf::_is_range_aid_suitable</a></div><div class="ttdeci">bool _is_range_aid_suitable</div><div class="ttdoc">true when range finder can be used in flight as the height reference instead of the primary height se...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d14/ekf_8h_source.html#l00482">ekf.h:482</a></div></div>
<div class="ttc" id="class_ekf_html_a98467e9ac82824344baf0575ed40db5f"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a98467e9ac82824344baf0575ed40db5f">Ekf::resetStatesAndCovariances</a></div><div class="ttdeci">void resetStatesAndCovariances() override</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7a/ekf_8cpp_source.html#l00093">ekf.cpp:93</a></div></div>
<div class="ttc" id="class_ekf_html_a668eac17be299fcd8995f28be4151266"><div class="ttname"><a href="../../dc/d66/class_ekf.html#a668eac17be299fcd8995f28be4151266">Ekf::checkYawAngleObservability</a></div><div class="ttdeci">void checkYawAngleObservability()</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbf/mag__control_8cpp_source.html#l00197">mag_control.cpp:197</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_c85d3e3c5052e9ad9ce18c6863244a25.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_6f10fbb79da377506552735e446823ce.html">ecl</a></li><li class="navelem"><a class="el" href="../../dir_303783c36f10d27e903dca461e42714a.html">EKF</a></li><li class="navelem"><a class="el" href="../../de/d14/ekf_8h.html">ekf.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
