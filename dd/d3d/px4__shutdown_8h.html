<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>PX4 Firmware: src/platforms/px4_shutdown.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PX4 Firmware
   </div>
   <div id="projectbrief">PX4 Autopilot Software http://px4.io</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dd/d3d/px4__shutdown_8h.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">px4_shutdown.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Power-related API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for px4_shutdown.h:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/db5/px4__shutdown_8h__incl.svg" width="208" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d1/da3/px4__shutdown_8h__dep__incl.svg" width="100%" height="395"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</div>
<p><a href="../../dd/d3d/px4__shutdown_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aed5fa2862e48b0a663d1f82d64a70515"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/db5/visibility_8h.html#ad10ef148ba8327bd530fc6c32c1e181c">__EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d3d/px4__shutdown_8h.html#aed5fa2862e48b0a663d1f82d64a70515">px4_register_shutdown_hook</a> (<a class="el" href="../../dd/d3d/px4__shutdown_8h.html#af369fc25dfe239c4509251e7efa3b88c">shutdown_hook_t</a> hook)</td></tr>
<tr class="memdesc:aed5fa2862e48b0a663d1f82d64a70515"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a method that should be called when powering off (and also on reboot).  <a href="#aed5fa2862e48b0a663d1f82d64a70515">More...</a><br /></td></tr>
<tr class="separator:aed5fa2862e48b0a663d1f82d64a70515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28a443b4b848b5c2c04719ed3159fbbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/db5/visibility_8h.html#ad10ef148ba8327bd530fc6c32c1e181c">__EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d3d/px4__shutdown_8h.html#a28a443b4b848b5c2c04719ed3159fbbc">px4_unregister_shutdown_hook</a> (<a class="el" href="../../dd/d3d/px4__shutdown_8h.html#af369fc25dfe239c4509251e7efa3b88c">shutdown_hook_t</a> hook)</td></tr>
<tr class="memdesc:a28a443b4b848b5c2c04719ed3159fbbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a shutdown hook.  <a href="#a28a443b4b848b5c2c04719ed3159fbbc">More...</a><br /></td></tr>
<tr class="separator:a28a443b4b848b5c2c04719ed3159fbbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab642dc0643e5414a3bc6e3d1f5185680"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/db5/visibility_8h.html#ad10ef148ba8327bd530fc6c32c1e181c">__EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d3d/px4__shutdown_8h.html#ab642dc0643e5414a3bc6e3d1f5185680">px4_shutdown_request</a> (bool reboot, bool to_bootloader)</td></tr>
<tr class="memdesc:ab642dc0643e5414a3bc6e3d1f5185680"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request the system to shut down or reboot.  <a href="#ab642dc0643e5414a3bc6e3d1f5185680">More...</a><br /></td></tr>
<tr class="separator:ab642dc0643e5414a3bc6e3d1f5185680"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73061bbae08f96ef6387f71e7beb2613"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/db5/visibility_8h.html#ad10ef148ba8327bd530fc6c32c1e181c">__EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d3d/px4__shutdown_8h.html#a73061bbae08f96ef6387f71e7beb2613">px4_shutdown_lock</a> (void)</td></tr>
<tr class="memdesc:a73061bbae08f96ef6387f71e7beb2613"><td class="mdescLeft">&#160;</td><td class="mdescRight">Grab the shutdown lock.  <a href="#a73061bbae08f96ef6387f71e7beb2613">More...</a><br /></td></tr>
<tr class="separator:a73061bbae08f96ef6387f71e7beb2613"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86494415d898847c1e8bf6d7e6cad5ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/db5/visibility_8h.html#ad10ef148ba8327bd530fc6c32c1e181c">__EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d3d/px4__shutdown_8h.html#a86494415d898847c1e8bf6d7e6cad5ac">px4_shutdown_unlock</a> (void)</td></tr>
<tr class="memdesc:a86494415d898847c1e8bf6d7e6cad5ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the shutdown lock.  <a href="#a86494415d898847c1e8bf6d7e6cad5ac">More...</a><br /></td></tr>
<tr class="separator:a86494415d898847c1e8bf6d7e6cad5ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af369fc25dfe239c4509251e7efa3b88c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/db5/visibility_8h.html#a568e6bde99652b7fd271ad206cfe38f5">__BEGIN_DECLS</a> typedef bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d3d/px4__shutdown_8h.html#af369fc25dfe239c4509251e7efa3b88c">shutdown_hook_t</a> )(void)</td></tr>
<tr class="memdesc:af369fc25dfe239c4509251e7efa3b88c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown hook callback method (.  <a href="#af369fc25dfe239c4509251e7efa3b88c">More...</a><br /></td></tr>
<tr class="separator:af369fc25dfe239c4509251e7efa3b88c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Power-related API. </p>

<p>Definition in file <a class="el" href="../../dd/d3d/px4__shutdown_8h_source.html">px4_shutdown.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aed5fa2862e48b0a663d1f82d64a70515"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/db5/visibility_8h.html#ad10ef148ba8327bd530fc6c32c1e181c">__EXPORT</a> int px4_register_shutdown_hook </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d3d/px4__shutdown_8h.html#af369fc25dfe239c4509251e7efa3b88c">shutdown_hook_t</a>&#160;</td>
          <td class="paramname"><em>hook</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a method that should be called when powering off (and also on reboot). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hook</td><td>callback method. It must not block, but return immediately. When the system is requested to shutdown, the registered hooks will be called regularily until either all of them return true, or a timeout is reached. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, &lt;0 on error </dd></dl>

<p>Definition at line <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00138">138</a> of file <a class="el" href="../../df/d04/shutdown_8cpp_source.html">shutdown.cpp</a>.</p>

<p>References <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00124">max_shutdown_hooks</a>, <a class="el" href="../../d6/dfb/stubs__posix_8c_source.html#l00101">pthread_mutex_lock()</a>, <a class="el" href="../../d6/dfb/stubs__posix_8c_source.html#l00106">pthread_mutex_unlock()</a>, <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00125">shutdown_hooks</a>, and <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00048">shutdown_mutex</a>.</p>

<p>Referenced by <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00064">px4_shutdown_unlock()</a>, and <a class="el" href="../../d3/d30/logger_8cpp_source.html#l00800">px4::logger::Logger::run()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d3d/px4__shutdown_8h_aed5fa2862e48b0a663d1f82d64a70515_cgraph.svg" width="403" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d3d/px4__shutdown_8h_aed5fa2862e48b0a663d1f82d64a70515_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a73061bbae08f96ef6387f71e7beb2613"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/db5/visibility_8h.html#ad10ef148ba8327bd530fc6c32c1e181c">__EXPORT</a> int px4_shutdown_lock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Grab the shutdown lock. </p>
<p>It will prevent the system from shutting down until the lock is released. It is safe to call this recursively. </p><dl class="section return"><dt>Returns</dt><dd>0 on success, &lt;0 on error </dd></dl>

<p>Definition at line <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00052">52</a> of file <a class="el" href="../../df/d04/shutdown_8cpp_source.html">shutdown.cpp</a>.</p>

<p>References <a class="el" href="../../d6/dfb/stubs__posix_8c_source.html#l00101">pthread_mutex_lock()</a>, <a class="el" href="../../d6/dfb/stubs__posix_8c_source.html#l00106">pthread_mutex_unlock()</a>, <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00050">shutdown_lock_counter</a>, and <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00048">shutdown_mutex</a>.</p>

<p>Referenced by <a class="el" href="../../d9/da5/param_8c_source.html#l01033">param_export()</a>, <a class="el" href="../../d2/d06/flashparams_8c_source.html#l00076">param_export_internal()</a>, and <a class="el" href="../../d6/d45/reboot_8c_source.html#l00060">reboot_main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d3d/px4__shutdown_8h_a73061bbae08f96ef6387f71e7beb2613_cgraph.svg" width="350" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d3d/px4__shutdown_8h_a73061bbae08f96ef6387f71e7beb2613_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab642dc0643e5414a3bc6e3d1f5185680"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/db5/visibility_8h.html#ad10ef148ba8327bd530fc6c32c1e181c">__EXPORT</a> int px4_shutdown_request </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>reboot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>to_bootloader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request the system to shut down or reboot. </p>
<p>Note the following:</p><ul>
<li>The system might not support to shutdown (or reboot). In that case -EINVAL will be returned.</li>
<li>The system might not shutdown immediately, so expect this method to return even on success. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reboot</td><td>perform a reboot instead of a shutdown </td></tr>
    <tr><td class="paramname">to_bootloader</td><td>reboot into bootloader mode (only used if reboot is true) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, &lt;0 on error </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00205">205</a> of file <a class="el" href="../../df/d04/shutdown_8cpp_source.html">shutdown.cpp</a>.</p>

<p>References <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00118">SHUTDOWN_ARG_IN_PROGRESS</a>, <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00119">SHUTDOWN_ARG_REBOOT</a>, <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00120">SHUTDOWN_ARG_TO_BOOTLOADER</a>, <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00121">shutdown_args</a>, and <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00172">shutdown_worker()</a>.</p>

<p>Referenced by <a class="el" href="../../da/d73/_commander_8cpp_source.html#l03561">commander_low_prio_loop()</a>, <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00064">px4_shutdown_unlock()</a>, <a class="el" href="../../d6/d45/reboot_8c_source.html#l00060">reboot_main()</a>, and <a class="el" href="../../da/d73/_commander_8cpp_source.html#l01111">Commander::run()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d3d/px4__shutdown_8h_ab642dc0643e5414a3bc6e3d1f5185680_cgraph.svg" width="540" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d3d/px4__shutdown_8h_ab642dc0643e5414a3bc6e3d1f5185680_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a86494415d898847c1e8bf6d7e6cad5ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/db5/visibility_8h.html#ad10ef148ba8327bd530fc6c32c1e181c">__EXPORT</a> int px4_shutdown_unlock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release the shutdown lock. </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, &lt;0 on error </dd></dl>

<p>Definition at line <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00064">64</a> of file <a class="el" href="../../df/d04/shutdown_8cpp_source.html">shutdown.cpp</a>.</p>

<p>References <a class="el" href="../../d8/d3d/pwr_8c_source.html#l00094">board_shutdown()</a>, <a class="el" href="../../d6/dfb/stubs__posix_8c_source.html#l00101">pthread_mutex_lock()</a>, <a class="el" href="../../d6/dfb/stubs__posix_8c_source.html#l00106">pthread_mutex_unlock()</a>, <a class="el" href="../../d7/d53/px4__log_8h_source.html#l00459">PX4_ERR</a>, <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00138">px4_register_shutdown_hook()</a>, <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00205">px4_shutdown_request()</a>, <a class="el" href="../../da/d65/px4__tasks_8h.html#a582217d56f2542b506a770d840da3c5c">px4_systemreset()</a>, <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00154">px4_unregister_shutdown_hook()</a>, <a class="el" href="../../dd/d3d/px4__shutdown_8h_source.html#l00049">shutdown_hook_t</a>, <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00050">shutdown_lock_counter</a>, and <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00048">shutdown_mutex</a>.</p>

<p>Referenced by <a class="el" href="../../d9/da5/param_8c_source.html#l01033">param_export()</a>, <a class="el" href="../../d2/d06/flashparams_8c_source.html#l00076">param_export_internal()</a>, and <a class="el" href="../../d6/d45/reboot_8c_source.html#l00060">reboot_main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d3d/px4__shutdown_8h_a86494415d898847c1e8bf6d7e6cad5ac_cgraph.svg" width="100%" height="525"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d3d/px4__shutdown_8h_a86494415d898847c1e8bf6d7e6cad5ac_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a28a443b4b848b5c2c04719ed3159fbbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/db5/visibility_8h.html#ad10ef148ba8327bd530fc6c32c1e181c">__EXPORT</a> int px4_unregister_shutdown_hook </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d3d/px4__shutdown_8h.html#af369fc25dfe239c4509251e7efa3b88c">shutdown_hook_t</a>&#160;</td>
          <td class="paramname"><em>hook</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a shutdown hook. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hook</td><td>callback method to be removed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, &lt;0 on error </dd></dl>

<p>Definition at line <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00154">154</a> of file <a class="el" href="../../df/d04/shutdown_8cpp_source.html">shutdown.cpp</a>.</p>

<p>References <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00124">max_shutdown_hooks</a>, <a class="el" href="../../d6/dfb/stubs__posix_8c_source.html#l00101">pthread_mutex_lock()</a>, <a class="el" href="../../d6/dfb/stubs__posix_8c_source.html#l00106">pthread_mutex_unlock()</a>, <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00125">shutdown_hooks</a>, and <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00048">shutdown_mutex</a>.</p>

<p>Referenced by <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00064">px4_shutdown_unlock()</a>, and <a class="el" href="../../d3/d30/logger_8cpp_source.html#l00800">px4::logger::Logger::run()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../dd/d3d/px4__shutdown_8h_a28a443b4b848b5c2c04719ed3159fbbc_cgraph.svg" width="418" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d3d/px4__shutdown_8h_a28a443b4b848b5c2c04719ed3159fbbc_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="af369fc25dfe239c4509251e7efa3b88c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/db5/visibility_8h.html#a568e6bde99652b7fd271ad206cfe38f5">__BEGIN_DECLS</a> typedef bool(* shutdown_hook_t) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutdown hook callback method (. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../dd/d3d/px4__shutdown_8h.html#aed5fa2862e48b0a663d1f82d64a70515" title="Register a method that should be called when powering off (and also on reboot). ">px4_register_shutdown_hook()</a>). </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if it's ok to shutdown, false if more time needed for cleanup </dd></dl>

<p>Definition at line <a class="el" href="../../dd/d3d/px4__shutdown_8h_source.html#l00049">49</a> of file <a class="el" href="../../dd/d3d/px4__shutdown_8h_source.html">px4_shutdown.h</a>.</p>

<p>Referenced by <a class="el" href="../../df/d04/shutdown_8cpp_source.html#l00064">px4_shutdown_unlock()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_ceed1ce8f89ba04e240f3818f1ccc961.html">platforms</a></li><li class="navelem"><a class="el" href="../../dd/d3d/px4__shutdown_8h.html">px4_shutdown.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
